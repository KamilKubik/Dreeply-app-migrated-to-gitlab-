_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[32],{D4LR:function(r,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/account",function(){return t("HQmj")}])},HQmj:function(r,e,t){"use strict";t.r(e);var n=t("nKUr"),o=t("q1tI"),a=t("cqNN"),c=t("xBw7"),i=t("u1Fb");t("U6Mw");e.default=function(){var r=Object(a.b)(),e=r.currentUser,t=r.logOut,u=Object(o.useState)(),s=u[0],d=u[1];return console.log(e.stripeRole),Object(n.jsxs)(c.a,{children:[Object(n.jsx)("div",{children:"Account"}),Object(n.jsx)("button",{onClick:function(){d(!0),Object(i.a)(e.uid)},className:" ml-20 hover:bg-primary hover:text-white dark:hover:bg-primarydark dark:hover:text-background border border-primary text-primary dark:text-primarydark dark:border-primarydark font-light py-2 px-6 rounded-2xl",children:s?"...Loading":"Update Plan"}),Object(n.jsx)("button",{onClick:function(){d(!0),Object(i.b)(e.uid)},className:" ml-20 hover:bg-primary hover:text-white dark:hover:bg-primarydark dark:hover:text-background border border-primary text-primary dark:text-primarydark dark:border-primarydark font-light py-2 px-6 rounded-2xl",children:s?"...Loading":"Get 10 units"}),Object(n.jsx)("button",{onClick:function(){d(!0),Object(i.d)()},className:"ml-20 hover:bg-primary hover:text-white dark:hover:bg-primarydark dark:hover:text-background border border-primary text-primary dark:text-primarydark dark:border-primarydark font-light py-2 px-6 rounded-2xl",children:s?"...Loading":"View Billing Portal"}),Object(n.jsxs)("p",{children:["Current plan: ",e.stripeRole]}),Object(n.jsx)("button",{onClick:t,children:"Log Out"})]})}},QhkM:function(r,e,t){"use strict";t.d(e,"a",(function(){return o}));t("nKUr");var n=t("q1tI");function o(){var r=Object(n.useState)({width:void 0,height:void 0}),e=r[0],t=r[1];return Object(n.useEffect)((function(){function r(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",r),r(),function(){return window.removeEventListener("resize",r)}}),[]),e}},cpVT:function(r,e,t){"use strict";function n(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}t.d(e,"a",(function(){return n}))},u1Fb:function(r,e,t){"use strict";t.d(e,"c",(function(){return m})),t.d(e,"a",(function(){return j})),t.d(e,"b",(function(){return x})),t.d(e,"d",(function(){return g}));var n=t("vJKn"),o=t.n(n),a=(t("cpVT"),t("rg98")),c=t("U6Mw"),i="https://js.stripe.com/v3",u=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,s="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",d=null,l=function(r){return null!==d?d:d=new Promise((function(e,t){if("undefined"!==typeof window)if(window.Stripe&&r&&console.warn(s),window.Stripe)e(window.Stripe);else try{var n=function(){for(var r=document.querySelectorAll('script[src^="'.concat(i,'"]')),e=0;e<r.length;e++){var t=r[e];if(u.test(t.src))return t}return null}();n&&r?console.warn(s):n||(n=function(r){var e=r&&!r.advancedFraudSignals?"?advancedFraudSignals=false":"",t=document.createElement("script");t.src="".concat(i).concat(e);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(t),t}(r)),n.addEventListener("load",(function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))})),n.addEventListener("error",(function(){t(new Error("Failed to load Stripe.js"))}))}catch(o){return void t(o)}else e(null)}))},p=function(r,e,t){if(null===r)return null;var n=r.apply(void 0,e);return function(r,e){r&&r._registerWrapper&&r._registerWrapper({name:"stripe-js",version:"1.14.0",startTime:e})}(n,t),n},f=Promise.resolve().then((function(){return l(null)})),b=!1;f.catch((function(r){b||console.warn(r)}));var h,w=function(){return h||(h=function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];b=!0;var n=Date.now();return f.then((function(r){return p(r,e,n)}))}("pk_test_51IVIucBdXPtKajNHgoC6xC1s2WRUopkoxIkuxCtuvPrDmhRDEyl3BfsW6E2CgmerMXKSwpXojBhACW9yVxcmVLIQ00bPN1lfDO")),h};var v=c.c.firestore(),m=function(){var r=Object(a.a)(o.a.mark((function r(e){var t,n;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.collection("projects").where("projectId","==",e).get();case 2:return t=r.sent,n=v.batch(),console.log(n),t.forEach((function(r){n.delete(r.ref)})),r.abrupt("return",n.commit());case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),j=function(){var r=Object(a.a)(o.a.mark((function r(e){return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c.b.collection("users").doc(e).collection("checkout_sessions").add({price:"price_1IVJjNBdXPtKajNHvs4FpbR7",success_url:"".concat(window.location.origin,"/dashboard/account"),cancel_url:"".concat(window.location.origin,"/dashboard/account")});case 2:r.sent.onSnapshot(function(){var r=Object(a.a)(o.a.mark((function r(e){var t,n,a;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.data(),n=t.error,a=t.sessionId,n&&alert("An error occured: ".concat(n.message)),!a){r.next=7;break}return r.next=5,w();case 5:r.sent.redirectToCheckout({sessionId:a});case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),x=function(){var r=Object(a.a)(o.a.mark((function r(e){return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c.b.collection("users").doc(e).collection("checkout_sessions").add({price:"price_1IVgUmBdXPtKajNH4VVwl6dw",success_url:"".concat(window.location.origin,"/dashboard/account"),cancel_url:"".concat(window.location.origin,"/dashboard/account")});case 2:r.sent.onSnapshot(function(){var r=Object(a.a)(o.a.mark((function r(e){var t,n,a;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.data(),n=t.error,a=t.sessionId,n&&alert("An error occured: ".concat(n.message)),!a){r.next=7;break}return r.next=5,w();case 5:r.sent.redirectToCheckout({sessionId:a});case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),g=function(){var r=Object(a.a)(o.a.mark((function r(){var e,t,n;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=c.c.app().functions("us-central1").httpsCallable("ext-firestore-stripe-subscriptions-createPortalLink"),r.next=3,e({returnUrl:"".concat(window.location.origin,"/dashboard/account")});case 3:t=r.sent,n=t.data,window.location.assign(n.url);case 6:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}()},xBw7:function(r,e,t){"use strict";var n=t("nKUr"),o=t("q1tI"),a=t("cqNN"),c=t("20a2"),i=t("4yjf"),u=t("z/o8"),s=t("pc+1"),d=t("QhkM"),l=function(r){var e=r.to,t=Object(c.useRouter)();return Object(o.useEffect)((function(){t.push(e)}),[e]),null};e.a=function(r){var e=r.children,t=Object(d.a)(),c=Object(o.useContext)(i.a),p=Object(a.b)().currentUser,f=Object(o.useRef)(null),b=c?"ml-52":"ml-20";return c?u.a.to(f.current,{marginLeft:"208px",ease:s.d.easeOut}):u.a.to(f.current,{marginLeft:"80px",ease:s.d.easeOut}),p?Object(n.jsx)(n.Fragment,{children:t.width<860?Object(n.jsx)(n.Fragment,{children:e}):Object(n.jsx)("div",{ref:f,className:"relative h-full ".concat(b," bg-background dark:bg-secondary"),style:{transitionTimingFunction:"linear",transitionDuration:"200ms",transitionProperty:"width, margin-left"},children:e})}):Object(n.jsx)(l,{to:"/"})}}},[["D4LR",1,0,3,5,2,4,6,7]]]);