{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"C:/off-saas/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _toConsumableArray from \"C:/off-saas/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"C:/off-saas/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport Router from 'next/router';\nimport { db, storage } from '../../../../../../lib/firebase';\nimport debounce from '../../../../../../utils/helpers';\nimport Image from 'next/image';\nimport gsap, { Linear } from 'gsap';\nimport { isMobile } from 'react-device-detect';\n\nvar Competitor = function Competitor(_ref) {\n  var data = _ref.data,\n      projectId = _ref.projectId,\n      documentId = _ref.documentId,\n      competitors = _ref.competitors,\n      index = _ref.index,\n      setCompetitors = _ref.setCompetitors,\n      provided = _ref.provided;\n\n  var _useState = useState(''),\n      image = _useState[0],\n      setImage = _useState[1];\n\n  var _useState2 = useState(''),\n      title = _useState2[0],\n      setTitle = _useState2[1];\n\n  var _useState3 = useState(''),\n      location = _useState3[0],\n      setLocation = _useState3[1];\n\n  var _useState4 = useState(''),\n      employees = _useState4[0],\n      setEmployees = _useState4[1];\n\n  var _useState5 = useState(''),\n      revenue = _useState5[0],\n      setRevenue = _useState5[1];\n\n  var _useState6 = useState(''),\n      elementIndex = _useState6[0],\n      setElementIndex = _useState6[1]; // Elements\n\n\n  var _useState7 = useState(''),\n      companyDescription = _useState7[0],\n      setCompanyDescription = _useState7[1];\n\n  var _useState8 = useState(''),\n      businessModel = _useState8[0],\n      setBusinessModel = _useState8[1];\n\n  var _useState9 = useState(''),\n      productOverview = _useState9[0],\n      setProductOverview = _useState9[1];\n\n  var _useState10 = useState(''),\n      promotionStrategy = _useState10[0],\n      setPromotionStrategy = _useState10[1];\n\n  var _useState11 = useState(''),\n      companyStrengths = _useState11[0],\n      setCompanyStrengths = _useState11[1];\n\n  var _useState12 = useState(''),\n      companyWeaknesses = _useState12[0],\n      setCompanyWeaknesses = _useState12[1];\n\n  var _useState13 = useState(''),\n      opportunities = _useState13[0],\n      setOpportunities = _useState13[1];\n\n  useEffect(function () {\n    setImage(data.image);\n    setTitle(data.title);\n    setLocation(data.location);\n    setEmployees(data.employees);\n    setRevenue(data.revenue);\n    setElementIndex(data.index); // Elements\n\n    setCompanyDescription(data.companyDescription);\n    setBusinessModel(data.businessModel);\n    setProductOverview(data.productOverview);\n    setPromotionStrategy(data.promotionStrategy);\n    setCompanyStrengths(data.companyStrengths);\n    setCompanyWeaknesses(data.companyWeaknesses);\n    setOpportunities(data.opportunities);\n  }, [competitors]);\n\n  var onFileChange = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var file, storageRef, fileRef, newCompetitorsArray;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              file = e.target.files[0];\n              storageRef = storage.ref();\n              fileRef = storageRef.child(file.name);\n              _context.next = 5;\n              return fileRef.put(file);\n\n            case 5:\n              _context.t0 = setImage;\n              _context.next = 8;\n              return fileRef.getDownloadURL();\n\n            case 8:\n              _context.t1 = _context.sent;\n              (0, _context.t0)(_context.t1);\n              // Firebase update\n              newCompetitorsArray = _toConsumableArray(competitors);\n              _context.next = 13;\n              return fileRef.getDownloadURL();\n\n            case 13:\n              _context.t2 = _context.sent;\n              _context.t3 = title;\n              _context.t4 = location;\n              _context.t5 = employees;\n              _context.t6 = revenue;\n              _context.t7 = elementIndex;\n              _context.t8 = companyDescription;\n              _context.t9 = businessModel;\n              _context.t10 = productOverview;\n              _context.t11 = promotionStrategy;\n              _context.t12 = companyStrengths;\n              _context.t13 = companyWeaknesses;\n              _context.t14 = opportunities;\n              newCompetitorsArray[index] = {\n                image: _context.t2,\n                title: _context.t3,\n                location: _context.t4,\n                employees: _context.t5,\n                revenue: _context.t6,\n                elementIndex: _context.t7,\n                companyDescription: _context.t8,\n                businessModel: _context.t9,\n                productOverview: _context.t10,\n                promotionStrategy: _context.t11,\n                companyStrengths: _context.t12,\n                companyWeaknesses: _context.t13,\n                opportunities: _context.t14\n              };\n              _context.next = 29;\n              return db.collection('projects').doc(projectId).collection('competitors').doc(Router.query.project).collection('inputs').doc(documentId).update({\n                competitorsArray: newCompetitorsArray\n              });\n\n            case 29:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onFileChange(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var onDataChange = function onDataChange(value, type) {\n    console.log(type);\n    type === 'title' && setTitle(value);\n    type === 'location' && setLocation(value);\n    type === 'employees' && setEmployees(value);\n    type === 'revenue' && setRevenue(value); // Elements\n\n    type === 'companyDescription' && setCompanyDescription(value);\n    type === 'businessModel' && setBusinessModel(value);\n    type === 'productOverview' && setProductOverview(value);\n    type === 'promotionStrategy' && setPromotionStrategy(value);\n    type === 'companyStrengths' && setCompanyStrengths(value);\n    type === 'companyWeaknesses' && setCompanyWeaknesses(value);\n    type === 'opportunities' && setOpportunities(value);\n\n    var newCompetitorsArray = _toConsumableArray(competitors);\n\n    newCompetitorsArray[index] = {\n      title: type === 'title' ? value : title,\n      location: type === 'location' ? value : location,\n      employees: type === 'employees' ? value : employees,\n      revenue: type === 'revenue' ? value : revenue,\n      image: image,\n      index: elementIndex,\n      // Elements\n      companyDescription: type === 'companyDescription' ? value : companyDescription,\n      businessModel: type === 'businessModel' ? value : businessModel,\n      productOverview: type === 'productOverview' ? value : productOverview,\n      promotionStrategy: type === 'promotionStrategy' ? value : promotionStrategy,\n      companyStrengths: type === 'companyStrengths' ? value : companyStrengths,\n      companyWeaknesses: type === 'companyWeaknesses' ? value : companyWeaknesses,\n      opportunities: type === 'opportunities' ? value : opportunities\n    };\n    dataUpdate(newCompetitorsArray);\n  };\n\n  var dataUpdate = useCallback(debounce( /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(newCompetitorsArray) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return db.collection('projects').doc(projectId).collection('competitors').doc(Router.query.project).collection('inputs').doc(documentId).update({\n                competitorsArray: newCompetitorsArray\n              });\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function (_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }(), 300), []);\n\n  var onCompetitorRemove = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(index) {\n      var newCompetitors;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              newCompetitors = competitors.filter(function (element) {\n                return index !== element.index;\n              }); // setCompetitors(newCompetitors);\n              // Firebase update\n\n              _context3.next = 3;\n              return db.collection('projects').doc(projectId).collection('competitors').doc(Router.query.project).collection('inputs').doc(documentId).update({\n                competitorsArray: newCompetitors\n              });\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function onCompetitorRemove(_x3) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var _useState14 = useState(false),\n      dropdownHelper = _useState14[0],\n      setDropdownHelper = _useState14[1]; // Elements\n\n\n  var descriptionTitle = document.getElementById(\"descriptionTitle\".concat(index));\n  var placeholderTitle = document.getElementById(\"placeholderTitle\".concat(index));\n  var descriptionModel = document.getElementById(\"descriptionModel\".concat(index));\n  var placeholderModel = document.getElementById(\"placeholderModel\".concat(index));\n  var descriptionProduct = document.getElementById(\"descriptionProduct\".concat(index));\n  var placeholderProduct = document.getElementById(\"placeholderProduct\".concat(index));\n  var descriptionPromotion = document.getElementById(\"descriptionPromotion\".concat(index));\n  var placeholderPromotion = document.getElementById(\"placeholderPromotion\".concat(index));\n  var descriptionStrengths = document.getElementById(\"descriptionStrengths\".concat(index));\n  var placeholderStrengths = document.getElementById(\"placeholderStrengths\".concat(index));\n  var descriptionWeaknesses = document.getElementById(\"descriptionWeaknesses\".concat(index));\n  var placeholderWeaknesses = document.getElementById(\"placeholderWeaknesses\".concat(index));\n  var descriptionOpportunities = document.getElementById(\"descriptionOpportunities\".concat(index));\n  var placeholderOpportunities = document.getElementById(\"placeholderOpportunities\".concat(index));\n  var dropDownElement = document.getElementById(\"dropdown\".concat(index));\n  var dataElement = document.getElementById(\"data\".concat(index));\n  useEffect(function () {\n    if (!isMobile) {\n      var containerElement = document.getElementById(\"container\".concat(index));\n      var competitorManager = document.getElementById(\"manager\".concat(index));\n      containerElement.addEventListener('mouseenter', function () {\n        gsap.to(competitorManager, {\n          height: 40,\n          duration: 0.5,\n          ease: Linear.easeIn\n        });\n      });\n      containerElement.addEventListener('mouseleave', function () {\n        gsap.to(competitorManager, {\n          height: 0,\n          duration: 0.5,\n          ease: Linear.easeOut\n        });\n      });\n    }\n  }, []);\n\n  var onSectionDropdown = function onSectionDropdown() {\n    var sectionHeight = descriptionTitle.offsetHeight + placeholderTitle.offsetHeight + descriptionModel.offsetHeight + placeholderModel.offsetHeight + 24 + descriptionProduct.offsetHeight + placeholderProduct.offsetHeight + 24 + descriptionPromotion.offsetHeight + placeholderPromotion.offsetHeight + 24 + descriptionStrengths.offsetHeight + placeholderStrengths.offsetHeight + 24 + descriptionWeaknesses.offsetHeight + placeholderWeaknesses.offsetHeight + 24 + descriptionOpportunities.offsetHeight + placeholderOpportunities.offsetHeight + 24;\n\n    if (!dropdownHelper) {\n      gsap.to(dataElement, {\n        height: sectionHeight,\n        marginTop: 32,\n        marginBottom: 112,\n        autoAlpha: 1,\n        duration: 1,\n        ease: Linear\n      });\n      gsap.to(dropDownElement, {\n        rotation: '0_cw',\n        duration: 1,\n        ease: Linear\n      });\n      setDropdownHelper(true);\n    } else if (dropdownHelper) {\n      gsap.to(dataElement, {\n        height: 0,\n        marginTop: 0,\n        marginBottom: 0,\n        autoAlpha: 0,\n        duration: 1,\n        ease: Linear\n      });\n      gsap.to(dropDownElement, {\n        rotation: '-90_ccw',\n        duration: 1,\n        ease: Linear\n      });\n      setDropdownHelper(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    style: {\n      height: 'fit-content'\n    },\n    id: \"container\".concat(index),\n    className: \"w-full bg-background rounded-2xl p-4 ssmContainer:p-6 shadow-md overflow-hidden mt-8 smContainer:mt-8\",\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      style: {\n        height: \"\".concat(isMobile ? 40 : 0),\n        top: \"\".concat(isMobile ? '-6px' : '-12px')\n      },\n      id: \"manager\".concat(index),\n      className: \"flex justify-between relative -top-3\",\n      children: [/*#__PURE__*/_jsx(\"img\", {\n        className: \"cursor-pointer\" //   style={{ transform: 'rotate(-90deg)' }}\n        ,\n        onClick: onSectionDropdown,\n        id: \"dropdown\".concat(index),\n        src: \"/competitors/dropdown.svg\",\n        height: 20,\n        width: 20\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"flex\",\n        children: [/*#__PURE__*/_jsx(\"img\", {\n          className: \"cursor-pointer mr-2\",\n          src: \"/competitors/drag.svg\",\n          height: 20,\n          width: 20\n        }), /*#__PURE__*/_jsx(Image, {\n          className: \"cursor-pointer\",\n          onClick: function onClick() {\n            return onCompetitorRemove(data.index);\n          },\n          src: \"/competitors/remove.svg\",\n          height: 20,\n          width: 20\n        })]\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      id: index,\n      className: \"flex gap-6 flex-col justify-center items-center smContainer:gap-0 smContainer:grid smContainer:grid-cols-12fr\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"smContainer:col-start-1 smContainer:col-end-4 justify-self-center flex justify-start items-center\",\n        children: [image !== '' ? /*#__PURE__*/_jsx(\"label\", {\n          htmlFor: \"upload-image\".concat(index),\n          className: \"relative w-20 h-20 cursor-pointer rounded-full bg-white flex justify-center items-center\",\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: image,\n            height: 55,\n            width: 55\n          })\n        }) : /*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsx(\"label\", {\n            htmlFor: \"upload-image\".concat(index),\n            className: \"w-20 h-20 cursor-pointer rounded-full bg-primary flex justify-center items-center\",\n            children: /*#__PURE__*/_jsx(Image, {\n              src: \"/competitors/empty-image.svg\",\n              height: 65,\n              width: 65\n            })\n          })\n        }), /*#__PURE__*/_jsx(\"input\", {\n          type: \"file\",\n          id: \"upload-image\".concat(index),\n          style: {\n            display: 'none',\n            zIndex: 10\n          },\n          onChange: onFileChange\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"smContainer:col-start-5 smContainer:col-end-13 grid grid-cols-2fr grid-rows-2fr justify-items-center items-center gap-x-4 ssmContainer:gap-x-8 gap-y-2 ssmContainer:gap-y-4\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsx(\"input\", {\n            onChange: function onChange(e) {\n              return onDataChange(e.target.value, 'title');\n            },\n            value: title,\n            className: \"bg-white rounded-2xl w-full px-3 py-2 text-sm text-primarydark focus:outline-none\",\n            placeholder: \"name\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsx(\"input\", {\n            onChange: function onChange(e) {\n              return onDataChange(e.target.value, 'location');\n            },\n            value: location,\n            className: \"bg-white rounded-2xl w-full px-3 py-2 text-sm text-primarydark focus:outline-none\",\n            placeholder: \"location\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsx(\"input\", {\n            onChange: function onChange(e) {\n              return onDataChange(e.target.value, 'employees');\n            },\n            value: employees,\n            className: \"bg-white rounded-2xl w-full px-3 py-2 text-sm text-primarydark focus:outline-none\",\n            placeholder: \"employees\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsx(\"input\", {\n            onChange: function onChange(e) {\n              return onDataChange(e.target.value, 'revenue');\n            },\n            value: revenue,\n            className: \"bg-white rounded-2xl w-full px-3 py-2 text-sm text-primarydark focus:outline-none\",\n            placeholder: \"revenue\"\n          })\n        })]\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      id: \"data\".concat(index),\n      className: \"w-full h-0 invisible\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        id: \"descriptionTitle\".concat(index),\n        className: \"flex justify-start items-center\",\n        children: [/*#__PURE__*/_jsx(Image, {\n          src: \"/competitors/description.svg\",\n          height: 22,\n          width: 22\n        }), /*#__PURE__*/_jsx(\"p\", {\n          className: \"text-primarydark ml-2\",\n          children: \"Company description\"\n        })]\n      }), /*#__PURE__*/_jsx(\"textarea\", {\n        value: companyDescription,\n        onChange: function onChange(e) {\n          return onDataChange(e.target.value, 'companyDescription');\n        },\n        id: \"placeholderTitle\".concat(index),\n        className: \"w-full bg-white rounded-2xl mt-2 p-2 text-primarydark text-sm px-4 py-3 h-28 max-h-28 focus:outline-none\",\n        placeholder: \"Describe the main assumption of analyzed company.\"\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        id: \"descriptionModel\".concat(index),\n        className: \"flex justify-start items-center mt-6\",\n        children: [/*#__PURE__*/_jsx(Image, {\n          src: \"/competitors/model.svg\",\n          height: 22,\n          width: 22\n        }), /*#__PURE__*/_jsx(\"p\", {\n          className: \"text-primarydark ml-2\",\n          children: \"Business model\"\n        })]\n      }), /*#__PURE__*/_jsx(\"textarea\", {\n        value: businessModel,\n        onChange: function onChange(e) {\n          return onDataChange(e.target.value, 'businessModel');\n        },\n        id: \"placeholderModel\".concat(index),\n        className: \"w-full bg-white rounded-2xl mt-2 p-2 text-primarydark text-sm px-4 py-3 h-28 max-h-28 focus:outline-none\",\n        placeholder: \"How does the company business model look like?\"\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        id: \"descriptionProduct\".concat(index),\n        className: \"flex justify-start items-center mt-6\",\n        children: [/*#__PURE__*/_jsx(Image, {\n          src: \"/competitors/product1.svg\",\n          height: 22,\n          width: 22\n        }), /*#__PURE__*/_jsx(\"p\", {\n          className: \"text-primarydark ml-2\",\n          children: \"Product overview\"\n        })]\n      }), /*#__PURE__*/_jsx(\"textarea\", {\n        value: productOverview,\n        onChange: function onChange(e) {\n          return onDataChange(e.target.value, 'productOverview');\n        },\n        id: \"placeholderProduct\".concat(index),\n        className: \"w-full bg-white rounded-2xl mt-2 p-2 text-primarydark text-sm px-4 py-3 h-28 max-h-28 focus:outline-none\",\n        placeholder: \"What is the full range of products and services the company offers?\"\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        id: \"descriptionPromotion\".concat(index),\n        className: \"flex justify-start items-center mt-6\",\n        children: [/*#__PURE__*/_jsx(Image, {\n          src: \"/competitors/promotion.svg\",\n          height: 22,\n          width: 22\n        }), /*#__PURE__*/_jsx(\"p\", {\n          className: \"text-primarydark ml-2\",\n          children: \"Promotion strategy\"\n        })]\n      }), /*#__PURE__*/_jsx(\"textarea\", {\n        value: promotionStrategy,\n        onChange: function onChange(e) {\n          return onDataChange(e.target.value, 'promotionStrategy');\n        },\n        id: \"placeholderPromotion\".concat(index),\n        className: \"w-full bg-white rounded-2xl mt-2 p-2 text-primarydark text-sm px-4 py-3 h-28 max-h-28 focus:outline-none\",\n        placeholder: \"What are the company marketing and promotional strategies?\"\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        id: \"descriptionStrengths\".concat(index),\n        className: \"flex justify-start items-center mt-6\",\n        children: [/*#__PURE__*/_jsx(Image, {\n          src: \"/competitors/strengths.svg\",\n          height: 22,\n          width: 22\n        }), /*#__PURE__*/_jsx(\"p\", {\n          className: \"text-primarydark ml-2\",\n          children: \"Company strengths\"\n        })]\n      }), /*#__PURE__*/_jsx(\"textarea\", {\n        value: companyStrengths,\n        onChange: function onChange(e) {\n          return onDataChange(e.target.value, 'companyStrengths');\n        },\n        id: \"placeholderStrengths\".concat(index),\n        className: \"w-full bg-white rounded-2xl mt-2 p-2 text-primarydark text-sm px-4 py-3 h-28 max-h-28 focus:outline-none\",\n        placeholder: \"What do your competitors do really well that differentiates them?\"\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        id: \"descriptionWeaknesses\".concat(index),\n        className: \"flex justify-start items-center mt-6\",\n        children: [/*#__PURE__*/_jsx(Image, {\n          src: \"/competitors/weaknesses.svg\",\n          height: 22,\n          width: 22\n        }), /*#__PURE__*/_jsx(\"p\", {\n          className: \"text-primarydark ml-2\",\n          children: \"Company Weaknesses\"\n        })]\n      }), /*#__PURE__*/_jsx(\"textarea\", {\n        value: companyWeaknesses,\n        onChange: function onChange(e) {\n          return onDataChange(e.target.value, 'companyWeaknesses');\n        },\n        id: \"placeholderWeaknesses\".concat(index),\n        className: \"w-full bg-white rounded-2xl mt-2 p-2 text-primarydark text-sm px-4 py-3 h-28 max-h-28 focus:outline-none\",\n        placeholder: \"What do the company customers complain about the most, and what products do they lack?\"\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        id: \"descriptionOpportunities\".concat(index),\n        className: \"flex justify-start items-center mt-6\",\n        children: [/*#__PURE__*/_jsx(Image, {\n          src: \"/competitors/opportunities2.svg\",\n          height: 22,\n          width: 22\n        }), /*#__PURE__*/_jsx(\"p\", {\n          className: \"text-primarydark ml-2\",\n          children: \"Opportunities\"\n        })]\n      }), /*#__PURE__*/_jsx(\"textarea\", {\n        value: opportunities,\n        onChange: function onChange(e) {\n          return onDataChange(e.target.value, 'opportunities');\n        },\n        id: \"placeholderOpportunities\".concat(index),\n        className: \"w-full bg-white rounded-2xl mt-2 p-2 text-primarydark text-sm px-4 py-3 h-28 max-h-28 focus:outline-none\",\n        placeholder: \"What distinguish your startup from this particular competitive company?\"\n      })]\n    })]\n  });\n};\n\nexport default Competitor;","map":null,"metadata":{},"sourceType":"module"}