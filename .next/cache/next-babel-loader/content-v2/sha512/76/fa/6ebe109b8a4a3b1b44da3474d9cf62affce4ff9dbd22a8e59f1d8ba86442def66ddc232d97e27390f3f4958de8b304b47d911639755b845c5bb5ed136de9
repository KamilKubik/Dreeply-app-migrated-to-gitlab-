{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { withSuperJSONPage as _withSuperJSONPage } from \"babel-plugin-superjson-next/tools\";\nvar _jsxFileName = \"C:\\\\off-saas\\\\pages\\\\dashboard\\\\active-plan.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useAuth } from '../../lib/newAuth';\nimport { db } from '../../lib/firebase';\nimport NavbarTemplate from '../../components/dashboard/NavbarTemplate';\nimport { createCheckoutSessionThreeDays, createCheckoutSessionWeekly, goToBillingPortal } from '../../lib/db';\nimport TippyMonster from '../../components/dashboard/Tippy';\nimport ActivePlan from '../../components/dashboard/account/ActivePlan';\nimport PricingPage from '../../components/dashboard/account/PricingPage';\n\nconst AccountPage = () => {\n  const {\n    currentUser,\n    logOut\n  } = useAuth();\n  const {\n    0: activePlan,\n    1: setActivePlan\n  } = useState(null);\n  const {\n    0: planRole,\n    1: setPlanRole\n  } = useState('');\n  const {\n    0: activePlanPeriodEnd,\n    1: setActivePlanPeriodEnd\n  } = useState('');\n  console.log(currentUser);\n  useEffect(() => {\n    // Fetch users current plan\n    if (currentUser.stripeRole === 'free') {\n      setActivePlan('free');\n    } else {\n      db.collection('users').doc(currentUser.uid).collection('subscriptions').where('status', 'in', ['trialing', 'active']).onSnapshot(async snapshot => {\n        // In this implementation we only expect one active or trialing subscription to exist.\n        const doc = snapshot.docs[0];\n        const data = doc.data();\n        console.log(doc.data());\n        setActivePlan(data);\n        setPlanRole(data.role);\n        setActivePlanPeriodEnd(new Date(data.current_period_end.seconds * 1000));\n      });\n    }\n  }, []);\n  console.log(activePlan && activePlan);\n  console.log(activePlanPeriodEnd && activePlanPeriodEnd);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(TippyMonster, {\n      activePlan: true,\n      contentClass: \"h-40 w-80 shadow-lg rounded-2xl bg-primary flex justify-center items-center\",\n      contentText: \"This is a place where magical things happen \",\n      contentText1: \" Just start creating your startup and bring your idea into reality. Once you've done that, you can manage it from the main panel. Feel free to edit, save or delete your idea\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(NavbarTemplate, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"min-h-screen w-full relative flex flex-col items-center text-primarydark\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full max-w-mobileEnd screenSmall:max-w-screenSmall screenMediumSmall:max-w-pricingBreakpoint screenMedium:max-w-screenMedium screenLarge:max-w-screenLarge QHD:max-w-QHD mt-12\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 grid-rows-1 grid-flow-col\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                height: \"30\",\n                width: \"30\",\n                className: \"fill-current text-primary dark:text-primarydark\",\n                xmlns: \"http://www.w3.org/2000/svg\",\n                viewBox: \"0 0 128 128\",\n                children: [/*#__PURE__*/_jsxDEV(\"title\", {\n                  children: \"Landing Success\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 60,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n                  id: \"Landing_Success\",\n                  \"data-name\": \"Landing Success\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    className: \"cls-1\",\n                    d: \"M109.3,90.1A46,46,0,0,0,65,36V20.08c1.78-.62,7.21-2.14,12.57.23a19.33,19.33,0,0,0,14.82,0c.87-.38.61.31.61-17.93a1,1,0,0,0-1.43-.93c-.07,0-6.69,2.87-13.18,0A19.41,19.41,0,0,0,65,.93,1,1,0,0,0,63,1V36a45.86,45.86,0,0,0-28.66,10.8C16.18,40.48,4,40,.79,45.51-2.29,50.86,3.94,59.3,10,65.68A11,11,0,0,0,18,83c.81,38.41,46.08,59.2,75.66,34.21,8.53,3,29,9.15,33.55,1.31C130.39,113,123.86,102.65,109.3,90.1ZM77.59,3.31A19.39,19.39,0,0,0,91,3.83V18.68c-1.79.62-7.22,2.13-12.57-.23A19.19,19.19,0,0,0,65,17.93V3.08C66.81,2.46,72.24,1,77.59,3.31ZM65,45v-7c39.69.91,58,50.27,28.21,76.81C71.32,107,46,92.66,27.77,78.64a11,11,0,0,0-3.2-16.13A43.88,43.88,0,0,1,63,38.06V45A1,1,0,0,0,65,45ZM32.55,48.36a46.21,46.21,0,0,0-9.83,13.28,10.93,10.93,0,0,0-11.4,2.47C-8.39,43.23,5.23,39.08,32.55,48.36ZM10,72a9,9,0,1,1,9,9A9,9,0,0,1,10,72Zm10,11a11,11,0,0,0,6.34-2.82c18.45,14.21,43.45,28.35,65.05,36.22C63,139.16,20.83,119.1,20.05,83Zm105.4,34.5c-2.51,4.35-14,3.62-30-1.85a45.61,45.61,0,0,0,13.42-23.21C121.59,103.58,128,113.12,125.45,117.47Z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 62,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 61,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 53,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"self-end text-2xl pl-2 dark:text-background relative top-1.5\",\n                children: \"Active plan\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text text-gray mt-0.5\",\n              children: \"Manage your current plan, billing details and invoices from billing history\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ActivePlan, {\n            goToBillingPortal: goToBillingPortal,\n            planRole: planRole,\n            activePlan: activePlan,\n            activePlanPeriodEnd: activePlanPeriodEnd\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(PricingPage, {\n            currentUser: currentUser,\n            goToBillingPortal: goToBillingPortal,\n            activePlan: activePlan\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\nexport default _withSuperJSONPage(AccountPage);","map":{"version":3,"sources":["C:/off-saas/pages/dashboard/active-plan.js"],"names":["React","useEffect","useState","useAuth","db","NavbarTemplate","createCheckoutSessionThreeDays","createCheckoutSessionWeekly","goToBillingPortal","TippyMonster","ActivePlan","PricingPage","AccountPage","currentUser","logOut","activePlan","setActivePlan","planRole","setPlanRole","activePlanPeriodEnd","setActivePlanPeriodEnd","console","log","stripeRole","collection","doc","uid","where","onSnapshot","snapshot","docs","data","role","Date","current_period_end","seconds"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useAuth } from '../../lib/newAuth';\r\nimport { db } from '../../lib/firebase';\r\nimport NavbarTemplate from '../../components/dashboard/NavbarTemplate';\r\nimport { createCheckoutSessionThreeDays, createCheckoutSessionWeekly, goToBillingPortal } from '../../lib/db';\r\nimport TippyMonster from '../../components/dashboard/Tippy';\r\nimport ActivePlan from '../../components/dashboard/account/ActivePlan';\r\nimport PricingPage from '../../components/dashboard/account/PricingPage';\r\n\r\nconst AccountPage = () => {\r\n  const { currentUser, logOut } = useAuth();\r\n  const [activePlan, setActivePlan] = useState(null);\r\n  const [planRole, setPlanRole] = useState('');\r\n  const [activePlanPeriodEnd, setActivePlanPeriodEnd] = useState('');\r\n\r\n  console.log(currentUser);\r\n  useEffect(() => {\r\n    // Fetch users current plan\r\n    if (currentUser.stripeRole === 'free') {\r\n      setActivePlan('free');\r\n    } else {\r\n      db.collection('users')\r\n        .doc(currentUser.uid)\r\n        .collection('subscriptions')\r\n        .where('status', 'in', ['trialing', 'active'])\r\n        .onSnapshot(async (snapshot) => {\r\n          // In this implementation we only expect one active or trialing subscription to exist.\r\n          const doc = snapshot.docs[0];\r\n          const data = doc.data();\r\n          console.log(doc.data());\r\n          setActivePlan(data);\r\n          setPlanRole(data.role);\r\n          setActivePlanPeriodEnd(new Date(data.current_period_end.seconds * 1000));\r\n        });\r\n    }\r\n  }, []);\r\n  console.log(activePlan && activePlan);\r\n  console.log(activePlanPeriodEnd && activePlanPeriodEnd);\r\n\r\n  return (\r\n    <>\r\n      <TippyMonster\r\n        activePlan\r\n        contentClass=\"h-40 w-80 shadow-lg rounded-2xl bg-primary flex justify-center items-center\"\r\n        contentText=\"This is a place where magical things happen \"\r\n        contentText1=\" Just start creating your startup and bring your idea into reality. Once you've done that, you can manage it from the main panel. Feel free to edit, save or delete your idea\"\r\n      />\r\n      <NavbarTemplate>\r\n        <div className=\"min-h-screen w-full relative flex flex-col items-center text-primarydark\">\r\n          <div className=\"w-full max-w-mobileEnd screenSmall:max-w-screenSmall screenMediumSmall:max-w-pricingBreakpoint screenMedium:max-w-screenMedium screenLarge:max-w-screenLarge QHD:max-w-QHD mt-12\">\r\n            <div className=\"grid grid-cols-2 grid-rows-1 grid-flow-col\">\r\n              <div className=\"flex items-center\">\r\n                <svg\r\n                  height=\"30\"\r\n                  width=\"30\"\r\n                  className=\"fill-current text-primary dark:text-primarydark\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  viewBox=\"0 0 128 128\"\r\n                >\r\n                  <title>Landing Success</title>\r\n                  <g id=\"Landing_Success\" data-name=\"Landing Success\">\r\n                    <path\r\n                      className=\"cls-1\"\r\n                      d=\"M109.3,90.1A46,46,0,0,0,65,36V20.08c1.78-.62,7.21-2.14,12.57.23a19.33,19.33,0,0,0,14.82,0c.87-.38.61.31.61-17.93a1,1,0,0,0-1.43-.93c-.07,0-6.69,2.87-13.18,0A19.41,19.41,0,0,0,65,.93,1,1,0,0,0,63,1V36a45.86,45.86,0,0,0-28.66,10.8C16.18,40.48,4,40,.79,45.51-2.29,50.86,3.94,59.3,10,65.68A11,11,0,0,0,18,83c.81,38.41,46.08,59.2,75.66,34.21,8.53,3,29,9.15,33.55,1.31C130.39,113,123.86,102.65,109.3,90.1ZM77.59,3.31A19.39,19.39,0,0,0,91,3.83V18.68c-1.79.62-7.22,2.13-12.57-.23A19.19,19.19,0,0,0,65,17.93V3.08C66.81,2.46,72.24,1,77.59,3.31ZM65,45v-7c39.69.91,58,50.27,28.21,76.81C71.32,107,46,92.66,27.77,78.64a11,11,0,0,0-3.2-16.13A43.88,43.88,0,0,1,63,38.06V45A1,1,0,0,0,65,45ZM32.55,48.36a46.21,46.21,0,0,0-9.83,13.28,10.93,10.93,0,0,0-11.4,2.47C-8.39,43.23,5.23,39.08,32.55,48.36ZM10,72a9,9,0,1,1,9,9A9,9,0,0,1,10,72Zm10,11a11,11,0,0,0,6.34-2.82c18.45,14.21,43.45,28.35,65.05,36.22C63,139.16,20.83,119.1,20.05,83Zm105.4,34.5c-2.51,4.35-14,3.62-30-1.85a45.61,45.61,0,0,0,13.42-23.21C121.59,103.58,128,113.12,125.45,117.47Z\"\r\n                    />\r\n                  </g>\r\n                </svg>\r\n                <p className=\"self-end text-2xl pl-2 dark:text-background relative top-1.5\">Active plan</p>\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <p className=\"text text-gray mt-0.5\">Manage your current plan, billing details and invoices from billing history</p>\r\n            </div>\r\n            {/* Plan details */}\r\n            <ActivePlan\r\n              goToBillingPortal={goToBillingPortal}\r\n              planRole={planRole}\r\n              activePlan={activePlan}\r\n              activePlanPeriodEnd={activePlanPeriodEnd}\r\n            />\r\n            {/* Pricing */}\r\n            <PricingPage currentUser={currentUser} goToBillingPortal={goToBillingPortal} activePlan={activePlan} />\r\n          </div>\r\n        </div>\r\n      </NavbarTemplate>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AccountPage;\r\n"]},"metadata":{},"sourceType":"module"}