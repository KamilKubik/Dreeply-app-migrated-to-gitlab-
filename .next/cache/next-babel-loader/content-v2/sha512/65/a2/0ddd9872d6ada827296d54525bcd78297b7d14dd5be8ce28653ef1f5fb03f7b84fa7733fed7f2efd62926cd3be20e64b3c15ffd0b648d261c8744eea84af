{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\off-saas\\\\pages\\\\dashboard\\\\projects\\\\new-startup.js\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useRouter } from 'next/router';\nimport gsap, { Linear } from 'gsap';\nimport { v4 as uuidv4 } from 'uuid';\nimport { useAuth } from '../../../lib/newAuth';\nimport { db } from '../../../lib/firebase';\nimport NavbarTemplate from '../../../components/dashboard/NavbarTemplate';\nimport { CountryDropdown } from 'react-country-region-selector';\nimport ImagesModal from '../../../components/dashboard/startup/ImagesModal';\n\nconst newStartupPage = () => {\n  const {\n    0: projectName,\n    1: setProjectName\n  } = useState('');\n  const {\n    0: projectDescription,\n    1: setProjectDescription\n  } = useState('');\n  const {\n    0: projectField,\n    1: setProjectField\n  } = useState('');\n  const {\n    0: projectCountry,\n    1: setProjectCountry\n  } = useState('');\n  const {\n    0: projectEmail,\n    1: setProjectEmail\n  } = useState('');\n  const {\n    0: projectNumber,\n    1: setProjectNumber\n  } = useState('');\n  const {\n    0: imageName,\n    1: setImageName\n  } = useState('blank');\n  const {\n    0: imagesModal,\n    1: setImagesModal\n  } = useState(false);\n  const {\n    0: fileUrl,\n    1: setFileUrl\n  } = useState(null);\n  const {\n    0: userName,\n    1: setUserName\n  } = useState('');\n  const router = useRouter();\n  const {\n    currentUser\n  } = useAuth();\n  const {\n    0: projects,\n    1: setProjects\n  } = useState(); // GSAP\n\n  const mainContainer = useRef();\n  useEffect(async () => {\n    const userProjects = await db.collection('projects').where('uid', '==', currentUser.uid).get();\n    const arrays = [];\n    userProjects.docs.map(doc => {\n      if (doc.data().uid == currentUser.uid) {\n        return arrays.push(doc.data());\n      }\n\n      return;\n    });\n    setProjects(arrays); // Fetch current user name\n\n    const data = await db.collection('users').doc(currentUser.uid).get();\n    setUserName(data.data().name);\n  }, []);\n  console.log('Current user --> ', currentUser);\n\n  const onProjectCreate = async e => {\n    projects.map(project => {\n      if (project.projectName == projectName) {\n        alert('This name already exists');\n        return;\n      }\n    });\n    e.preventDefault(); // HIDE CURRENT CONTAINER\n\n    await gsap.to(mainContainer.current, {\n      autoAlpha: 0,\n      duration: 1,\n      ease: Linear\n    }); // SHOW LOADING SCREEN\n    // ADD NEW PROJECT\n\n    const projectId = uuidv4();\n    const newProject = {\n      projectName: projectName,\n      projectDescription: projectDescription,\n      projectField: projectField,\n      projectCountry: projectCountry,\n      projectEmail: projectEmail,\n      projectNumber: projectNumber,\n      imageName,\n      imageFileUrl: fileUrl,\n      createdAt: new Date().toISOString(),\n      projectId: projectId,\n      uid: currentUser.uid,\n      isIdeaPlanCreated: false,\n      isBusinessPlanCreated: false,\n      isCashflowCreated: false,\n      isCompetitorsAnalysisCreated: false,\n      isMembersManagerCreated: false,\n      projectUsers: [{\n        userName: userName,\n        userUid: currentUser.uid,\n        userStripeRole: currentUser.stripeRole,\n        userToken: currentUser.token,\n        userEmail: currentUser.email\n      }]\n    };\n    await db.collection('projects').doc(projectId).set(newProject); // await db.collection('currentProject').doc(currentUser.uid).set(newProject);\n\n    router.push(`/dashboard/projects/[project]`, `/dashboard/projects/${projectName}`);\n  };\n\n  const onFileChange = async e => {\n    if (imageName && fileUrl) {\n      setImageName('blank');\n    }\n\n    setImagesModal(false);\n    const file = e.target.files[0];\n    const storageRef = storage.ref();\n    const fileRef = storageRef.child(file.name);\n    await fileRef.put(file);\n    setFileUrl(await fileRef.getDownloadURL());\n  };\n\n  const browseImageOpen = () => {\n    setImagesModal(true);\n    setImageName('blank');\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [imagesModal && /*#__PURE__*/_jsxDEV(ImagesModal, {\n      currentUser: currentUser,\n      onFileChange: onFileChange,\n      setImagesModal: setImagesModal,\n      setImageName: setImageName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(NavbarTemplate, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: mainContainer,\n        className: \"min-h-screen w-full max-w-full relative px-32 py-16 flex items-center flex-col\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"z-10 p-10 h-auto grid grid-cols-1 grid-rows-3 w-auto max-w-nameContainer w-full bg-white rounded-3xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row-span-1 text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-medium flex items-center justify-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"/project-create/rocket.svg\",\n                height: 36,\n                width: 36,\n                className: \"inline-block\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"ml-2 text-primarydark\",\n                children: \"Let's create your startup!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-base text-gray px-4\",\n              children: \"Oops, one more tiny step and we will get down to business.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row-span-2\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"z-50 px-4 pt-2 rounded-2xl mt-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-4\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  value: projectName,\n                  onChange: e => setProjectName(e.target.value),\n                  id: \"startup-name\",\n                  className: \"border border-background focus:border-primary shadow appearance-none rounded w-full py-3 px-4 text-primarydark leading-tight focus:outline-none focus:shadow-outline text-sm bg-white rounded-2xl mr-2\",\n                  type: \"startup-name\",\n                  placeholder: \"startup name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 131,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-4\",\n                children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  value: projectDescription,\n                  onChange: e => setProjectDescription(e.target.value),\n                  id: \"startup-description\",\n                  style: {\n                    maxHeight: 160\n                  },\n                  className: \"border border-background focus:border-primary shadow appearance-none rounded w-full py-3 px-4 text-primarydark leading-tight focus:outline-none focus:shadow-outline text-sm bg-white rounded-2xl mr-2 pb-12\",\n                  type: \"startup-description\",\n                  placeholder: \"startup description\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 141,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-items-stretch\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    value: projectField,\n                    onChange: e => setProjectField(e.target.value),\n                    autoComplete: \"none\",\n                    className: \"border border-background focus:border-primary shadow appearance-none rounded w-full py-3 px-4 text-primarydark leading-tight focus:outline-none focus:shadow-outline text-sm bg-white rounded-2xl mr-2\",\n                    type: \"text\",\n                    placeholder: \"Startup field\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 153,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(CountryDropdown, {\n                    value: projectCountry,\n                    onChange: country => setProjectCountry(country),\n                    id: \"test\",\n                    defaultOptionLabel: \"Country\",\n                    className: `${projectCountry ? 'text-primarydark' : 'text-placeholder'} border border-background focus:border-primary shadow appearance-none rounded w-full py-3 px-4 leading-tight focus:outline-none focus:shadow-outline text-sm bg-white rounded-2xl ml-2`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 161,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-items-stretch mt-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    value: projectEmail,\n                    onChange: e => setProjectEmail(e.target.value),\n                    autoComplete: \"none\",\n                    className: \"border border-background focus:border-primary shadow appearance-none rounded w-full py-3 px-4 text-primarydark leading-tight focus:outline-none focus:shadow-outline text-sm bg-white rounded-2xl mr-2\",\n                    type: \"text\",\n                    placeholder: \"E-mail\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 172,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    value: projectNumber,\n                    onChange: e => setProjectNumber(e.target.value),\n                    autoComplete: \"none\",\n                    className: \"border border-background focus:border-primary shadow appearance-none rounded w-full py-3 px-4 text-primarydark leading-tight focus:outline-none focus:shadow-outline text-sm bg-white rounded-2xl ml-2\",\n                    type: \"text\",\n                    placeholder: \"Phone number\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 180,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-center items-center p-6 z-10\",\n                children: fileUrl || imageName !== 'blank' ? imageName == 'blank' ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  style: {\n                    height: '200px',\n                    width: '200px'\n                  },\n                  src: fileUrl,\n                  onClick: () => setImagesModal(true),\n                  className: \"cursor-pointer\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 193,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n                  onClick: () => setImagesModal(true),\n                  src: `/modal/${imageName}.svg`,\n                  height: 200,\n                  width: 200,\n                  className: \"cursor-pointer\",\n                  style: {\n                    height: '200px',\n                    width: '200px'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n                  onClick: () => browseImageOpen(),\n                  src: \"/edit-photo.svg\",\n                  height: 200,\n                  width: 200,\n                  className: \"cursor-pointer\",\n                  style: {\n                    height: '200px',\n                    width: '200px'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n                style: {\n                  width: '100%',\n                  color: '#6C63FF'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-between mt-8\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-primarydark\",\n                  children: \"Back\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 222,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"z-50 border-2 border-primary hover:bg-primary hover:text-white text-primary font-medium py-1.5 px-6 rounded-2xl focus:outline-none\",\n                  onClick: onProjectCreate,\n                  children: \"Create your project!\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\nexport default newStartupPage;","map":{"version":3,"sources":["C:/off-saas/pages/dashboard/projects/new-startup.js"],"names":["React","useEffect","useRef","useState","useRouter","gsap","Linear","v4","uuidv4","useAuth","db","NavbarTemplate","CountryDropdown","ImagesModal","newStartupPage","projectName","setProjectName","projectDescription","setProjectDescription","projectField","setProjectField","projectCountry","setProjectCountry","projectEmail","setProjectEmail","projectNumber","setProjectNumber","imageName","setImageName","imagesModal","setImagesModal","fileUrl","setFileUrl","userName","setUserName","router","currentUser","projects","setProjects","mainContainer","userProjects","collection","where","uid","get","arrays","docs","map","doc","data","push","name","console","log","onProjectCreate","e","project","alert","preventDefault","to","current","autoAlpha","duration","ease","projectId","newProject","imageFileUrl","createdAt","Date","toISOString","isIdeaPlanCreated","isBusinessPlanCreated","isCashflowCreated","isCompetitorsAnalysisCreated","isMembersManagerCreated","projectUsers","userUid","userStripeRole","stripeRole","userToken","token","userEmail","email","set","onFileChange","file","target","files","storageRef","storage","ref","fileRef","child","put","getDownloadURL","browseImageOpen","value","maxHeight","country","height","width","color"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { useRouter } from 'next/router';\r\nimport gsap, { Linear } from 'gsap';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { useAuth } from '../../../lib/newAuth';\r\nimport { db } from '../../../lib/firebase';\r\nimport NavbarTemplate from '../../../components/dashboard/NavbarTemplate';\r\nimport { CountryDropdown } from 'react-country-region-selector';\r\nimport ImagesModal from '../../../components/dashboard/startup/ImagesModal';\r\n\r\nconst newStartupPage = () => {\r\n  const [projectName, setProjectName] = useState('');\r\n  const [projectDescription, setProjectDescription] = useState('');\r\n  const [projectField, setProjectField] = useState('');\r\n  const [projectCountry, setProjectCountry] = useState('');\r\n  const [projectEmail, setProjectEmail] = useState('');\r\n  const [projectNumber, setProjectNumber] = useState('');\r\n  const [imageName, setImageName] = useState('blank');\r\n\r\n  const [imagesModal, setImagesModal] = useState(false);\r\n  const [fileUrl, setFileUrl] = useState(null);\r\n\r\n  const [userName, setUserName] = useState('');\r\n\r\n  const router = useRouter();\r\n  const { currentUser } = useAuth();\r\n\r\n  const [projects, setProjects] = useState();\r\n\r\n  // GSAP\r\n  const mainContainer = useRef();\r\n\r\n  useEffect(async () => {\r\n    const userProjects = await db.collection('projects').where('uid', '==', currentUser.uid).get();\r\n    const arrays = [];\r\n    userProjects.docs.map((doc) => {\r\n      if (doc.data().uid == currentUser.uid) {\r\n        return arrays.push(doc.data());\r\n      }\r\n      return;\r\n    });\r\n    setProjects(arrays);\r\n    // Fetch current user name\r\n    const data = await db.collection('users').doc(currentUser.uid).get();\r\n    setUserName(data.data().name);\r\n  }, []);\r\n\r\n  console.log('Current user --> ', currentUser);\r\n  const onProjectCreate = async (e) => {\r\n    projects.map((project) => {\r\n      if (project.projectName == projectName) {\r\n        alert('This name already exists');\r\n        return;\r\n      }\r\n    });\r\n    e.preventDefault();\r\n    // HIDE CURRENT CONTAINER\r\n    await gsap.to(mainContainer.current, { autoAlpha: 0, duration: 1, ease: Linear });\r\n    // SHOW LOADING SCREEN\r\n    // ADD NEW PROJECT\r\n    const projectId = uuidv4();\r\n    const newProject = {\r\n      projectName: projectName,\r\n      projectDescription: projectDescription,\r\n      projectField: projectField,\r\n      projectCountry: projectCountry,\r\n      projectEmail: projectEmail,\r\n      projectNumber: projectNumber,\r\n      imageName,\r\n      imageFileUrl: fileUrl,\r\n      createdAt: new Date().toISOString(),\r\n      projectId: projectId,\r\n      uid: currentUser.uid,\r\n      isIdeaPlanCreated: false,\r\n      isBusinessPlanCreated: false,\r\n      isCashflowCreated: false,\r\n      isCompetitorsAnalysisCreated: false,\r\n      isMembersManagerCreated: false,\r\n      projectUsers: [\r\n        {\r\n          userName: userName,\r\n          userUid: currentUser.uid,\r\n          userStripeRole: currentUser.stripeRole,\r\n          userToken: currentUser.token,\r\n          userEmail: currentUser.email,\r\n        },\r\n      ],\r\n    };\r\n    await db.collection('projects').doc(projectId).set(newProject);\r\n    // await db.collection('currentProject').doc(currentUser.uid).set(newProject);\r\n\r\n    router.push(`/dashboard/projects/[project]`, `/dashboard/projects/${projectName}`);\r\n  };\r\n\r\n  const onFileChange = async (e) => {\r\n    if (imageName && fileUrl) {\r\n      setImageName('blank');\r\n    }\r\n    setImagesModal(false);\r\n    const file = e.target.files[0];\r\n    const storageRef = storage.ref();\r\n    const fileRef = storageRef.child(file.name);\r\n    await fileRef.put(file);\r\n    setFileUrl(await fileRef.getDownloadURL());\r\n  };\r\n\r\n  const browseImageOpen = () => {\r\n    setImagesModal(true);\r\n    setImageName('blank');\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {imagesModal && (\r\n        <ImagesModal currentUser={currentUser} onFileChange={onFileChange} setImagesModal={setImagesModal} setImageName={setImageName} />\r\n      )}\r\n      <NavbarTemplate>\r\n        <div ref={mainContainer} className=\"min-h-screen w-full max-w-full relative px-32 py-16 flex items-center flex-col\">\r\n          <div className=\"z-10 p-10 h-auto grid grid-cols-1 grid-rows-3 w-auto max-w-nameContainer w-full bg-white rounded-3xl\">\r\n            <div className=\"row-span-1 text-center\">\r\n              <div className=\"text-2xl font-medium flex items-center justify-center\">\r\n                <img src=\"/project-create/rocket.svg\" height={36} width={36} className=\"inline-block\" />\r\n                <p className=\"ml-2 text-primarydark\">Let's create your startup!</p>\r\n              </div>\r\n              <div className=\"text-base text-gray px-4\">Oops, one more tiny step and we will get down to business.</div>\r\n            </div>\r\n            <div className=\"row-span-2\">\r\n              {/* <form onSubmit={onNewProjectCreate} className=\"z-50 px-4 pt-2 rounded-2xl mt-4\"> */}\r\n              <div className=\"z-50 px-4 pt-2 rounded-2xl mt-4\">\r\n                <div className=\"mb-4\">\r\n                  <input\r\n                    value={projectName}\r\n                    onChange={(e) => setProjectName(e.target.value)}\r\n                    id=\"startup-name\"\r\n                    className=\"border border-background focus:border-primary shadow appearance-none rounded w-full py-3 px-4 text-primarydark leading-tight focus:outline-none focus:shadow-outline text-sm bg-white rounded-2xl mr-2\"\r\n                    type=\"startup-name\"\r\n                    placeholder=\"startup name\"\r\n                  />\r\n                </div>\r\n                <div className=\"mb-4\">\r\n                  <textarea\r\n                    value={projectDescription}\r\n                    onChange={(e) => setProjectDescription(e.target.value)}\r\n                    id=\"startup-description\"\r\n                    style={{ maxHeight: 160 }}\r\n                    className=\"border border-background focus:border-primary shadow appearance-none rounded w-full py-3 px-4 text-primarydark leading-tight focus:outline-none focus:shadow-outline text-sm bg-white rounded-2xl mr-2 pb-12\"\r\n                    type=\"startup-description\"\r\n                    placeholder=\"startup description\"\r\n                  />\r\n                </div>\r\n                <div className=\"mb-4\">\r\n                  <div className=\"flex justify-items-stretch\">\r\n                    <input\r\n                      value={projectField}\r\n                      onChange={(e) => setProjectField(e.target.value)}\r\n                      autoComplete=\"none\"\r\n                      className=\"border border-background focus:border-primary shadow appearance-none rounded w-full py-3 px-4 text-primarydark leading-tight focus:outline-none focus:shadow-outline text-sm bg-white rounded-2xl mr-2\"\r\n                      type=\"text\"\r\n                      placeholder=\"Startup field\"\r\n                    />\r\n                    <CountryDropdown\r\n                      value={projectCountry}\r\n                      onChange={(country) => setProjectCountry(country)}\r\n                      id=\"test\"\r\n                      defaultOptionLabel=\"Country\"\r\n                      className={`${\r\n                        projectCountry ? 'text-primarydark' : 'text-placeholder'\r\n                      } border border-background focus:border-primary shadow appearance-none rounded w-full py-3 px-4 leading-tight focus:outline-none focus:shadow-outline text-sm bg-white rounded-2xl ml-2`}\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex justify-items-stretch mt-4\">\r\n                    <input\r\n                      value={projectEmail}\r\n                      onChange={(e) => setProjectEmail(e.target.value)}\r\n                      autoComplete=\"none\"\r\n                      className=\"border border-background focus:border-primary shadow appearance-none rounded w-full py-3 px-4 text-primarydark leading-tight focus:outline-none focus:shadow-outline text-sm bg-white rounded-2xl mr-2\"\r\n                      type=\"text\"\r\n                      placeholder=\"E-mail\"\r\n                    />\r\n                    <input\r\n                      value={projectNumber}\r\n                      onChange={(e) => setProjectNumber(e.target.value)}\r\n                      autoComplete=\"none\"\r\n                      className=\"border border-background focus:border-primary shadow appearance-none rounded w-full py-3 px-4 text-primarydark leading-tight focus:outline-none focus:shadow-outline text-sm bg-white rounded-2xl ml-2\"\r\n                      type=\"text\"\r\n                      placeholder=\"Phone number\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex justify-center items-center p-6 z-10\">\r\n                  {fileUrl || imageName !== 'blank' ? (\r\n                    imageName == 'blank' ? (\r\n                      <img\r\n                        style={{ height: '200px', width: '200px' }}\r\n                        src={fileUrl}\r\n                        onClick={() => setImagesModal(true)}\r\n                        className=\"cursor-pointer\"\r\n                      />\r\n                    ) : (\r\n                      <img\r\n                        onClick={() => setImagesModal(true)}\r\n                        src={`/modal/${imageName}.svg`}\r\n                        height={200}\r\n                        width={200}\r\n                        className=\"cursor-pointer\"\r\n                        style={{ height: '200px', width: '200px' }}\r\n                      />\r\n                    )\r\n                  ) : (\r\n                    <img\r\n                      onClick={() => browseImageOpen()}\r\n                      src=\"/edit-photo.svg\"\r\n                      height={200}\r\n                      width={200}\r\n                      className=\"cursor-pointer\"\r\n                      style={{ height: '200px', width: '200px' }}\r\n                    />\r\n                  )}\r\n                </div>\r\n                <hr style={{ width: '100%', color: '#6C63FF' }} />\r\n                <div className=\"flex items-center justify-between mt-8\">\r\n                  <p className=\"text-primarydark\">Back</p>\r\n                  <button\r\n                    className=\"z-50 border-2 border-primary hover:bg-primary hover:text-white text-primary font-medium py-1.5 px-6 rounded-2xl focus:outline-none\"\r\n                    onClick={onProjectCreate}\r\n                  >\r\n                    Create your project!\r\n                  </button>\r\n                  {/* <Link href=\"/dashboard/projects/[project]\" as={`/dashboard/projects/${projectName}`}>\r\n                    <a\r\n                      className=\"z-50 border-2 border-primary hover:bg-primary hover:text-white text-primary font-medium py-1.5 px-6 rounded-2xl focus:outline-none\"\r\n                      onClick={onProjectCreate}\r\n                    >\r\n                      Create your project!\r\n                    </a>\r\n                  </Link> */}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </NavbarTemplate>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default newStartupPage;\r\n"]},"metadata":{},"sourceType":"module"}