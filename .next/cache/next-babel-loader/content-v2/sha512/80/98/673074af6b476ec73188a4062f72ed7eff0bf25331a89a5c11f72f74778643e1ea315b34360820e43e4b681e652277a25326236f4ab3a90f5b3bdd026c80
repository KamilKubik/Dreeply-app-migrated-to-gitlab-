{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport Link from 'next/link';\nimport { db } from '../../../lib/firebase';\nimport { useAuth } from '../../../lib/newAuth';\nimport ProgressBar from './ProgressBar';\nimport { useRouter } from 'next/router';\nimport gsap, { Linear } from 'gsap';\nimport TippyMonster from '../Tippy';\nimport NavbarTemplate from '../NavbarTemplate';\nimport TippyGuide from './TippyGuide';\nimport Cookies from 'js-cookie';\nimport ExitComponent from './ExitComponent';\n\nconst StartupProductModal = () => {\n  const {\n    0: projectId,\n    1: setProjectId\n  } = useState();\n  const {\n    0: startupCostsSection,\n    1: setStartupCostsSection\n  } = useState('');\n  const {\n    0: runningCostsSection,\n    1: setRunningCostsSection\n  } = useState('');\n  const {\n    0: financingSection,\n    1: setFinancingSection\n  } = useState('');\n  const {\n    0: onLoadOpacity3,\n    1: setOnLoadOpacity3\n  } = useState(true);\n  console.log('startup costs - ', startupCostsSection);\n  console.log('running costs - ', runningCostsSection);\n  console.log('financing - ', financingSection);\n  const {\n    currentUser\n  } = useAuth();\n  const router = useRouter();\n  const contentRef = useRef(); // TIPPY\n\n  const {\n    0: tippyMonster,\n    1: setTippyMonster\n  } = useState(false);\n  const {\n    0: currentTippy,\n    1: setCurrentTippy\n  } = useState(null);\n\n  const onSubmit = async e => {\n    e.preventDefault(); // const username = e.target.username.value; // To jest ważny punkt, bo jeśli nie ma użytkownika, to url zdjęcia się nie zapisze!\n    // if (!username || !fileUrl) {\n    //   return;\n    // }\n\n    if (!startupCostsSection || !runningCostsSection || !financingSection || startupCostsSection == 'blank' || runningCostsSection == 'blank' || financingSection == 'blank') {\n      if (currentTippy) {\n        setTimeout(() => {\n          !tippyMonster && setTippyMonster(true);\n        }, 1000);\n        return;\n      } else {\n        !tippyMonster && setTippyMonster(true);\n        return;\n      }\n    }\n\n    gsap.to(contentRef.current, {\n      autoAlpha: 0,\n      duration: 1,\n      ease: Linear.easeOut\n    });\n    setTimeout(() => {\n      router.push(`/dashboard/projects/${router.query.project}/startup-idea/business-model`);\n    }, 1200);\n    await db.collection('projects').doc(projectId).collection('startupIdea').doc(router.query.project).collection('inputs').doc(documentId).set({\n      startupCostsSectionData,\n      runningCostsSectionData,\n      financingSectionData,\n      filledSection3: true\n    }, {\n      merge: true\n    });\n    return;\n  }; // Data fetch\n\n\n  const {\n    0: loadingHelper,\n    1: setLoadingHelper\n  } = useState(false);\n  const {\n    0: documentId,\n    1: setDocumentId\n  } = useState('');\n  useEffect(() => {\n    const userUid = Cookies.get('uid');\n    gsap.fromTo(contentRef.current, {\n      autoAlpha: 0\n    }, {\n      autoAlpha: 1,\n      duration: 1,\n      ease: Linear.easeIn\n    });\n\n    if (userUid && router.query.project) {\n      const data = db.collection('projects').where('uid', '==', userUid);\n      data.where('projectName', '==', router.query.project).get().then(querySnapshot => {\n        querySnapshot.forEach(async doc1 => {\n          setProjectId(doc1.data().projectId);\n          db.collection('projects').doc(doc1.data().projectId).collection('startupIdea').doc(router.query.project).collection('inputs').onSnapshot(serverUpdate => {\n            serverUpdate.docs.map(doc => {\n              console.log(doc.data());\n              const data = doc.data();\n              setDocumentId(doc.id);\n              setProjectId(data.projectId);\n              setStartupCostsSection(data.startupCostsSectionData);\n              setRunningCostsSection(data.runningCostsSectionData);\n              setFinancingSection(data.financingSectionData);\n              setLoadingHelper(false);\n            });\n          });\n        });\n      });\n    } else {\n      console.log('Loading failed');\n      setLoadingHelper(true);\n    }\n\n    return () => setOnLoadOpacity3(false);\n  }, [loadingHelper, router.query.project]);\n  const startupCostsSectionData = startupCostsSection ? startupCostsSection : 'blank';\n  const runningCostsSectionData = runningCostsSection ? runningCostsSection : 'blank';\n  const financingSectionData = financingSection ? financingSection : 'blank';\n\n  const onProjectLeave = async e => {\n    e.preventDefault();\n    gsap.to(contentRef.current, {\n      autoAlpha: 0,\n      duration: 1,\n      ease: Linear.easeOut\n    });\n    setTimeout(() => {\n      router.push(`/dashboard/projects/${router.query.project}/startup-idea/market`);\n    }, 1200);\n    await db.collection('projects').doc(projectId).collection('startupIdea').doc(router.query.project).collection('inputs').doc(documentId).set({\n      startupCostsSectionData,\n      runningCostsSectionData,\n      financingSectionData,\n      filledSection3: startupCostsSection && startupCostsSection != 'blank' && runningCostsSection && runningCostsSection != 'blank' && financingSection && financingSection != 'blank' ? true : (!startupCostsSection || !runningCostsSection || !financingSection || startupCostsSection == 'blank' || runningCostsSection == 'blank' || financingSection == 'blank') && false\n    }, {\n      merge: true\n    });\n    await db.collection('projects').doc(projectId).set({\n      startupCostsSectionData,\n      runningCostsSectionData,\n      financingSectionData,\n      filledSection3: startupCostsSection && startupCostsSection != 'blank' && runningCostsSection && runningCostsSection != 'blank' && financingSection && financingSection != 'blank' ? true : (!startupCostsSection || !runningCostsSection || !financingSection || startupCostsSection == 'blank' || runningCostsSection == 'blank' || financingSection == 'blank') && false\n    }, {\n      merge: true\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(ExitComponent, {}), /*#__PURE__*/_jsx(TippyMonster, {\n      setCurrentTippy: setCurrentTippy,\n      emptyInput: true,\n      setTippyMonster: setTippyMonster,\n      tippyMonster: tippyMonster,\n      finances: true,\n      contentClass: \"h-36 w-80 shadow-lg rounded-2xl bg-primary flex justify-center items-center\",\n      contentText: \"They say that entrepreneurs plan for three generations. Isn't Amsterdam the right place to plan your finances \",\n      contentText1: \" In this section, try to describe a spending model based on the growth of your startup \"\n    }), /*#__PURE__*/_jsx(\"div\", {\n      ref: contentRef,\n      className: \"h-full w-full relative flex flex-col items-center justify-center\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"w-full max-w-mdStarter lg:max-w-lgContainer 2xl:max-w-xlContainer relative pl-6 pr-6 mt-16 pb-24\",\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          className: \"text-primarydark text-2xl normal:text-3xl mt-2 pl-2 dark:text-background text-center\",\n          children: \"It is a high time to get into the numbers\"\n        }), /*#__PURE__*/_jsxs(\"p\", {\n          className: \"text-gray text-base normal:text-lg pl-2 dark:text-background text-center\",\n          children: [\"Startup idea creator will help you create the initial mockup of your future startup\", /*#__PURE__*/_jsx(\"img\", {\n            src: \"/gifs/rocket.gif\",\n            height: 35,\n            width: 35,\n            className: \"inline-block relative bottom-0.5\"\n          })]\n        }), /*#__PURE__*/_jsx(ProgressBar, {\n          onLoadOpacity3: onLoadOpacity3\n        }), /*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsx(\"h1\", {\n            className: \"text-primarydark text-lg mt-10 -mb-6 dark:text-background\",\n            children: \"Finances\"\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"w-full flex flex-col justify-center items-center border-r-6 rounded-2xl bg-white mt-8 dark:bg-background\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"relative flex flex-col h-full w-full flex px-8 pt-8 pb-4\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              children: [/*#__PURE__*/_jsxs(\"label\", {\n                className: \"block text-sm font-medium flex justify-between items-end\",\n                htmlFor: \"startupCosts\",\n                children: [\"Costs of launching your startup idea.\", /*#__PURE__*/_jsx(TippyGuide, {\n                  contentClass: \"w-80 shadow-lg rounded-2xl bg-primary\",\n                  contentText: ' Questions that can guide you:\\n- How much money will it take to launch your startup?\\n- How would you price the various components that are needed for launching your startup?'\n                })]\n              }), /*#__PURE__*/_jsx(\"textarea\", {\n                autoComplete: \"none\",\n                id: \"startupCosts\",\n                onChange: e => setStartupCostsSection(e.target.value),\n                value: startupCostsSection == 'blank' ? '' : startupCostsSection,\n                className: \"pb-24 shadow appearance-none rounded w-full py-3 px-4 text-primarydark leading-tight focus:outline-none focus:shadow-outline text-sm bg-white rounded-2xl mt-2\",\n                type: \"textarea\",\n                placeholder: '“What do you need to start a business? Three simple things: know your product better than anyone, know your customer, and have a burning desire to succeed.”\\n\\n~ Dave Thomas'\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"mt-12\",\n              children: [/*#__PURE__*/_jsxs(\"label\", {\n                className: \"block text-sm font-medium flex justify-between items-end\",\n                htmlFor: \"runningCosts\",\n                children: [\"Costs of running your startup.\", /*#__PURE__*/_jsx(TippyGuide, {\n                  contentClass: \"w-80 shadow-lg rounded-2xl bg-primary\",\n                  contentText: \" Questions that can guide you:\\n- What costs do you anticipate to keep your startup alive?\\n- How much money will you spend on marketing campaigns / employee payouts / office rent / other overheads?\\n- What will be the development costs of the different stages of your startup's growth?\"\n                })]\n              }), /*#__PURE__*/_jsx(\"textarea\", {\n                autoComplete: \"none\",\n                id: \"runningCosts\",\n                onChange: e => setRunningCostsSection(e.target.value),\n                value: runningCostsSection == 'blank' ? '' : runningCostsSection,\n                className: \"pb-24 px-3 shadow appearance-none rounded w-full py-3 px-4 text-primarydark leading-tight focus:outline-none focus:shadow-outline text-sm bg-white rounded-2xl mt-2\",\n                type: \"textarea\",\n                placeholder: '“The most dangerous poison is the feeling of achievement. The antidote is to every evening think what can be done better tomorrow.”\\n\\n~ Ingvar Kamprad'\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"mt-12 pb-8\",\n              children: [/*#__PURE__*/_jsxs(\"label\", {\n                className: \"block text-sm font-medium flex justify-between items-end\",\n                htmlFor: \"financing\",\n                children: [\"The way your startup idea will be funded.\", /*#__PURE__*/_jsx(TippyGuide, {\n                  contentClass: \"w-80 shadow-lg rounded-2xl bg-primary\",\n                  contentText: ' Questions that can guide you:\\n- How does your startup will be fund?\\n- Who will bear the cost of launching your startup?\\n- What are all of your startup financing sources?'\n                })]\n              }), /*#__PURE__*/_jsx(\"textarea\", {\n                autoComplete: \"none\",\n                id: \"financing\",\n                onChange: e => setFinancingSection(e.target.value),\n                value: financingSection == 'blank' ? '' : financingSection,\n                className: \"pb-24 px-3 shadow appearance-none rounded w-full py-3 px-4 text-primarydark leading-tight focus:outline-none focus:shadow-outline text-sm bg-white rounded-2xl mt-2\",\n                type: \"textarea\",\n                placeholder: '“Don’t worry about funding if you don’t need it. Today it’s cheaper to start a business than ever.”\\n\\n~ Noah Everett'\n              })]\n            })]\n          }), /*#__PURE__*/_jsx(\"hr\", {\n            style: {\n              width: '90%',\n              color: '#a0aec0'\n            }\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"w-full grid grid-cols-3fr grid-flow-column px-8 py-4\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"flex items-center mt-1 text-primarydark text-sm\",\n              children: /*#__PURE__*/_jsx(\"button\", {\n                onClick: onProjectLeave,\n                children: \"Back\"\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"flex items-center mt-1 justify-self-center\",\n              children: /*#__PURE__*/_jsx(\"p\", {\n                className: \"text-sm text-gray\",\n                children: \"Step 4 of 5\"\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"flex justify-end items-center\",\n              children: /*#__PURE__*/_jsx(\"button\", {\n                disabled: tippyMonster,\n                onClick: onSubmit,\n                className: \"hover:bg-primary hover:text-white dark:hover:bg-primarydark dark:hover:text-background focus:outline-none border border-primary text-primary text-sm font-light py-2 px-8 rounded-2xl dark:text-primarydark dark:border-primarydark\",\n                children: \"Next\"\n              })\n            })]\n          })]\n        })]\n      })\n    })]\n  });\n};\n\nexport default StartupProductModal;","map":null,"metadata":{},"sourceType":"module"}