{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\off-saas\\\\components\\\\dashboard\\\\startup\\\\project\\\\business-app\\\\cash-flow\\\\CostsElement.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport Router from 'next/router';\nimport Image from 'next/image';\nimport debounce from '../../../../../../utils/helpers';\nimport { db } from '../../../../../../lib/firebase';\nimport gsap, { Linear } from 'gsap';\nimport DatePicker from 'react-datepicker';\nimport { addYears, format } from 'date-fns';\nimport moment from 'moment';\nimport { CirclePicker } from 'react-color';\nimport 'react-datepicker/dist/react-datepicker.css';\n\nconst CostsElement = ({\n  provided,\n  setCostsElements,\n  mainDocument,\n  projectId,\n  documentId,\n  costsElements,\n  element,\n  index\n}) => {\n  const {\n    0: costsTitle,\n    1: setCostsTitle\n  } = useState('');\n  const {\n    0: costsType,\n    1: setCostsType\n  } = useState('');\n  const {\n    0: costsValue,\n    1: setCostsValue\n  } = useState('');\n  useEffect(() => {\n    setCostsTitle(element.title);\n    setCostsType(element.type);\n    setCostsValue(element.value);\n    setBoxColor(element.color);\n    setStartDate(element.start.seconds ? element.start.seconds * 1000 : element.start);\n    setEndDate(element.end.seconds ? element.end.seconds * 1000 : element.end);\n  }, []);\n\n  const revenueElementsValueUpdate = (value, index, helper) => {\n    helper == 'title' && setCostsTitle(value);\n    helper == 'value' && setCostsValue(value);\n    console.log(costsElements);\n    const newElementsArray = [...costsElements];\n    newElementsArray[index] = {\n      title: helper == 'title' ? value : element.title,\n      type: helper == 'type' ? value : element.type,\n      start: helper == 'start' ? value : element.start,\n      end: helper == 'end' ? value : element.end,\n      value: helper == 'value' ? value : element.value,\n      periods: helper == 'periods' ? value : element.periods,\n      color: helper == 'color' ? value : element.color,\n      index: helper == 'index' ? value : element.index\n    };\n    dataUpdate(newElementsArray);\n  };\n\n  const dataUpdate = useCallback(debounce(async newElementsArray => {\n    // console.log(costsElements);\n    // const newElementsArray = [...costsElements];\n    // setCostsTitle(newElementsArray);\n    console.log(newElementsArray); // Database update\n\n    await db.collection('projects').doc(projectId).collection('cashFlow').doc(Router.query.project).collection('inputs').doc(documentId) // .set({\n    //     budgetElements: mainDocument.budgetElements,\n    //     costsElements: mainDocument.costsElements,\n    //     pathName: mainDocument.pathName,\n    //     projectId: mainDocument.projectId,\n    //     uid: mainDocument.uid,\n    //     costsElements: newElementsArray\n    // })\n    .update({\n      costsElements: newElementsArray\n    });\n  }, 300), []);\n  useEffect(() => {\n    console.log(costsElements);\n  }, [costsElements]);\n  const {\n    0: show,\n    1: setShow\n  } = useState(false);\n  const valueRef = useRef();\n\n  const onTypeShow = () => {\n    if (!show) {\n      setShow(true);\n      gsap.to(valueRef.current, {\n        height: '40px',\n        duration: 0.3,\n        ease: Linear\n      });\n    } else if (show) {\n      setShow(false);\n      gsap.to(valueRef.current, {\n        height: '20px',\n        duration: 0.3,\n        ease: Linear\n      });\n    }\n  };\n\n  const onValueOptionSelect = async type => {\n    setCostsType(type);\n    const newElementsArray = [...costsElements];\n    newElementsArray[index] = {\n      title: element.title,\n      type: type,\n      start: element.start,\n      end: element.end,\n      value: element.value,\n      periods: element.periods,\n      color: element.color,\n      index: element.index\n    }; // Database update\n\n    await db.collection('projects').doc(projectId).collection('cashFlow').doc(Router.query.project).collection('inputs').doc(documentId).update({\n      costsElements: newElementsArray\n    });\n  };\n\n  const {\n    0: startDate,\n    1: setStartDate\n  } = useState();\n  const {\n    0: endDate,\n    1: setEndDate\n  } = useState();\n\n  const onStartDateUpdate = async date => {\n    setStartDate(date); // Get months\n\n    const newStartDate = format(date, 'yyyy-MM-dd');\n    const newEndDate = format(endDate, 'yyyy-MM-dd');\n    const startDater = moment(newStartDate);\n    const endDater = moment(newEndDate);\n    const dates = [];\n    startDater.subtract(1, 'month'); //Substract one month to exclude endDater itself\n\n    const month = moment(startDater); //clone the startDate\n\n    while (month < endDater) {\n      month.add(1, 'month');\n      dates.push(month.format('MMM yyyy'));\n    } // New elements array\n\n\n    const newElementsArray = [...costsElements];\n    newElementsArray[index] = {\n      title: element.title,\n      type: element.type,\n      start: date,\n      periods: dates,\n      end: element.end,\n      value: element.value,\n      color: element.color,\n      index: element.index // period: element.period,\n\n    }; // Firebase update\n\n    await db.collection('projects').doc(projectId).collection('cashFlow').doc(Router.query.project).collection('inputs').doc(documentId).update({\n      costsElements: newElementsArray\n    });\n  };\n\n  const onEndDateUpdate = async date => {\n    setEndDate(date); // Get months\n\n    const newStartDate = format(startDate, 'yyyy-MM-dd');\n    const newEndDate = format(date, 'yyyy-MM-dd');\n    const startDater = moment(newStartDate);\n    const endDater = moment(newEndDate);\n    const dates = [];\n    startDater.subtract(1, 'month'); //Substract one month to exclude endDater itself\n    // endDater.subtract(1, \"month\"); //Substract one month to exclude endDater itself\n\n    const month = moment(startDater); //clone the startDate\n\n    while (month < endDater) {\n      month.add(1, 'month');\n      dates.push(month.format('MMM yyyy'));\n    } // New elements array\n\n\n    const newElementsArray = [...costsElements];\n    newElementsArray[index] = {\n      title: element.title,\n      type: element.type,\n      start: element.start,\n      periods: dates,\n      end: date,\n      value: element.value,\n      color: element.color,\n      index: element.index // period: element.period,\n\n    }; // Firebase update\n\n    await db.collection('projects').doc(projectId).collection('cashFlow').doc(Router.query.project).collection('inputs').doc(documentId).update({\n      costsElements: newElementsArray\n    });\n  }; // const circleContainer = document.querySelector('.circle-picker');\n  // circleContainer && element.index && circleContainer.setAttribute('id', `colorPicker${element.index}`);\n\n\n  const circleContainerId = document.getElementById(`${element.index}colorPickerContainer`);\n  const {\n    0: circlePickerHelper,\n    1: setCirclePickerHelper\n  } = useState(false);\n  const circlePickerRef = useRef();\n\n  const onCirclePickerClick = () => {\n    if (!circlePickerHelper) {\n      setCirclePickerHelper(true);\n      gsap.to(circleContainerId, {\n        transform: 'scale(1)',\n        transformOrigin: 'bottom right',\n        duration: 1,\n        ease: Linear\n      });\n    } else if (circlePickerHelper) {\n      setCirclePickerHelper(false);\n      gsap.to(circleContainerId, {\n        transform: 'scale(0)',\n        transformOrigin: 'bottom right',\n        duration: 1,\n        ease: Linear\n      });\n    }\n  };\n\n  const {\n    0: boxColor,\n    1: setBoxColor\n  } = useState('');\n\n  const onColorPick = async color => {\n    setBoxColor(color);\n    console.log(color); // New elements array\n\n    const newElementsArray = [...costsElements];\n    newElementsArray[index] = {\n      title: element.title,\n      type: element.type,\n      start: element.start,\n      periods: element.periods,\n      end: element.end,\n      value: element.value,\n      index: element.index,\n      color: color // period: element.period,\n\n    }; // Firebase update\n\n    await db.collection('projects').doc(projectId).collection('cashFlow').doc(Router.query.project).collection('inputs').doc(documentId).update({\n      costsElements: newElementsArray\n    });\n  };\n\n  const onElementDelete = async index => {\n    const newElements = costsElements.filter(element => index !== element.index); // Firebase update\n\n    await db.collection('projects').doc(projectId).collection('cashFlow').doc(Router.query.project).collection('inputs').doc(documentId).update({\n      costsElements: newElements\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", _objectSpread(_objectSpread({\n      ref: provided.innerRef\n    }, provided.draggableProps), {}, {\n      className: \"w-full grid grid-cols-6fr py-3 items-start text-sm\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"name\",\n        className: \"w-4/5 bg-background focus:outline-none\",\n        value: costsTitle,\n        onChange: e => revenueElementsValueUpdate(e.target.value, index, 'title')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: valueRef,\n        style: {\n          height: '20px'\n        },\n        className: \"overflow-hidden flex flex-col flex-wrap\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full flex flex-row flex-nowrap\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"cursor-default\",\n            children: costsType\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            onClick: onTypeShow,\n            className: \"ml-2 cursor-pointer\",\n            src: \"/cash-flow/down-arrow.svg\",\n            height: 14,\n            width: 14\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: element.type === 'Recurring' ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"cursor-pointer\",\n            onClick: () => onValueOptionSelect('One time'),\n            children: \"One time\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"cursor-pointer\",\n            onClick: () => onValueOptionSelect('Recurring'),\n            children: \"Recurring\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"amount\",\n          className: \"w-4/5 bg-background focus:outline-none\",\n          value: costsValue,\n          onChange: e => revenueElementsValueUpdate(e.target.value, index, 'value')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(DatePicker, {\n          selected: startDate,\n          onChange: date => onStartDateUpdate(date),\n          dateFormat: \"MMMM yyyy\",\n          showMonthYearPicker: true,\n          maxDate: addYears(new Date(), 3),\n          minDate: new Date()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: element.type == 'Recurring' ? /*#__PURE__*/_jsxDEV(DatePicker, {\n          selected: endDate,\n          onChange: date => onEndDateUpdate(date),\n          dateFormat: \"MMMM yyyy\",\n          showMonthYearPicker: true,\n          maxDate: addYears(new Date(), 3),\n          minDate: new Date()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"hr\", {\n          className: \"text-primarydark mr-8 mt-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative justify-items-center items-center flex flex-nowrap\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: onCirclePickerClick,\n            style: {\n              backgroundColor: `${boxColor}`,\n              height: '16px',\n              width: '16px'\n            },\n            className: \"rounded-3xl\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                transform: 'scale(0)'\n              },\n              id: `${element.index}colorPickerContainer`,\n              className: \"colorPickerContainer grid grid-cols-6fr grid-rows-3fr bg-white w-min shadow rounded-2xl p-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                onClick: () => onColorPick('#f44336'),\n                className: \"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\",\n                style: {\n                  height: '14px',\n                  width: '14px',\n                  backgroundColor: '#f44336',\n                  margin: '6px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                onClick: () => onColorPick('#e91e63'),\n                className: \"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\",\n                style: {\n                  height: '14px',\n                  width: '14px',\n                  backgroundColor: '#e91e63',\n                  margin: '6px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                onClick: () => onColorPick('#9c27b0'),\n                className: \"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\",\n                style: {\n                  height: '14px',\n                  width: '14px',\n                  backgroundColor: '#9c27b0',\n                  margin: '6px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 362,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                onClick: () => onColorPick('#673ab7'),\n                className: \"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\",\n                style: {\n                  height: '14px',\n                  width: '14px',\n                  backgroundColor: '#673ab7',\n                  margin: '6px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                onClick: () => onColorPick('#3f51b5'),\n                className: \"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\",\n                style: {\n                  height: '14px',\n                  width: '14px',\n                  backgroundColor: '#3f51b5',\n                  margin: '6px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 382,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                onClick: () => onColorPick('#2196f3'),\n                className: \"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\",\n                style: {\n                  height: '14px',\n                  width: '14px',\n                  backgroundColor: '#2196f3',\n                  margin: '6px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                onClick: () => onColorPick('#03a9f4'),\n                className: \"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\",\n                style: {\n                  height: '14px',\n                  width: '14px',\n                  backgroundColor: '#03a9f4',\n                  margin: '6px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 402,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                onClick: () => onColorPick('#00bcd4'),\n                className: \"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\",\n                style: {\n                  height: '14px',\n                  width: '14px',\n                  backgroundColor: '#00bcd4',\n                  margin: '6px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 412,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                onClick: () => onColorPick('#009688'),\n                className: \"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\",\n                style: {\n                  height: '14px',\n                  width: '14px',\n                  backgroundColor: '#009688',\n                  margin: '6px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 422,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                onClick: () => onColorPick('#4caf50'),\n                className: \"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\",\n                style: {\n                  height: '14px',\n                  width: '14px',\n                  backgroundColor: '#4caf50',\n                  margin: '6px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                onClick: () => onColorPick('#8bc34a'),\n                className: \"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\",\n                style: {\n                  height: '14px',\n                  width: '14px',\n                  backgroundColor: '#8bc34a',\n                  margin: '6px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 442,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                onClick: () => onColorPick('#cddc39'),\n                className: \"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\",\n                style: {\n                  height: '14px',\n                  width: '14px',\n                  backgroundColor: '#cddc39',\n                  margin: '6px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 452,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                onClick: () => onColorPick('#ffeb3b'),\n                className: \"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\",\n                style: {\n                  height: '14px',\n                  width: '14px',\n                  backgroundColor: '#ffeb3b',\n                  margin: '6px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 462,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                onClick: () => onColorPick('#ffc107'),\n                className: \"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\",\n                style: {\n                  height: '14px',\n                  width: '14px',\n                  backgroundColor: '#ffc107',\n                  margin: '6px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 472,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                onClick: () => onColorPick('#ff9800'),\n                className: \"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\",\n                style: {\n                  height: '14px',\n                  width: '14px',\n                  backgroundColor: '#ff9800',\n                  margin: '6px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                onClick: () => onColorPick('#ff5722'),\n                className: \"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\",\n                style: {\n                  height: '14px',\n                  width: '14px',\n                  backgroundColor: '#ff5722',\n                  margin: '6px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 492,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                onClick: () => onColorPick('#795548'),\n                className: \"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\",\n                style: {\n                  height: '14px',\n                  width: '14px',\n                  backgroundColor: '#795548',\n                  margin: '6px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 502,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                onClick: () => onColorPick('#607d8b'),\n                className: \"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\",\n                style: {\n                  height: '14px',\n                  width: '14px',\n                  backgroundColor: '#607d8b',\n                  margin: '6px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 512,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", _objectSpread(_objectSpread({}, provided.dragHandleProps), {}, {\n            className: \"ml-4\",\n            src: \"/cash-flow/drag.svg\",\n            height: 18,\n            width: 18\n          }), void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 524,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            onClick: () => onElementDelete(element.index),\n            className: \"ml-4 cursor-pointer\",\n            src: \"/cash-flow/remove.svg\",\n            height: 18,\n            width: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 525,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 9\n      }, this)]\n    }), void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 267,\n    columnNumber: 5\n  }, this);\n};\n\nexport default CostsElement;","map":{"version":3,"sources":["C:/off-saas/components/dashboard/startup/project/business-app/cash-flow/CostsElement.js"],"names":["React","useState","useEffect","useCallback","useRef","Router","Image","debounce","db","gsap","Linear","DatePicker","addYears","format","moment","CirclePicker","CostsElement","provided","setCostsElements","mainDocument","projectId","documentId","costsElements","element","index","costsTitle","setCostsTitle","costsType","setCostsType","costsValue","setCostsValue","title","type","value","setBoxColor","color","setStartDate","start","seconds","setEndDate","end","revenueElementsValueUpdate","helper","console","log","newElementsArray","periods","dataUpdate","collection","doc","query","project","update","show","setShow","valueRef","onTypeShow","to","current","height","duration","ease","onValueOptionSelect","startDate","endDate","onStartDateUpdate","date","newStartDate","newEndDate","startDater","endDater","dates","subtract","month","add","push","onEndDateUpdate","circleContainerId","document","getElementById","circlePickerHelper","setCirclePickerHelper","circlePickerRef","onCirclePickerClick","transform","transformOrigin","boxColor","onColorPick","onElementDelete","newElements","filter","innerRef","draggableProps","e","target","Date","backgroundColor","width","margin","dragHandleProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\r\nimport Router from 'next/router';\r\nimport Image from 'next/image';\r\nimport debounce from '../../../../../../utils/helpers';\r\nimport { db } from '../../../../../../lib/firebase';\r\nimport gsap, { Linear } from 'gsap';\r\nimport DatePicker from 'react-datepicker';\r\nimport { addYears, format } from 'date-fns';\r\nimport moment from 'moment';\r\nimport { CirclePicker } from 'react-color';\r\n\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\n\r\nconst CostsElement = ({ provided, setCostsElements, mainDocument, projectId, documentId, costsElements, element, index }) => {\r\n  const [costsTitle, setCostsTitle] = useState('');\r\n  const [costsType, setCostsType] = useState('');\r\n  const [costsValue, setCostsValue] = useState('');\r\n\r\n  useEffect(() => {\r\n    setCostsTitle(element.title);\r\n    setCostsType(element.type);\r\n    setCostsValue(element.value);\r\n    setBoxColor(element.color);\r\n    setStartDate(element.start.seconds ? element.start.seconds * 1000 : element.start);\r\n    setEndDate(element.end.seconds ? element.end.seconds * 1000 : element.end);\r\n  }, []);\r\n\r\n  const revenueElementsValueUpdate = (value, index, helper) => {\r\n    helper == 'title' && setCostsTitle(value);\r\n    helper == 'value' && setCostsValue(value);\r\n    console.log(costsElements);\r\n    const newElementsArray = [...costsElements];\r\n    newElementsArray[index] = {\r\n      title: helper == 'title' ? value : element.title,\r\n      type: helper == 'type' ? value : element.type,\r\n      start: helper == 'start' ? value : element.start,\r\n      end: helper == 'end' ? value : element.end,\r\n      value: helper == 'value' ? value : element.value,\r\n      periods: helper == 'periods' ? value : element.periods,\r\n      color: helper == 'color' ? value : element.color,\r\n      index: helper == 'index' ? value : element.index,\r\n    };\r\n    dataUpdate(newElementsArray);\r\n  };\r\n\r\n  const dataUpdate = useCallback(\r\n    debounce(async (newElementsArray) => {\r\n      // console.log(costsElements);\r\n      // const newElementsArray = [...costsElements];\r\n      // setCostsTitle(newElementsArray);\r\n      console.log(newElementsArray);\r\n      // Database update\r\n      await db\r\n        .collection('projects')\r\n        .doc(projectId)\r\n        .collection('cashFlow')\r\n        .doc(Router.query.project)\r\n        .collection('inputs')\r\n        .doc(documentId)\r\n        // .set({\r\n        //     budgetElements: mainDocument.budgetElements,\r\n        //     costsElements: mainDocument.costsElements,\r\n        //     pathName: mainDocument.pathName,\r\n        //     projectId: mainDocument.projectId,\r\n        //     uid: mainDocument.uid,\r\n        //     costsElements: newElementsArray\r\n        // })\r\n        .update({ costsElements: newElementsArray });\r\n    }, 300),\r\n    []\r\n  );\r\n\r\n  useEffect(() => {\r\n    console.log(costsElements);\r\n  }, [costsElements]);\r\n\r\n  const [show, setShow] = useState(false);\r\n  const valueRef = useRef();\r\n  const onTypeShow = () => {\r\n    if (!show) {\r\n      setShow(true);\r\n      gsap.to(valueRef.current, { height: '40px', duration: 0.3, ease: Linear });\r\n    } else if (show) {\r\n      setShow(false);\r\n      gsap.to(valueRef.current, { height: '20px', duration: 0.3, ease: Linear });\r\n    }\r\n  };\r\n\r\n  const onValueOptionSelect = async (type) => {\r\n    setCostsType(type);\r\n    const newElementsArray = [...costsElements];\r\n    newElementsArray[index] = {\r\n      title: element.title,\r\n      type: type,\r\n      start: element.start,\r\n      end: element.end,\r\n      value: element.value,\r\n      periods: element.periods,\r\n      color: element.color,\r\n      index: element.index,\r\n    };\r\n    // Database update\r\n    await db\r\n      .collection('projects')\r\n      .doc(projectId)\r\n      .collection('cashFlow')\r\n      .doc(Router.query.project)\r\n      .collection('inputs')\r\n      .doc(documentId)\r\n      .update({ costsElements: newElementsArray });\r\n  };\r\n\r\n  const [startDate, setStartDate] = useState();\r\n  const [endDate, setEndDate] = useState();\r\n\r\n  const onStartDateUpdate = async (date) => {\r\n    setStartDate(date);\r\n    // Get months\r\n    const newStartDate = format(date, 'yyyy-MM-dd');\r\n    const newEndDate = format(endDate, 'yyyy-MM-dd');\r\n\r\n    const startDater = moment(newStartDate);\r\n    const endDater = moment(newEndDate);\r\n\r\n    const dates = [];\r\n    startDater.subtract(1, 'month'); //Substract one month to exclude endDater itself\r\n\r\n    const month = moment(startDater); //clone the startDate\r\n    while (month < endDater) {\r\n      month.add(1, 'month');\r\n      dates.push(month.format('MMM yyyy'));\r\n    }\r\n    // New elements array\r\n    const newElementsArray = [...costsElements];\r\n    newElementsArray[index] = {\r\n      title: element.title,\r\n      type: element.type,\r\n      start: date,\r\n      periods: dates,\r\n      end: element.end,\r\n      value: element.value,\r\n      color: element.color,\r\n      index: element.index,\r\n      // period: element.period,\r\n    };\r\n    // Firebase update\r\n    await db\r\n      .collection('projects')\r\n      .doc(projectId)\r\n      .collection('cashFlow')\r\n      .doc(Router.query.project)\r\n      .collection('inputs')\r\n      .doc(documentId)\r\n      .update({ costsElements: newElementsArray });\r\n  };\r\n\r\n  const onEndDateUpdate = async (date) => {\r\n    setEndDate(date);\r\n    // Get months\r\n    const newStartDate = format(startDate, 'yyyy-MM-dd');\r\n    const newEndDate = format(date, 'yyyy-MM-dd');\r\n\r\n    const startDater = moment(newStartDate);\r\n    const endDater = moment(newEndDate);\r\n\r\n    const dates = [];\r\n    startDater.subtract(1, 'month'); //Substract one month to exclude endDater itself\r\n    // endDater.subtract(1, \"month\"); //Substract one month to exclude endDater itself\r\n\r\n    const month = moment(startDater); //clone the startDate\r\n    while (month < endDater) {\r\n      month.add(1, 'month');\r\n      dates.push(month.format('MMM yyyy'));\r\n    }\r\n    // New elements array\r\n    const newElementsArray = [...costsElements];\r\n    newElementsArray[index] = {\r\n      title: element.title,\r\n      type: element.type,\r\n      start: element.start,\r\n      periods: dates,\r\n      end: date,\r\n      value: element.value,\r\n      color: element.color,\r\n      index: element.index,\r\n      // period: element.period,\r\n    };\r\n    // Firebase update\r\n    await db\r\n      .collection('projects')\r\n      .doc(projectId)\r\n      .collection('cashFlow')\r\n      .doc(Router.query.project)\r\n      .collection('inputs')\r\n      .doc(documentId)\r\n      .update({ costsElements: newElementsArray });\r\n  };\r\n\r\n  // const circleContainer = document.querySelector('.circle-picker');\r\n  // circleContainer && element.index && circleContainer.setAttribute('id', `colorPicker${element.index}`);\r\n  const circleContainerId = document.getElementById(`${element.index}colorPickerContainer`);\r\n  const [circlePickerHelper, setCirclePickerHelper] = useState(false);\r\n  const circlePickerRef = useRef();\r\n  const onCirclePickerClick = () => {\r\n    if (!circlePickerHelper) {\r\n      setCirclePickerHelper(true);\r\n      gsap.to(circleContainerId, {\r\n        transform: 'scale(1)',\r\n        transformOrigin: 'bottom right',\r\n        duration: 1,\r\n        ease: Linear,\r\n      });\r\n    } else if (circlePickerHelper) {\r\n      setCirclePickerHelper(false);\r\n      gsap.to(circleContainerId, {\r\n        transform: 'scale(0)',\r\n        transformOrigin: 'bottom right',\r\n        duration: 1,\r\n        ease: Linear,\r\n      });\r\n    }\r\n  };\r\n\r\n  const [boxColor, setBoxColor] = useState('');\r\n\r\n  const onColorPick = async (color) => {\r\n    setBoxColor(color);\r\n    console.log(color);\r\n    // New elements array\r\n    const newElementsArray = [...costsElements];\r\n    newElementsArray[index] = {\r\n      title: element.title,\r\n      type: element.type,\r\n      start: element.start,\r\n      periods: element.periods,\r\n      end: element.end,\r\n      value: element.value,\r\n      index: element.index,\r\n      color: color,\r\n      // period: element.period,\r\n    };\r\n    // Firebase update\r\n    await db\r\n      .collection('projects')\r\n      .doc(projectId)\r\n      .collection('cashFlow')\r\n      .doc(Router.query.project)\r\n      .collection('inputs')\r\n      .doc(documentId)\r\n      .update({ costsElements: newElementsArray });\r\n  };\r\n\r\n  const onElementDelete = async (index) => {\r\n    const newElements = costsElements.filter((element) => index !== element.index);\r\n    // Firebase update\r\n    await db\r\n      .collection('projects')\r\n      .doc(projectId)\r\n      .collection('cashFlow')\r\n      .doc(Router.query.project)\r\n      .collection('inputs')\r\n      .doc(documentId)\r\n      .update({ costsElements: newElements });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div ref={provided.innerRef} {...provided.draggableProps} className=\"w-full grid grid-cols-6fr py-3 items-start text-sm\">\r\n        <input\r\n          placeholder=\"name\"\r\n          className=\"w-4/5 bg-background focus:outline-none\"\r\n          value={costsTitle}\r\n          onChange={(e) => revenueElementsValueUpdate(e.target.value, index, 'title')}\r\n        />\r\n        <div ref={valueRef} style={{ height: '20px' }} className=\"overflow-hidden flex flex-col flex-wrap\">\r\n          <div className=\"w-full flex flex-row flex-nowrap\">\r\n            <p className=\"cursor-default\">{costsType}</p>\r\n            <img onClick={onTypeShow} className=\"ml-2 cursor-pointer\" src=\"/cash-flow/down-arrow.svg\" height={14} width={14} />\r\n          </div>\r\n          {\r\n            <div>\r\n              {element.type === 'Recurring' ? (\r\n                <p className=\"cursor-pointer\" onClick={() => onValueOptionSelect('One time')}>\r\n                  One time\r\n                </p>\r\n              ) : (\r\n                <p className=\"cursor-pointer\" onClick={() => onValueOptionSelect('Recurring')}>\r\n                  Recurring\r\n                </p>\r\n              )}\r\n            </div>\r\n          }\r\n        </div>\r\n        <div>\r\n          <input\r\n            placeholder=\"amount\"\r\n            className=\"w-4/5 bg-background focus:outline-none\"\r\n            value={costsValue}\r\n            onChange={(e) => revenueElementsValueUpdate(e.target.value, index, 'value')}\r\n          />\r\n        </div>\r\n        <div>\r\n          <DatePicker\r\n            selected={startDate}\r\n            onChange={(date) => onStartDateUpdate(date)}\r\n            dateFormat=\"MMMM yyyy\"\r\n            showMonthYearPicker\r\n            maxDate={addYears(new Date(), 3)}\r\n            minDate={new Date()}\r\n          />\r\n        </div>\r\n        <div>\r\n          {element.type == 'Recurring' ? (\r\n            <DatePicker\r\n              selected={endDate}\r\n              onChange={(date) => onEndDateUpdate(date)}\r\n              dateFormat=\"MMMM yyyy\"\r\n              showMonthYearPicker\r\n              maxDate={addYears(new Date(), 3)}\r\n              minDate={new Date()}\r\n            />\r\n          ) : (\r\n            <hr className=\"text-primarydark mr-8 mt-2\" />\r\n          )}\r\n        </div>\r\n        <div>\r\n          <div className=\"relative justify-items-center items-center flex flex-nowrap\">\r\n            <div\r\n              onClick={onCirclePickerClick}\r\n              style={{\r\n                backgroundColor: `${boxColor}`,\r\n                height: '16px',\r\n                width: '16px',\r\n              }}\r\n              className=\"rounded-3xl\"\r\n            >\r\n              <div\r\n                style={{ transform: 'scale(0)' }}\r\n                id={`${element.index}colorPickerContainer`}\r\n                className=\"colorPickerContainer grid grid-cols-6fr grid-rows-3fr bg-white w-min shadow rounded-2xl p-2\"\r\n              >\r\n                <span\r\n                  onClick={() => onColorPick('#f44336')}\r\n                  className=\"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\"\r\n                  style={{\r\n                    height: '14px',\r\n                    width: '14px',\r\n                    backgroundColor: '#f44336',\r\n                    margin: '6px',\r\n                  }}\r\n                ></span>\r\n                <span\r\n                  onClick={() => onColorPick('#e91e63')}\r\n                  className=\"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\"\r\n                  style={{\r\n                    height: '14px',\r\n                    width: '14px',\r\n                    backgroundColor: '#e91e63',\r\n                    margin: '6px',\r\n                  }}\r\n                ></span>\r\n                <span\r\n                  onClick={() => onColorPick('#9c27b0')}\r\n                  className=\"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\"\r\n                  style={{\r\n                    height: '14px',\r\n                    width: '14px',\r\n                    backgroundColor: '#9c27b0',\r\n                    margin: '6px',\r\n                  }}\r\n                ></span>\r\n                <span\r\n                  onClick={() => onColorPick('#673ab7')}\r\n                  className=\"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\"\r\n                  style={{\r\n                    height: '14px',\r\n                    width: '14px',\r\n                    backgroundColor: '#673ab7',\r\n                    margin: '6px',\r\n                  }}\r\n                ></span>\r\n                <span\r\n                  onClick={() => onColorPick('#3f51b5')}\r\n                  className=\"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\"\r\n                  style={{\r\n                    height: '14px',\r\n                    width: '14px',\r\n                    backgroundColor: '#3f51b5',\r\n                    margin: '6px',\r\n                  }}\r\n                ></span>\r\n                <span\r\n                  onClick={() => onColorPick('#2196f3')}\r\n                  className=\"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\"\r\n                  style={{\r\n                    height: '14px',\r\n                    width: '14px',\r\n                    backgroundColor: '#2196f3',\r\n                    margin: '6px',\r\n                  }}\r\n                ></span>\r\n                <span\r\n                  onClick={() => onColorPick('#03a9f4')}\r\n                  className=\"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\"\r\n                  style={{\r\n                    height: '14px',\r\n                    width: '14px',\r\n                    backgroundColor: '#03a9f4',\r\n                    margin: '6px',\r\n                  }}\r\n                ></span>\r\n                <span\r\n                  onClick={() => onColorPick('#00bcd4')}\r\n                  className=\"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\"\r\n                  style={{\r\n                    height: '14px',\r\n                    width: '14px',\r\n                    backgroundColor: '#00bcd4',\r\n                    margin: '6px',\r\n                  }}\r\n                ></span>\r\n                <span\r\n                  onClick={() => onColorPick('#009688')}\r\n                  className=\"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\"\r\n                  style={{\r\n                    height: '14px',\r\n                    width: '14px',\r\n                    backgroundColor: '#009688',\r\n                    margin: '6px',\r\n                  }}\r\n                ></span>\r\n                <span\r\n                  onClick={() => onColorPick('#4caf50')}\r\n                  className=\"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\"\r\n                  style={{\r\n                    height: '14px',\r\n                    width: '14px',\r\n                    backgroundColor: '#4caf50',\r\n                    margin: '6px',\r\n                  }}\r\n                ></span>\r\n                <span\r\n                  onClick={() => onColorPick('#8bc34a')}\r\n                  className=\"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\"\r\n                  style={{\r\n                    height: '14px',\r\n                    width: '14px',\r\n                    backgroundColor: '#8bc34a',\r\n                    margin: '6px',\r\n                  }}\r\n                ></span>\r\n                <span\r\n                  onClick={() => onColorPick('#cddc39')}\r\n                  className=\"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\"\r\n                  style={{\r\n                    height: '14px',\r\n                    width: '14px',\r\n                    backgroundColor: '#cddc39',\r\n                    margin: '6px',\r\n                  }}\r\n                ></span>\r\n                <span\r\n                  onClick={() => onColorPick('#ffeb3b')}\r\n                  className=\"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\"\r\n                  style={{\r\n                    height: '14px',\r\n                    width: '14px',\r\n                    backgroundColor: '#ffeb3b',\r\n                    margin: '6px',\r\n                  }}\r\n                ></span>\r\n                <span\r\n                  onClick={() => onColorPick('#ffc107')}\r\n                  className=\"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\"\r\n                  style={{\r\n                    height: '14px',\r\n                    width: '14px',\r\n                    backgroundColor: '#ffc107',\r\n                    margin: '6px',\r\n                  }}\r\n                ></span>\r\n                <span\r\n                  onClick={() => onColorPick('#ff9800')}\r\n                  className=\"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\"\r\n                  style={{\r\n                    height: '14px',\r\n                    width: '14px',\r\n                    backgroundColor: '#ff9800',\r\n                    margin: '6px',\r\n                  }}\r\n                ></span>\r\n                <span\r\n                  onClick={() => onColorPick('#ff5722')}\r\n                  className=\"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\"\r\n                  style={{\r\n                    height: '14px',\r\n                    width: '14px',\r\n                    backgroundColor: '#ff5722',\r\n                    margin: '6px',\r\n                  }}\r\n                ></span>\r\n                <span\r\n                  onClick={() => onColorPick('#795548')}\r\n                  className=\"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\"\r\n                  style={{\r\n                    height: '14px',\r\n                    width: '14px',\r\n                    backgroundColor: '#795548',\r\n                    margin: '6px',\r\n                  }}\r\n                ></span>\r\n                <span\r\n                  onClick={() => onColorPick('#607d8b')}\r\n                  className=\"rounded-3xl transform hover:scale-125 transition duration-100 ease-linear cursor-pointer\"\r\n                  style={{\r\n                    height: '14px',\r\n                    width: '14px',\r\n                    backgroundColor: '#607d8b',\r\n                    margin: '6px',\r\n                  }}\r\n                ></span>\r\n              </div>\r\n            </div>\r\n            <img {...provided.dragHandleProps} className=\"ml-4\" src=\"/cash-flow/drag.svg\" height={18} width={18} />\r\n            <img\r\n              onClick={() => onElementDelete(element.index)}\r\n              className=\"ml-4 cursor-pointer\"\r\n              src=\"/cash-flow/remove.svg\"\r\n              height={18}\r\n              width={18}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CostsElement;\r\n"]},"metadata":{},"sourceType":"module"}