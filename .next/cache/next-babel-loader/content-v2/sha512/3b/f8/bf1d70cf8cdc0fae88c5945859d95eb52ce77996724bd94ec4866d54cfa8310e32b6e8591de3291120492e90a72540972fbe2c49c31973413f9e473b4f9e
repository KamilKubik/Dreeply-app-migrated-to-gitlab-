{"ast":null,"code":"import Router from 'next/router';\nimport firebase, { db } from '../../../../../../../lib/firebase'; // Add new section\n\nexport const newSectionPage = async (title, sections, setSelectedSection, projectId) => {\n  const section = {\n    position: sections.length,\n    title: title,\n    body: ''\n  };\n  const newFromDB = await db.collection('projects').doc(projectId).collection('businessPlan').doc(Router.query.project).collection('inputs').add({\n    position: section.position,\n    title: section.title,\n    // body: section.body,\n    fields: [],\n    timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n    createdAt: new Date()\n  });\n  const newID = newFromDB.id; // await this.setState({ sections: [...this.state.sections, section] });\n\n  const newSectionIndex = sections.indexOf(sections.filter(_section => _section.id === newID)[0]);\n  setSelectedSection(sections[newSectionIndex]);\n}; // Select section\n\nexport const selectSectionPage = (section, index, setSelectedSection) => setSelectedSection(section);","map":{"version":3,"sources":["C:/off-saas/components/dashboard/startup/project/business-app/business-plan/businessPlanUtils/sections.js"],"names":["Router","firebase","db","newSectionPage","title","sections","setSelectedSection","projectId","section","position","length","body","newFromDB","collection","doc","query","project","add","fields","timestamp","firestore","FieldValue","serverTimestamp","createdAt","Date","newID","id","newSectionIndex","indexOf","filter","_section","selectSectionPage","index"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,aAAnB;AACA,OAAOC,QAAP,IAAmBC,EAAnB,QAA6B,mCAA7B,C,CAEA;;AACA,OAAO,MAAMC,cAAc,GAAG,OAAOC,KAAP,EAAcC,QAAd,EAAwBC,kBAAxB,EAA4CC,SAA5C,KAA0D;AACtF,QAAMC,OAAO,GAAG;AACdC,IAAAA,QAAQ,EAAEJ,QAAQ,CAACK,MADL;AAEdN,IAAAA,KAAK,EAAEA,KAFO;AAGdO,IAAAA,IAAI,EAAE;AAHQ,GAAhB;AAKA,QAAMC,SAAS,GAAG,MAAMV,EAAE,CACvBW,UADqB,CACV,UADU,EAErBC,GAFqB,CAEjBP,SAFiB,EAGrBM,UAHqB,CAGV,cAHU,EAIrBC,GAJqB,CAIjBd,MAAM,CAACe,KAAP,CAAaC,OAJI,EAKrBH,UALqB,CAKV,QALU,EAMrBI,GANqB,CAMjB;AACHR,IAAAA,QAAQ,EAAED,OAAO,CAACC,QADf;AAEHL,IAAAA,KAAK,EAAEI,OAAO,CAACJ,KAFZ;AAGH;AACAc,IAAAA,MAAM,EAAE,EAJL;AAKHC,IAAAA,SAAS,EAAElB,QAAQ,CAACmB,SAAT,CAAmBC,UAAnB,CAA8BC,eAA9B,EALR;AAMHC,IAAAA,SAAS,EAAE,IAAIC,IAAJ;AANR,GANiB,CAAxB;AAcA,QAAMC,KAAK,GAAGb,SAAS,CAACc,EAAxB,CApBsF,CAqBtF;;AACA,QAAMC,eAAe,GAAGtB,QAAQ,CAACuB,OAAT,CAAiBvB,QAAQ,CAACwB,MAAT,CAAiBC,QAAD,IAAcA,QAAQ,CAACJ,EAAT,KAAgBD,KAA9C,EAAqD,CAArD,CAAjB,CAAxB;AACAnB,EAAAA,kBAAkB,CAACD,QAAQ,CAACsB,eAAD,CAAT,CAAlB;AACD,CAxBM,C,CA0BP;;AACA,OAAO,MAAMI,iBAAiB,GAAG,CAACvB,OAAD,EAAUwB,KAAV,EAAiB1B,kBAAjB,KAAwCA,kBAAkB,CAACE,OAAD,CAApF","sourcesContent":["import Router from 'next/router';\r\nimport firebase, { db } from '../../../../../../../lib/firebase';\r\n\r\n// Add new section\r\nexport const newSectionPage = async (title, sections, setSelectedSection, projectId) => {\r\n  const section = {\r\n    position: sections.length,\r\n    title: title,\r\n    body: '',\r\n  };\r\n  const newFromDB = await db\r\n    .collection('projects')\r\n    .doc(projectId)\r\n    .collection('businessPlan')\r\n    .doc(Router.query.project)\r\n    .collection('inputs')\r\n    .add({\r\n      position: section.position,\r\n      title: section.title,\r\n      // body: section.body,\r\n      fields: [],\r\n      timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n      createdAt: new Date(),\r\n    });\r\n  const newID = newFromDB.id;\r\n  // await this.setState({ sections: [...this.state.sections, section] });\r\n  const newSectionIndex = sections.indexOf(sections.filter((_section) => _section.id === newID)[0]);\r\n  setSelectedSection(sections[newSectionIndex]);\r\n};\r\n\r\n// Select section\r\nexport const selectSectionPage = (section, index, setSelectedSection) => setSelectedSection(section);\r\n"]},"metadata":{},"sourceType":"module"}