{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { withSuperJSONPage as _withSuperJSONPage } from \"babel-plugin-superjson-next/tools\";\nimport { withSuperJSONProps as _withSuperJSONProps } from \"babel-plugin-superjson-next/tools\";\nvar _jsxFileName = \"C:\\\\off-saas\\\\pages\\\\dashboard\\\\projects\\\\[project]\\\\cash-flow\\\\[id].js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport { db } from '../../../../../lib/firebase-admin';\nimport { db as dbClient } from '../../../../../lib/firebase';\nimport { isMobile } from 'react-device-detect';\nimport { useRouter } from 'next/router';\nimport Cookies from 'js-cookie';\nimport UniqueElement from '../../../../../components/dashboard/startup/project/business-app/competitors/UniqueElement';\nimport BounceLoaderComponent from '../../../../../components/BounceLoader';\n\nconst safeJsonStringify = require('safe-json-stringify');\n\nimport { useWindowSize } from '../../../../../utils/useWindowSize';\nimport DatePicker from 'react-datepicker';\nimport { addYears, format } from 'date-fns';\nimport moment from 'moment';\n\nconst UniqueCashflowPage = ({\n  project\n}) => {\n  console.log('Particular project --> ', project);\n  const {\n    0: startDate,\n    1: setStartDate\n  } = useState(new Date());\n  const {\n    0: endDate,\n    1: setEndDate\n  } = useState(new Date());\n  const {\n    0: selectedProject,\n    1: setSelectedProject\n  } = useState(null);\n  const {\n    0: revenueElements,\n    1: setRevenueElements\n  } = useState();\n  const {\n    0: costsElements,\n    1: setCostsElements\n  } = useState();\n  const {\n    0: periods,\n    1: setPeriods\n  } = useState();\n  const {\n    0: tax,\n    1: setTax\n  } = useState();\n  const size = useWindowSize(); // Sum data\n\n  const {\n    0: totalRevenue,\n    1: setTotalRevenue\n  } = useState();\n  const {\n    0: monthlyRevenue,\n    1: setMonthlyRevenue\n  } = useState();\n  const {\n    0: totalCosts,\n    1: setTotalCosts\n  } = useState();\n  const {\n    0: monthlyCosts,\n    1: setMonthlyCosts\n  } = useState();\n  const {\n    0: grossProfit,\n    1: setGrossProfit\n  } = useState();\n  const {\n    0: netProfit,\n    1: setNetProfit\n  } = useState();\n  useEffect(() => {\n    project && setSelectedProject(project[0]);\n    project && setRevenueElements(project[0].revenueElements);\n    project && setCostsElements(project[0].costsElements);\n    project && setPeriods(project[0].periods);\n    project && setTax(project[0].tax); // Sum data\n    // Global start date\n\n    const changedStartDate = project[0].globalStartDate._seconds * 1000;\n    console.log(changedStartDate);\n    project[0].globalStartDate !== '' && setStartDate(new Date(changedStartDate));\n    const changedEndDate = project[0].globalEndDate._seconds * 1000; // Global end date\n\n    project[0].globalEndDate !== '' && setEndDate(new Date(changedEndDate)); // Periods\n\n    setPeriods(project[0].periods); // Total revenue\n\n    const totalRevenueArray = project[0].revenueElements.map(element => parseInt(element.value * element.periods.length));\n    const totalRevenue = totalRevenueArray.reduce((a, b) => {\n      return a + b;\n    }, 0);\n    setTotalRevenue(Number.isNaN(totalRevenue) ? 0 : Math.round(totalRevenue)); // Monthly revenue\n\n    const periodLength = project[0].periods.length;\n    const monthlyRevenue = totalRevenue / periodLength;\n    setMonthlyRevenue(Number.isNaN(monthlyRevenue) ? 0 : Math.round(monthlyRevenue)); // Total costs\n\n    const totalCostsArray = project[0].costsElements.map(element => parseInt(element.value * element.periods.length));\n    const totalCosts = totalCostsArray.reduce((a, b) => {\n      return a + b;\n    }, 0);\n    setTotalCosts(Number.isFinite(totalCosts) ? Math.round(totalCosts) : 0); // Monthly costs\n\n    const monthlyCosts = totalCosts / periodLength;\n    setMonthlyCosts(Number.isFinite(monthlyCosts) ? Math.round(monthlyCosts) : 0); // Gross profit\n\n    const grossProfit = totalRevenue - totalCosts;\n    setGrossProfit(Number.isFinite(grossProfit) ? Math.round(grossProfit) : 0); // Net profit\n\n    const tax = parseInt(project[0].tax);\n    const netProfit = grossProfit - tax / 100 * grossProfit;\n    setNetProfit(Number.isFinite(netProfit) ? Math.round(netProfit) : 0);\n  }, [project]); //   const [competitors, setCompetitors] = useState([]);\n\n  const router = useRouter(); // Chart\n\n  useEffect(() => {\n    // const myChartRef = chartRef.current.getContext('2d');\n    document.getElementById(`chartContainer`).innerHTML = '&nbsp;';\n    document.getElementById(`chartContainer`).innerHTML = `<canvas height='${size.width > 680 ? 75 : 'unset'}' id='chart'></canvas>`;\n    const myChartRef = document.getElementById('chart').getContext('2d'); // Revenue datasets\n\n    const revenueDataset = [];\n    const testArray = []; // const monthData = periods && periods.map(() => null);\n\n    revenueElements && revenueElements.map((revenueElement, index) => {\n      const monthData = periods && periods.map(() => null);\n      console.log(revenueElement);\n      periods && periods.map((period, periodIndex) => {\n        revenueElement.periods.map(revenuePeriod => {\n          if (period == revenuePeriod) {\n            if (monthData[periodIndex] == null) {\n              monthData[periodIndex] = revenueElement.value;\n            }\n          }\n        });\n      });\n      console.log(monthData);\n      testArray.push(monthData);\n      revenueDataset.push({\n        label: `revenue / ${revenueElement.title}`,\n        data: monthData,\n        backgroundColor: revenueElement.color,\n        borderColor: revenueElement.color\n      });\n    }); // Costs datasets\n\n    const costsDataset = []; // const testArray = [];\n    // const monthData = periods && periods.map(() => null);\n\n    costsElements && costsElements.map((costsElement, index) => {\n      const monthData = periods && periods.map(() => null);\n      console.log(costsElement);\n      periods && periods.map((period, periodIndex) => {\n        costsElement.periods.map(costsPeriod => {\n          if (period == costsPeriod) {\n            if (monthData[periodIndex] == null) {\n              monthData[periodIndex] = -costsElement.value;\n            }\n          }\n        });\n      });\n      console.log(monthData);\n      testArray.push(monthData);\n      costsDataset.push({\n        label: `costs / ${costsElement.title}`,\n        data: monthData,\n        backgroundColor: costsElement.color,\n        borderColor: costsElement.color\n      });\n    }); // Net worth\n\n    console.log(revenueDataset);\n    console.log(costsDataset); // const netWorth =\n    //   revenueDataset.length !== 0 &&\n    //   costsDataset.length !== 0 &&\n    //   revenueDataset[0].data &&\n    //   revenueDataset[0].data.map((revenueElement, index) => {\n    //     if (revenueElement !== null && costsDataset[0].data[index] !== null) {\n    //       const grossProfit = revenueElement - -costsDataset[0].data[index];\n    //       return grossProfit - (tax / 100) * grossProfit;\n    //     } else if (revenueElement !== null) {\n    //       return revenueElement - (tax / 100) * revenueElement;\n    //     } else if (costsDataset[0].data[index] !== null) {\n    //       return costsDataset[0].data[index];\n    //     } else {\n    //       return null;\n    //     }\n    //   });\n    // ----------------------\n    // Revenue\n\n    const revenueArray = [];\n    revenueDataset.length !== 0 && revenueDataset.length !== 0 && revenueDataset.map(element => revenueArray.push(element.data && element.data.map(data => {\n      if (data !== null) {\n        return parseInt(data);\n      } else {\n        return 0;\n      }\n    })));\n    console.log(revenueArray);\n    const calculatedRevenueArray = revenueArray.length !== 0 && revenueArray[0] !== undefined && revenueArray.reduce((a, b) => a.map((c, i) => c + b[i]));\n    console.log(calculatedRevenueArray); // Costs\n\n    const costsArray = [];\n    console.log(costsDataset);\n    costsDataset.length !== 0 && costsDataset.length !== 0 && costsDataset.map(element => costsArray.push(element.data && element.data.map(data => {\n      if (data !== null) {\n        return parseInt(data);\n      } else {\n        return 0;\n      }\n    })));\n    console.log(costsArray);\n    const calculatedCostsArray = costsArray.length !== 0 && costsArray[0] !== undefined && costsArray.reduce((a, b) => a.map((c, i) => c + b[i]));\n    console.log(calculatedCostsArray); // Final value\n\n    const finalArray = [calculatedRevenueArray, calculatedCostsArray];\n    console.log(finalArray); // Check if any array is falsy\n\n    const calculatedFinalArray = finalArray && finalArray.map(array => {\n      if (!array) {\n        const zeroArray = [];\n        periods && periods.map(period => zeroArray.push(0));\n        return zeroArray;\n      } else {\n        return array;\n      }\n    });\n    console.log(calculatedFinalArray);\n    const finalDataBeforeTax = calculatedFinalArray.length !== 0 && calculatedFinalArray.reduce((a, b) => a && b && a.map((c, i) => c + b[i]));\n    const finalDataAfterTax = finalDataBeforeTax && finalDataBeforeTax.map(data => data - tax / 100 * data);\n    console.log(finalDataAfterTax);\n    const netWorthArray = [];\n    const netWorth = revenueDataset.length !== 0 && costsDataset.length !== 0 && revenueDataset && revenueDataset.map((revenueElement, index) => {\n      const value = revenueElement.data && revenueElement.data.map((dataElement, revenueElementIndex) => {\n        console.log(dataElement);\n\n        if (dataElement !== null && costsDataset[index]) {\n          if (costsDataset[index].data[revenueElementIndex]) {\n            const grossProfit = dataElement - -costsDataset[0].data[revenueElementIndex];\n            netWorthArray.push(grossProfit - tax / 100 * grossProfit); // return grossProfit - (tax / 100) * grossProfit;\n          }\n        }\n      });\n      return value;\n    });\n    new Chart(myChartRef, {\n      type: 'bar',\n      data: {\n        labels: periods && periods,\n        datasets: [{\n          type: 'line',\n          label: 'Net profit',\n          data: finalDataAfterTax,\n          backgroundColor: 'rgba(10, 18, 48, 1)',\n          borderColor: 'rgba(10, 18, 48, 1)',\n          fill: 0,\n          lineTension: 0,\n          borderWidth: size.width < 680 ? 1 : 3,\n          pointRadius: size.width < 680 ? 2 : 3\n        }, ...revenueDataset, ...costsDataset]\n      },\n      options: {\n        skipNull: true,\n        responsive: true,\n        plugins: {\n          legend: {\n            position: 'right',\n            labels: {\n              fontFamily: 'Comfortaa',\n              font: {\n                size: size.width < 680 ? 8 : 12\n              },\n              boxWidth: size.width < 680 ? 10 : 40\n            }\n          }\n        },\n        scales: {\n          x: {\n            stacked: true,\n            ticks: {\n              fontFamily: 'Comfortaa',\n              beginAtZero: true,\n              font: {\n                size: size.width < 680 ? 8 : 12\n              }\n            } // beginAtZero: true,\n\n          },\n          y: {\n            stacked: true,\n            ticks: {\n              fontFamily: 'Comfortaa',\n              beginAtZero: true,\n              font: {\n                size: size.width < 680 ? 8 : 12\n              }\n            } // beginAtZero: true,\n\n          }\n        }\n      }\n    });\n  }, [periods, revenueElements, costsElements, tax]);\n\n  if (router.isFallback) {\n    return /*#__PURE__*/_jsxDEV(BounceLoaderComponent, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 12\n    }, this);\n  }\n\n  console.log(startDate);\n  console.log(endDate);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen w-full relative flex flex-col items-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full max-w-full relative mt-12 lg1Container:mt-16 mb-16 px-32\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative grid grid-cols-2 grid-rows-1 grid-flow-col\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            height: size.width > 860 && 30 || size.width < 860 && size.width > 680 && 26 || size.width < 680 && 22,\n            width: size.width > 860 && 30 || size.width < 860 && size.width > 680 && 26 || size.width < 680 && 22,\n            className: \"fill-current text-primary dark:text-primarydark\",\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 128 128\",\n            children: [/*#__PURE__*/_jsxDEV(\"title\", {\n              children: \"Landing Success\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n              id: \"Landing_Success\",\n              \"data-name\": \"Landing Success\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                className: \"cls-1\",\n                d: \"M109.3,90.1A46,46,0,0,0,65,36V20.08c1.78-.62,7.21-2.14,12.57.23a19.33,19.33,0,0,0,14.82,0c.87-.38.61.31.61-17.93a1,1,0,0,0-1.43-.93c-.07,0-6.69,2.87-13.18,0A19.41,19.41,0,0,0,65,.93,1,1,0,0,0,63,1V36a45.86,45.86,0,0,0-28.66,10.8C16.18,40.48,4,40,.79,45.51-2.29,50.86,3.94,59.3,10,65.68A11,11,0,0,0,18,83c.81,38.41,46.08,59.2,75.66,34.21,8.53,3,29,9.15,33.55,1.31C130.39,113,123.86,102.65,109.3,90.1ZM77.59,3.31A19.39,19.39,0,0,0,91,3.83V18.68c-1.79.62-7.22,2.13-12.57-.23A19.19,19.19,0,0,0,65,17.93V3.08C66.81,2.46,72.24,1,77.59,3.31ZM65,45v-7c39.69.91,58,50.27,28.21,76.81C71.32,107,46,92.66,27.77,78.64a11,11,0,0,0-3.2-16.13A43.88,43.88,0,0,1,63,38.06V45A1,1,0,0,0,65,45ZM32.55,48.36a46.21,46.21,0,0,0-9.83,13.28,10.93,10.93,0,0,0-11.4,2.47C-8.39,43.23,5.23,39.08,32.55,48.36ZM10,72a9,9,0,1,1,9,9A9,9,0,0,1,10,72Zm10,11a11,11,0,0,0,6.34-2.82c18.45,14.21,43.45,28.35,65.05,36.22C63,139.16,20.83,119.1,20.05,83Zm105.4,34.5c-2.51,4.35-14,3.62-30-1.85a45.61,45.61,0,0,0,13.42-23.21C121.59,103.58,128,113.12,125.45,117.47Z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-primarydark text-lg mdContainer:text-xl lgContainer:text-2xl mt-2 pl-2 dark:text-background\",\n            children: \"Cash flow analysis\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-secondary text-xs mdContainer:text-sm lgContainer:text-base text-gray relative -top-1 lgContainer:top-0\",\n          children: \"Manage your startup cash flow\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full grid grid-cols-2fr grid-rows-1fr lgContainer:grid-cols-3fr lgContainer:grid-rows-1fr gap-y-8 gap-x-6 smContainer:gap-x-32 mdContainer:gap-x-12 mt-12\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"main-datepicker\",\n          className: \"w-full bg-white rounded-2xl py-3 px-3 mdContainer:py-3 mdContainer:px-4 lgContainer:px-6 lgContainer:py-4 shadow-md grid grid-cols-2fr items-center text-xs mdContainer:text-sm lgContainer:text-base\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"/cash-flow/calendar.svg\",\n              height: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18,\n              width: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"ml-2 text-primarydark\",\n              children: \"Start:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 13\n          }, this), startDate && !isMobile ? /*#__PURE__*/_jsxDEV(DatePicker, {\n            selected: startDate // onChange={(date) => onStartDateUpdate(date)}\n            ,\n            dateFormat: \"MMMM yyyy\",\n            showMonthYearPicker: true,\n            maxDate: addYears(new Date(), 3),\n            minDate: new Date()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(DatePicker, {\n            selected: startDate // onChange={(date) => onStartDateUpdate(date)}\n            ,\n            dateFormat: \"MMMM yyyy\",\n            showMonthYearPicker: true,\n            maxDate: addYears(new Date(), 3),\n            minDate: new Date(),\n            withPortal: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"main-datepicker\",\n          className: \"w-full bg-white rounded-2xl py-3 px-3 mdContainer:py-3 mdContainer:px-4 lgContainer:px-6 lgContainer:py-4 shadow-md grid grid-cols-2fr items-center text-xs mdContainer:text-sm lgContainer:text-base\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"/cash-flow/hourglass1.svg\",\n              height: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18,\n              width: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"ml-2 text-primarydark\",\n              children: \"End:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 13\n          }, this), endDate && !isMobile ? /*#__PURE__*/_jsxDEV(DatePicker, {\n            selected: endDate // onChange={(date) => onEndDateUpdate(date)}\n            ,\n            dateFormat: \"MMMM yyyy\",\n            showMonthYearPicker: true,\n            maxDate: addYears(new Date(), 3),\n            minDate: new Date()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(DatePicker, {\n            selected: endDate // onChange={(date) => onEndDateUpdate(date)}\n            ,\n            dateFormat: \"MMMM yyyy\",\n            showMonthYearPicker: true,\n            maxDate: addYears(new Date(), 3),\n            minDate: new Date(),\n            withPortal: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: size.width > 860 && '100%' || size.width < 860 && size.width > 680 && '47%' || size.width < 680 && size.width > 520 && '40%' || size.width < 520 && '47%',\n            gridColumnStart: size.width < 860 ? '1' : 'unset',\n            gridColumnEnd: size.width < 860 ? '3' : 'unset'\n          },\n          className: \"place-self-center bg-white rounded-2xl py-3 px-3 mdContainer:py-3 mdContainer:px-4 lgContainer:px-6 lgContainer:py-4 shadow-md grid grid-cols-2fr items-center text-xs mdContainer:text-sm lgContainer:text-base\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"/cash-flow/tax.svg\",\n              height: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18,\n              width: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"ml-2\",\n              children: \"Tax:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 428,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex\",\n            style: {\n              textAlignLast: 'right'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"tax-input\",\n              value: tax,\n              className: \"w-full bg-white focus:outline-none\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"%\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"chartContainer\",\n        className: \"w-full h-1/2 p-4 mdContainer:p-8 bg-white rounded-2xl mt-12 shadow-md\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full grid grid-cols-2fr grid-rows-3fr lg1Container:grid-cols-3fr lg1Container:grid-rows-2fr gap-x-6 smContainer:gap-x-12 gap-y-8 mt-12\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full bg-white rounded-2xl py-3 px-3 mdContainer:py-3 mdContainer:px-4 lgContainer:px-6 lgContainer:py-4 shadow-md flex justify-between items-center text-xs mdContainer:text-sm lgContainer:text-base\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"/cash-flow/revenue.svg\",\n              height: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18,\n              width: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"ml-2\",\n              children: \"Total revenue:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"$\", totalRevenue]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full bg-white rounded-2xl py-3 px-3 mdContainer:py-3 mdContainer:px-4 lgContainer:px-6 lgContainer:py-4 shadow-md flex justify-between items-center text-xs mdContainer:text-sm lgContainer:text-base\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"/cash-flow/monthly.svg\",\n              height: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18,\n              width: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 453,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"ml-2\",\n              children: \"Monthly revenue:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"$\", monthlyRevenue]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 451,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full bg-white rounded-2xl py-3 px-3 mdContainer:py-3 mdContainer:px-4 lgContainer:px-6 lgContainer:py-4 shadow-md flex justify-between items-center text-xs mdContainer:text-sm lgContainer:text-base\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"/cash-flow/costs.svg\",\n              height: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18,\n              width: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 464,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"ml-2\",\n              children: \"Total costs:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 469,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"$\", totalCosts]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full bg-white rounded-2xl py-3 px-3 mdContainer:py-3 mdContainer:px-4 lgContainer:px-6 lgContainer:py-4 shadow-md flex justify-between items-center text-xs mdContainer:text-sm lgContainer:text-base\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"/cash-flow/monthly-costs.svg\",\n              height: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18,\n              width: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"ml-2\",\n              children: \"Monthly costs:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 480,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 474,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"$\", monthlyCosts]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full bg-white rounded-2xl py-3 px-3 mdContainer:py-3 mdContainer:px-4 lgContainer:px-6 lgContainer:py-4 shadow-md flex justify-between items-center text-xs mdContainer:text-sm lgContainer:text-base\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"/cash-flow/megaphone.svg\",\n              height: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18,\n              width: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 486,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"ml-2\",\n              children: \"Gross profit:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 485,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"$\", grossProfit]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 493,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full bg-white rounded-2xl py-3 px-3 mdContainer:py-3 mdContainer:px-4 lgContainer:px-6 lgContainer:py-4 shadow-md flex justify-between items-center text-xs mdContainer:text-sm lgContainer:text-base\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"/cash-flow/net-worth.svg\",\n              height: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18,\n              width: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"ml-2\",\n              children: \"Net profit:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 502,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 496,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"$\", netProfit]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 504,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 495,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        // ref={revenueRef}\n        style: {\n          height: 55\n        },\n        className: \"overflow-hidden relative w-full rounded-2xl bg-white dark:bg-background px-4 py-4 flex justify-center items-center mt-12 flex flex-wrap shadow-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lgContainer:ml-2\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm lgContainer:text-base\",\n              children: \"Revenue\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 515,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lgContainer:mr-2 flex flex-nowrap items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"cursor-pointer\",\n              src: \"/cash-flow/add.svg\",\n              height: size.width > 860 && 22 || size.width < 860 && size.width > 680 && 18 || size.width < 680 && 16,\n              width: size.width > 860 && 22 || size.width < 860 && size.width > 680 && 18 || size.width < 680 && 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 518,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              // ref={dropDownIcon}\n              // onClick={onRevenueShow}\n              className: \"ml-2 cursor-pointer\",\n              src: \"/cash-flow/dropdown.svg\",\n              height: size.width > 860 && 22 || size.width < 860 && size.width > 680 && 18 || size.width < 680 && 16,\n              width: size.width > 860 && 22 || size.width < 860 && size.width > 680 && 18 || size.width < 680 && 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 524,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 517,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 513,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          // ref={innerContainerRevenueRef}\n          className: `w-full ${size.width < 1120 ? 'text-sm mdContainer:text-base lg1Container:mx-8 lg1Container:mb-6 mt-4  bg-background rounded-2xl px-4 mdContainer:px-6 py-4' : 'w-full mx-8 mb-6 mt-4  bg-background rounded-2xl px-4 mdContainer:px-6 py-4'}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: size.width < 520 && '0.6rem'\n            },\n            className: \"w-full grid grid-cols-6fr items-center text-xs mdContainer:text-sm lg1Container:text-base\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 547,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 548,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"amount\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 549,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"start\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"end\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 551,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 552,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 543,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n            className: \"text-primary w-full\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-full w-full rounded-2xl flex flex-wrap flex-col\",\n            children: revenueElements && revenueElements.map((element, index) => {\n              return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) //   <RevenueElement\n              //   provided={provided}\n              //   setRevenueElements={setRevenueElements}\n              //   mainDocument={mainDocument}\n              //   projectId={projectId}\n              //   documentId={documentId}\n              //   revenueElements={revenueElements}\n              //   element={element}\n              //   index={index}\n              // />\n              ;\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 555,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 508,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        // ref={costsRef}\n        style: {\n          height: 55\n        },\n        className: \"overflow-hidden relative w-full rounded-2xl bg-white dark:bg-background px-4 py-4 flex justify-center items-center mt-8 flex flex-wrap shadow-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lgContainer:ml-2\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm lgContainer:text-base\",\n              children: \"Costs\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 583,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 582,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lgContainer:mr-2 flex flex-nowrap items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"cursor-pointer\",\n              src: \"/cash-flow/add.svg\",\n              height: size.width > 860 && 22 || size.width < 860 && size.width > 680 && 18 || size.width < 680 && 16,\n              width: size.width > 860 && 22 || size.width < 860 && size.width > 680 && 18 || size.width < 680 && 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 586,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"ml-2 cursor-pointer\",\n              src: \"/cash-flow/dropdown.svg\",\n              height: size.width > 860 && 22 || size.width < 860 && size.width > 680 && 18 || size.width < 680 && 16,\n              width: size.width > 860 && 22 || size.width < 860 && size.width > 680 && 18 || size.width < 680 && 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 592,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 585,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 581,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `w-full ${size.width < 1120 ? 'text-sm mdContainer:text-base lg1Container:mx-8 lg1Container:mb-6 mt-4  bg-background rounded-2xl px-4 mdContainer:px-6 py-4' : 'w-full mx-8 mb-6 mt-4  bg-background rounded-2xl px-4 mdContainer:px-6 py-4'}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-full grid grid-cols-6fr items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 609,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 610,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"amount\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 611,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"start\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 612,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"end\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 613,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 614,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 608,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n            className: \"text-primary w-full\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 616,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-full w-full rounded-2xl flex flex-wrap flex-col\",\n            children: costsElements && costsElements.map((element, index) => {\n              return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) //   <CostsElement\n              //   provided={provided}\n              //   setCostsElements={setCostsElements}\n              //   mainDocument={mainDocument}\n              //   projectId={projectId}\n              //   documentId={documentId}\n              //   costsElements={costsElements}\n              //   element={element}\n              //   index={index}\n              // />\n              ;\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 617,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 600,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 576,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 314,\n    columnNumber: 5\n  }, this);\n};\n\nexport const getStaticPaths = async () => {\n  const snapshot = await db.collection('projects').get();\n  const projects = [];\n  snapshot.forEach(doc => {\n    projects.push(doc.data());\n  });\n  const paths = projects.map(project => ({\n    params: {\n      project: project.projectName.toString(),\n      id: project.projectId.toString()\n    }\n  }));\n  return {\n    paths: paths,\n    fallback: true\n  };\n};\nexport const getStaticProps = _withSuperJSONProps(async ({\n  params\n}) => {\n  console.log(params); // let ref = db.collection('projects').where('projectName', '==', params.project);\n\n  let ref = db.collection('projects').doc(params.id).collection('cashFlow').doc(params.project).collection('inputs').where('projectId', '==', params.id);\n  const snapshot = await ref.get();\n  const project = [];\n  snapshot.forEach(doc => {\n    const data = JSON.parse(safeJsonStringify(doc.data()));\n    project.push(_objectSpread({}, data));\n  });\n  return {\n    props: {\n      project\n    },\n    revalidate: 1\n  };\n}, []);\nexport default _withSuperJSONPage(UniqueCashflowPage);","map":{"version":3,"sources":["C:/off-saas/pages/dashboard/projects/[project]/cash-flow/[id].js"],"names":["React","useEffect","useState","useRef","db","dbClient","isMobile","useRouter","Cookies","UniqueElement","BounceLoaderComponent","safeJsonStringify","require","useWindowSize","DatePicker","addYears","format","moment","UniqueCashflowPage","project","console","log","startDate","setStartDate","Date","endDate","setEndDate","selectedProject","setSelectedProject","revenueElements","setRevenueElements","costsElements","setCostsElements","periods","setPeriods","tax","setTax","size","totalRevenue","setTotalRevenue","monthlyRevenue","setMonthlyRevenue","totalCosts","setTotalCosts","monthlyCosts","setMonthlyCosts","grossProfit","setGrossProfit","netProfit","setNetProfit","changedStartDate","globalStartDate","_seconds","changedEndDate","globalEndDate","totalRevenueArray","map","element","parseInt","value","length","reduce","a","b","Number","isNaN","Math","round","periodLength","totalCostsArray","isFinite","router","document","getElementById","innerHTML","width","myChartRef","getContext","revenueDataset","testArray","revenueElement","index","monthData","period","periodIndex","revenuePeriod","push","label","title","data","backgroundColor","color","borderColor","costsDataset","costsElement","costsPeriod","revenueArray","calculatedRevenueArray","undefined","c","i","costsArray","calculatedCostsArray","finalArray","calculatedFinalArray","array","zeroArray","finalDataBeforeTax","finalDataAfterTax","netWorthArray","netWorth","dataElement","revenueElementIndex","Chart","type","labels","datasets","fill","lineTension","borderWidth","pointRadius","options","skipNull","responsive","plugins","legend","position","fontFamily","font","boxWidth","scales","x","stacked","ticks","beginAtZero","y","isFallback","gridColumnStart","gridColumnEnd","textAlignLast","height","fontSize","getStaticPaths","snapshot","collection","get","projects","forEach","doc","paths","params","projectName","toString","id","projectId","fallback","getStaticProps","ref","where","JSON","parse","props","revalidate"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport { db } from '../../../../../lib/firebase-admin';\r\nimport { db as dbClient } from '../../../../../lib/firebase';\r\nimport { isMobile } from 'react-device-detect';\r\nimport { useRouter } from 'next/router';\r\nimport Cookies from 'js-cookie';\r\nimport UniqueElement from '../../../../../components/dashboard/startup/project/business-app/competitors/UniqueElement';\r\nimport BounceLoaderComponent from '../../../../../components/BounceLoader';\r\nconst safeJsonStringify = require('safe-json-stringify');\r\nimport { useWindowSize } from '../../../../../utils/useWindowSize';\r\n\r\nimport DatePicker from 'react-datepicker';\r\nimport { addYears, format } from 'date-fns';\r\nimport moment from 'moment';\r\n\r\nconst UniqueCashflowPage = ({ project }) => {\r\n  console.log('Particular project --> ', project);\r\n  const [startDate, setStartDate] = useState(new Date());\r\n  const [endDate, setEndDate] = useState(new Date());\r\n  const [selectedProject, setSelectedProject] = useState(null);\r\n  const [revenueElements, setRevenueElements] = useState();\r\n  const [costsElements, setCostsElements] = useState();\r\n  const [periods, setPeriods] = useState();\r\n  const [tax, setTax] = useState();\r\n  const size = useWindowSize();\r\n  // Sum data\r\n  const [totalRevenue, setTotalRevenue] = useState();\r\n  const [monthlyRevenue, setMonthlyRevenue] = useState();\r\n  const [totalCosts, setTotalCosts] = useState();\r\n  const [monthlyCosts, setMonthlyCosts] = useState();\r\n  const [grossProfit, setGrossProfit] = useState();\r\n  const [netProfit, setNetProfit] = useState();\r\n  useEffect(() => {\r\n    project && setSelectedProject(project[0]);\r\n    project && setRevenueElements(project[0].revenueElements);\r\n    project && setCostsElements(project[0].costsElements);\r\n    project && setPeriods(project[0].periods);\r\n    project && setTax(project[0].tax);\r\n    // Sum data\r\n    // Global start date\r\n    const changedStartDate = project[0].globalStartDate._seconds * 1000;\r\n    console.log(changedStartDate);\r\n    project[0].globalStartDate !== '' && setStartDate(new Date(changedStartDate));\r\n    const changedEndDate = project[0].globalEndDate._seconds * 1000;\r\n    // Global end date\r\n    project[0].globalEndDate !== '' && setEndDate(new Date(changedEndDate));\r\n    // Periods\r\n    setPeriods(project[0].periods);\r\n    // Total revenue\r\n    const totalRevenueArray = project[0].revenueElements.map((element) => parseInt(element.value * element.periods.length));\r\n    const totalRevenue = totalRevenueArray.reduce((a, b) => {\r\n      return a + b;\r\n    }, 0);\r\n    setTotalRevenue(Number.isNaN(totalRevenue) ? 0 : Math.round(totalRevenue));\r\n    // Monthly revenue\r\n    const periodLength = project[0].periods.length;\r\n    const monthlyRevenue = totalRevenue / periodLength;\r\n    setMonthlyRevenue(Number.isNaN(monthlyRevenue) ? 0 : Math.round(monthlyRevenue));\r\n    // Total costs\r\n    const totalCostsArray = project[0].costsElements.map((element) => parseInt(element.value * element.periods.length));\r\n    const totalCosts = totalCostsArray.reduce((a, b) => {\r\n      return a + b;\r\n    }, 0);\r\n    setTotalCosts(Number.isFinite(totalCosts) ? Math.round(totalCosts) : 0);\r\n    // Monthly costs\r\n    const monthlyCosts = totalCosts / periodLength;\r\n    setMonthlyCosts(Number.isFinite(monthlyCosts) ? Math.round(monthlyCosts) : 0);\r\n    // Gross profit\r\n    const grossProfit = totalRevenue - totalCosts;\r\n    setGrossProfit(Number.isFinite(grossProfit) ? Math.round(grossProfit) : 0);\r\n    // Net profit\r\n    const tax = parseInt(project[0].tax);\r\n    const netProfit = grossProfit - (tax / 100) * grossProfit;\r\n    setNetProfit(Number.isFinite(netProfit) ? Math.round(netProfit) : 0);\r\n  }, [project]);\r\n  //   const [competitors, setCompetitors] = useState([]);\r\n  const router = useRouter();\r\n\r\n  // Chart\r\n  useEffect(() => {\r\n    // const myChartRef = chartRef.current.getContext('2d');\r\n    document.getElementById(`chartContainer`).innerHTML = '&nbsp;';\r\n    document.getElementById(`chartContainer`).innerHTML = `<canvas height='${size.width > 680 ? 75 : 'unset'}' id='chart'></canvas>`;\r\n    const myChartRef = document.getElementById('chart').getContext('2d');\r\n\r\n    // Revenue datasets\r\n    const revenueDataset = [];\r\n    const testArray = [];\r\n    // const monthData = periods && periods.map(() => null);\r\n    revenueElements &&\r\n      revenueElements.map((revenueElement, index) => {\r\n        const monthData = periods && periods.map(() => null);\r\n        console.log(revenueElement);\r\n        periods &&\r\n          periods.map((period, periodIndex) => {\r\n            revenueElement.periods.map((revenuePeriod) => {\r\n              if (period == revenuePeriod) {\r\n                if (monthData[periodIndex] == null) {\r\n                  monthData[periodIndex] = revenueElement.value;\r\n                }\r\n              }\r\n            });\r\n          });\r\n        console.log(monthData);\r\n        testArray.push(monthData);\r\n        revenueDataset.push({\r\n          label: `revenue / ${revenueElement.title}`,\r\n          data: monthData,\r\n          backgroundColor: revenueElement.color,\r\n          borderColor: revenueElement.color,\r\n        });\r\n      });\r\n\r\n    // Costs datasets\r\n    const costsDataset = [];\r\n    // const testArray = [];\r\n    // const monthData = periods && periods.map(() => null);\r\n    costsElements &&\r\n      costsElements.map((costsElement, index) => {\r\n        const monthData = periods && periods.map(() => null);\r\n        console.log(costsElement);\r\n        periods &&\r\n          periods.map((period, periodIndex) => {\r\n            costsElement.periods.map((costsPeriod) => {\r\n              if (period == costsPeriod) {\r\n                if (monthData[periodIndex] == null) {\r\n                  monthData[periodIndex] = -costsElement.value;\r\n                }\r\n              }\r\n            });\r\n          });\r\n        console.log(monthData);\r\n        testArray.push(monthData);\r\n        costsDataset.push({\r\n          label: `costs / ${costsElement.title}`,\r\n          data: monthData,\r\n          backgroundColor: costsElement.color,\r\n          borderColor: costsElement.color,\r\n        });\r\n      });\r\n    // Net worth\r\n    console.log(revenueDataset);\r\n    console.log(costsDataset);\r\n    // const netWorth =\r\n    //   revenueDataset.length !== 0 &&\r\n    //   costsDataset.length !== 0 &&\r\n    //   revenueDataset[0].data &&\r\n    //   revenueDataset[0].data.map((revenueElement, index) => {\r\n    //     if (revenueElement !== null && costsDataset[0].data[index] !== null) {\r\n    //       const grossProfit = revenueElement - -costsDataset[0].data[index];\r\n    //       return grossProfit - (tax / 100) * grossProfit;\r\n    //     } else if (revenueElement !== null) {\r\n    //       return revenueElement - (tax / 100) * revenueElement;\r\n    //     } else if (costsDataset[0].data[index] !== null) {\r\n    //       return costsDataset[0].data[index];\r\n    //     } else {\r\n    //       return null;\r\n    //     }\r\n    //   });\r\n    // ----------------------\r\n    // Revenue\r\n    const revenueArray = [];\r\n    revenueDataset.length !== 0 &&\r\n      revenueDataset.length !== 0 &&\r\n      revenueDataset.map((element) =>\r\n        revenueArray.push(\r\n          element.data &&\r\n            element.data.map((data) => {\r\n              if (data !== null) {\r\n                return parseInt(data);\r\n              } else {\r\n                return 0;\r\n              }\r\n            })\r\n        )\r\n      );\r\n    console.log(revenueArray);\r\n    const calculatedRevenueArray =\r\n      revenueArray.length !== 0 && revenueArray[0] !== undefined && revenueArray.reduce((a, b) => a.map((c, i) => c + b[i]));\r\n    console.log(calculatedRevenueArray);\r\n    // Costs\r\n    const costsArray = [];\r\n    console.log(costsDataset);\r\n    costsDataset.length !== 0 &&\r\n      costsDataset.length !== 0 &&\r\n      costsDataset.map((element) =>\r\n        costsArray.push(\r\n          element.data &&\r\n            element.data.map((data) => {\r\n              if (data !== null) {\r\n                return parseInt(data);\r\n              } else {\r\n                return 0;\r\n              }\r\n            })\r\n        )\r\n      );\r\n    console.log(costsArray);\r\n    const calculatedCostsArray =\r\n      costsArray.length !== 0 && costsArray[0] !== undefined && costsArray.reduce((a, b) => a.map((c, i) => c + b[i]));\r\n    console.log(calculatedCostsArray);\r\n    // Final value\r\n    const finalArray = [calculatedRevenueArray, calculatedCostsArray];\r\n    console.log(finalArray);\r\n    // Check if any array is falsy\r\n    const calculatedFinalArray =\r\n      finalArray &&\r\n      finalArray.map((array) => {\r\n        if (!array) {\r\n          const zeroArray = [];\r\n          periods && periods.map((period) => zeroArray.push(0));\r\n          return zeroArray;\r\n        } else {\r\n          return array;\r\n        }\r\n      });\r\n    console.log(calculatedFinalArray);\r\n    const finalDataBeforeTax =\r\n      calculatedFinalArray.length !== 0 && calculatedFinalArray.reduce((a, b) => a && b && a.map((c, i) => c + b[i]));\r\n    const finalDataAfterTax = finalDataBeforeTax && finalDataBeforeTax.map((data) => data - (tax / 100) * data);\r\n    console.log(finalDataAfterTax);\r\n\r\n    const netWorthArray = [];\r\n    const netWorth =\r\n      revenueDataset.length !== 0 &&\r\n      costsDataset.length !== 0 &&\r\n      revenueDataset &&\r\n      revenueDataset.map((revenueElement, index) => {\r\n        const value =\r\n          revenueElement.data &&\r\n          revenueElement.data.map((dataElement, revenueElementIndex) => {\r\n            console.log(dataElement);\r\n            if (dataElement !== null && costsDataset[index]) {\r\n              if (costsDataset[index].data[revenueElementIndex]) {\r\n                const grossProfit = dataElement - -costsDataset[0].data[revenueElementIndex];\r\n                netWorthArray.push(grossProfit - (tax / 100) * grossProfit);\r\n                // return grossProfit - (tax / 100) * grossProfit;\r\n              }\r\n            }\r\n          });\r\n        return value;\r\n      });\r\n\r\n    new Chart(myChartRef, {\r\n      type: 'bar',\r\n      data: {\r\n        labels: periods && periods,\r\n        datasets: [\r\n          {\r\n            type: 'line',\r\n            label: 'Net profit',\r\n            data: finalDataAfterTax,\r\n            backgroundColor: 'rgba(10, 18, 48, 1)',\r\n            borderColor: 'rgba(10, 18, 48, 1)',\r\n            fill: 0,\r\n            lineTension: 0,\r\n            borderWidth: size.width < 680 ? 1 : 3,\r\n            pointRadius: size.width < 680 ? 2 : 3,\r\n          },\r\n          ...revenueDataset,\r\n          ...costsDataset,\r\n        ],\r\n      },\r\n      options: {\r\n        skipNull: true,\r\n        responsive: true,\r\n        plugins: {\r\n          legend: {\r\n            position: 'right',\r\n            labels: {\r\n              fontFamily: 'Comfortaa',\r\n              font: {\r\n                size: size.width < 680 ? 8 : 12,\r\n              },\r\n              boxWidth: size.width < 680 ? 10 : 40,\r\n            },\r\n          },\r\n        },\r\n        scales: {\r\n          x: {\r\n            stacked: true,\r\n            ticks: {\r\n              fontFamily: 'Comfortaa',\r\n              beginAtZero: true,\r\n              font: {\r\n                size: size.width < 680 ? 8 : 12,\r\n              },\r\n            },\r\n            // beginAtZero: true,\r\n          },\r\n          y: {\r\n            stacked: true,\r\n            ticks: {\r\n              fontFamily: 'Comfortaa',\r\n              beginAtZero: true,\r\n              font: {\r\n                size: size.width < 680 ? 8 : 12,\r\n              },\r\n            },\r\n            // beginAtZero: true,\r\n          },\r\n        },\r\n      },\r\n    });\r\n  }, [periods, revenueElements, costsElements, tax]);\r\n\r\n  if (router.isFallback) {\r\n    return <BounceLoaderComponent />;\r\n  }\r\n\r\n  console.log(startDate);\r\n  console.log(endDate);\r\n  return (\r\n    <div className=\"min-h-screen w-full relative flex flex-col items-center\">\r\n      <div className=\"w-full max-w-full relative mt-12 lg1Container:mt-16 mb-16 px-32\">\r\n        <div className=\"relative grid grid-cols-2 grid-rows-1 grid-flow-col\">\r\n          <div className=\"flex items-center\">\r\n            <svg\r\n              height={(size.width > 860 && 30) || (size.width < 860 && size.width > 680 && 26) || (size.width < 680 && 22)}\r\n              width={(size.width > 860 && 30) || (size.width < 860 && size.width > 680 && 26) || (size.width < 680 && 22)}\r\n              className=\"fill-current text-primary dark:text-primarydark\"\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              viewBox=\"0 0 128 128\"\r\n            >\r\n              <title>Landing Success</title>\r\n              <g id=\"Landing_Success\" data-name=\"Landing Success\">\r\n                <path\r\n                  className=\"cls-1\"\r\n                  d=\"M109.3,90.1A46,46,0,0,0,65,36V20.08c1.78-.62,7.21-2.14,12.57.23a19.33,19.33,0,0,0,14.82,0c.87-.38.61.31.61-17.93a1,1,0,0,0-1.43-.93c-.07,0-6.69,2.87-13.18,0A19.41,19.41,0,0,0,65,.93,1,1,0,0,0,63,1V36a45.86,45.86,0,0,0-28.66,10.8C16.18,40.48,4,40,.79,45.51-2.29,50.86,3.94,59.3,10,65.68A11,11,0,0,0,18,83c.81,38.41,46.08,59.2,75.66,34.21,8.53,3,29,9.15,33.55,1.31C130.39,113,123.86,102.65,109.3,90.1ZM77.59,3.31A19.39,19.39,0,0,0,91,3.83V18.68c-1.79.62-7.22,2.13-12.57-.23A19.19,19.19,0,0,0,65,17.93V3.08C66.81,2.46,72.24,1,77.59,3.31ZM65,45v-7c39.69.91,58,50.27,28.21,76.81C71.32,107,46,92.66,27.77,78.64a11,11,0,0,0-3.2-16.13A43.88,43.88,0,0,1,63,38.06V45A1,1,0,0,0,65,45ZM32.55,48.36a46.21,46.21,0,0,0-9.83,13.28,10.93,10.93,0,0,0-11.4,2.47C-8.39,43.23,5.23,39.08,32.55,48.36ZM10,72a9,9,0,1,1,9,9A9,9,0,0,1,10,72Zm10,11a11,11,0,0,0,6.34-2.82c18.45,14.21,43.45,28.35,65.05,36.22C63,139.16,20.83,119.1,20.05,83Zm105.4,34.5c-2.51,4.35-14,3.62-30-1.85a45.61,45.61,0,0,0,13.42-23.21C121.59,103.58,128,113.12,125.45,117.47Z\"\r\n                />\r\n              </g>\r\n            </svg>\r\n            <p className=\"text-primarydark text-lg mdContainer:text-xl lgContainer:text-2xl mt-2 pl-2 dark:text-background\">\r\n              Cash flow analysis\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <h1 className=\"text-secondary text-xs mdContainer:text-sm lgContainer:text-base text-gray relative -top-1 lgContainer:top-0\">\r\n            Manage your startup cash flow\r\n          </h1>\r\n        </div>\r\n        <div className=\"w-full grid grid-cols-2fr grid-rows-1fr lgContainer:grid-cols-3fr lgContainer:grid-rows-1fr gap-y-8 gap-x-6 smContainer:gap-x-32 mdContainer:gap-x-12 mt-12\">\r\n          <div\r\n            id=\"main-datepicker\"\r\n            className=\"w-full bg-white rounded-2xl py-3 px-3 mdContainer:py-3 mdContainer:px-4 lgContainer:px-6 lgContainer:py-4 shadow-md grid grid-cols-2fr items-center text-xs mdContainer:text-sm lgContainer:text-base\"\r\n          >\r\n            <div className=\"flex items-center\">\r\n              <img\r\n                src=\"/cash-flow/calendar.svg\"\r\n                height={(size.width > 860 && 25) || (size.width < 860 && size.width > 680 && 22) || (size.width < 680 && 18)}\r\n                width={(size.width > 860 && 25) || (size.width < 860 && size.width > 680 && 22) || (size.width < 680 && 18)}\r\n              />\r\n              <p className=\"ml-2 text-primarydark\">Start:</p>\r\n            </div>\r\n            {startDate && !isMobile ? (\r\n              <DatePicker\r\n                selected={startDate}\r\n                // onChange={(date) => onStartDateUpdate(date)}\r\n                dateFormat=\"MMMM yyyy\"\r\n                showMonthYearPicker\r\n                maxDate={addYears(new Date(), 3)}\r\n                minDate={new Date()}\r\n              />\r\n            ) : (\r\n              <DatePicker\r\n                selected={startDate}\r\n                // onChange={(date) => onStartDateUpdate(date)}\r\n                dateFormat=\"MMMM yyyy\"\r\n                showMonthYearPicker\r\n                maxDate={addYears(new Date(), 3)}\r\n                minDate={new Date()}\r\n                withPortal\r\n              />\r\n            )}\r\n          </div>\r\n          <div\r\n            id=\"main-datepicker\"\r\n            className=\"w-full bg-white rounded-2xl py-3 px-3 mdContainer:py-3 mdContainer:px-4 lgContainer:px-6 lgContainer:py-4 shadow-md grid grid-cols-2fr items-center text-xs mdContainer:text-sm lgContainer:text-base\"\r\n          >\r\n            <div className=\"flex items-center\">\r\n              <img\r\n                src=\"/cash-flow/hourglass1.svg\"\r\n                height={(size.width > 860 && 25) || (size.width < 860 && size.width > 680 && 22) || (size.width < 680 && 18)}\r\n                width={(size.width > 860 && 25) || (size.width < 860 && size.width > 680 && 22) || (size.width < 680 && 18)}\r\n              />\r\n              <p className=\"ml-2 text-primarydark\">End:</p>\r\n            </div>\r\n            {endDate && !isMobile ? (\r\n              <DatePicker\r\n                selected={endDate}\r\n                // onChange={(date) => onEndDateUpdate(date)}\r\n                dateFormat=\"MMMM yyyy\"\r\n                showMonthYearPicker\r\n                maxDate={addYears(new Date(), 3)}\r\n                minDate={new Date()}\r\n              />\r\n            ) : (\r\n              <DatePicker\r\n                selected={endDate}\r\n                // onChange={(date) => onEndDateUpdate(date)}\r\n                dateFormat=\"MMMM yyyy\"\r\n                showMonthYearPicker\r\n                maxDate={addYears(new Date(), 3)}\r\n                minDate={new Date()}\r\n                withPortal\r\n              />\r\n            )}\r\n          </div>\r\n          <div\r\n            style={{\r\n              width:\r\n                (size.width > 860 && '100%') ||\r\n                (size.width < 860 && size.width > 680 && '47%') ||\r\n                (size.width < 680 && size.width > 520 && '40%') ||\r\n                (size.width < 520 && '47%'),\r\n              gridColumnStart: size.width < 860 ? '1' : 'unset',\r\n              gridColumnEnd: size.width < 860 ? '3' : 'unset',\r\n            }}\r\n            className=\"place-self-center bg-white rounded-2xl py-3 px-3 mdContainer:py-3 mdContainer:px-4 lgContainer:px-6 lgContainer:py-4 shadow-md grid grid-cols-2fr items-center text-xs mdContainer:text-sm lgContainer:text-base\"\r\n          >\r\n            <div className=\"flex items-center\">\r\n              <img\r\n                src=\"/cash-flow/tax.svg\"\r\n                height={(size.width > 860 && 25) || (size.width < 860 && size.width > 680 && 22) || (size.width < 680 && 18)}\r\n                width={(size.width > 860 && 25) || (size.width < 860 && size.width > 680 && 22) || (size.width < 680 && 18)}\r\n              />\r\n              <p className=\"ml-2\">Tax:</p>\r\n            </div>\r\n            <div className=\"flex\" style={{ textAlignLast: 'right' }}>\r\n              <input id=\"tax-input\" value={tax} className=\"w-full bg-white focus:outline-none\" />\r\n              <p>%</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div id=\"chartContainer\" className=\"w-full h-1/2 p-4 mdContainer:p-8 bg-white rounded-2xl mt-12 shadow-md\">\r\n          {/* <canvas ref={chartRef} height={75}></canvas> */}\r\n        </div>\r\n        <div className=\"w-full grid grid-cols-2fr grid-rows-3fr lg1Container:grid-cols-3fr lg1Container:grid-rows-2fr gap-x-6 smContainer:gap-x-12 gap-y-8 mt-12\">\r\n          <div className=\"w-full bg-white rounded-2xl py-3 px-3 mdContainer:py-3 mdContainer:px-4 lgContainer:px-6 lgContainer:py-4 shadow-md flex justify-between items-center text-xs mdContainer:text-sm lgContainer:text-base\">\r\n            <div className=\"flex items-center\">\r\n              <img\r\n                src=\"/cash-flow/revenue.svg\"\r\n                height={(size.width > 860 && 25) || (size.width < 860 && size.width > 680 && 22) || (size.width < 680 && 18)}\r\n                width={(size.width > 860 && 25) || (size.width < 860 && size.width > 680 && 22) || (size.width < 680 && 18)}\r\n              />\r\n              <p className=\"ml-2\">Total revenue:</p>\r\n            </div>\r\n            <p>${totalRevenue}</p>\r\n          </div>\r\n          <div className=\"w-full bg-white rounded-2xl py-3 px-3 mdContainer:py-3 mdContainer:px-4 lgContainer:px-6 lgContainer:py-4 shadow-md flex justify-between items-center text-xs mdContainer:text-sm lgContainer:text-base\">\r\n            <div className=\"flex items-center\">\r\n              <img\r\n                src=\"/cash-flow/monthly.svg\"\r\n                height={(size.width > 860 && 25) || (size.width < 860 && size.width > 680 && 22) || (size.width < 680 && 18)}\r\n                width={(size.width > 860 && 25) || (size.width < 860 && size.width > 680 && 22) || (size.width < 680 && 18)}\r\n              />\r\n              <p className=\"ml-2\">Monthly revenue:</p>\r\n            </div>\r\n            <p>${monthlyRevenue}</p>\r\n          </div>\r\n          <div className=\"w-full bg-white rounded-2xl py-3 px-3 mdContainer:py-3 mdContainer:px-4 lgContainer:px-6 lgContainer:py-4 shadow-md flex justify-between items-center text-xs mdContainer:text-sm lgContainer:text-base\">\r\n            <div className=\"flex items-center\">\r\n              <img\r\n                src=\"/cash-flow/costs.svg\"\r\n                height={(size.width > 860 && 25) || (size.width < 860 && size.width > 680 && 22) || (size.width < 680 && 18)}\r\n                width={(size.width > 860 && 25) || (size.width < 860 && size.width > 680 && 22) || (size.width < 680 && 18)}\r\n              />\r\n              <p className=\"ml-2\">Total costs:</p>\r\n            </div>\r\n            <p>${totalCosts}</p>\r\n          </div>\r\n          <div className=\"w-full bg-white rounded-2xl py-3 px-3 mdContainer:py-3 mdContainer:px-4 lgContainer:px-6 lgContainer:py-4 shadow-md flex justify-between items-center text-xs mdContainer:text-sm lgContainer:text-base\">\r\n            <div className=\"flex items-center\">\r\n              <img\r\n                src=\"/cash-flow/monthly-costs.svg\"\r\n                height={(size.width > 860 && 25) || (size.width < 860 && size.width > 680 && 22) || (size.width < 680 && 18)}\r\n                width={(size.width > 860 && 25) || (size.width < 860 && size.width > 680 && 22) || (size.width < 680 && 18)}\r\n              />\r\n              <p className=\"ml-2\">Monthly costs:</p>\r\n            </div>\r\n            <p>${monthlyCosts}</p>\r\n          </div>\r\n          <div className=\"w-full bg-white rounded-2xl py-3 px-3 mdContainer:py-3 mdContainer:px-4 lgContainer:px-6 lgContainer:py-4 shadow-md flex justify-between items-center text-xs mdContainer:text-sm lgContainer:text-base\">\r\n            <div className=\"flex items-center\">\r\n              <img\r\n                src=\"/cash-flow/megaphone.svg\"\r\n                height={(size.width > 860 && 25) || (size.width < 860 && size.width > 680 && 22) || (size.width < 680 && 18)}\r\n                width={(size.width > 860 && 25) || (size.width < 860 && size.width > 680 && 22) || (size.width < 680 && 18)}\r\n              />\r\n              <p className=\"ml-2\">Gross profit:</p>\r\n            </div>\r\n            <p>${grossProfit}</p>\r\n          </div>\r\n          <div className=\"w-full bg-white rounded-2xl py-3 px-3 mdContainer:py-3 mdContainer:px-4 lgContainer:px-6 lgContainer:py-4 shadow-md flex justify-between items-center text-xs mdContainer:text-sm lgContainer:text-base\">\r\n            <div className=\"flex items-center\">\r\n              <img\r\n                src=\"/cash-flow/net-worth.svg\"\r\n                height={(size.width > 860 && 25) || (size.width < 860 && size.width > 680 && 22) || (size.width < 680 && 18)}\r\n                width={(size.width > 860 && 25) || (size.width < 860 && size.width > 680 && 22) || (size.width < 680 && 18)}\r\n              />\r\n              <p className=\"ml-2\">Net profit:</p>\r\n            </div>\r\n            <p>${netProfit}</p>\r\n          </div>\r\n        </div>\r\n        {/* Revenue */}\r\n        <div\r\n          // ref={revenueRef}\r\n          style={{ height: 55 }}\r\n          className=\"overflow-hidden relative w-full rounded-2xl bg-white dark:bg-background px-4 py-4 flex justify-center items-center mt-12 flex flex-wrap shadow-md\"\r\n        >\r\n          <div className=\"w-full flex justify-between items-center\">\r\n            <div className=\"lgContainer:ml-2\">\r\n              <p className=\"text-sm lgContainer:text-base\">Revenue</p>\r\n            </div>\r\n            <div className=\"lgContainer:mr-2 flex flex-nowrap items-center\">\r\n              <img\r\n                className=\"cursor-pointer\"\r\n                src=\"/cash-flow/add.svg\"\r\n                height={(size.width > 860 && 22) || (size.width < 860 && size.width > 680 && 18) || (size.width < 680 && 16)}\r\n                width={(size.width > 860 && 22) || (size.width < 860 && size.width > 680 && 18) || (size.width < 680 && 16)}\r\n              />\r\n              <img\r\n                // ref={dropDownIcon}\r\n                // onClick={onRevenueShow}\r\n                className=\"ml-2 cursor-pointer\"\r\n                src=\"/cash-flow/dropdown.svg\"\r\n                height={(size.width > 860 && 22) || (size.width < 860 && size.width > 680 && 18) || (size.width < 680 && 16)}\r\n                width={(size.width > 860 && 22) || (size.width < 860 && size.width > 680 && 18) || (size.width < 680 && 16)}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div\r\n            // ref={innerContainerRevenueRef}\r\n            className={`w-full ${\r\n              size.width < 1120\r\n                ? 'text-sm mdContainer:text-base lg1Container:mx-8 lg1Container:mb-6 mt-4  bg-background rounded-2xl px-4 mdContainer:px-6 py-4'\r\n                : 'w-full mx-8 mb-6 mt-4  bg-background rounded-2xl px-4 mdContainer:px-6 py-4'\r\n            }`}\r\n          >\r\n            {/* <hr className=\"text-primary w-full\" /> */}\r\n            <div\r\n              style={{ fontSize: size.width < 520 && '0.6rem' }}\r\n              className=\"w-full grid grid-cols-6fr items-center text-xs mdContainer:text-sm lg1Container:text-base\"\r\n            >\r\n              <div>name</div>\r\n              <div>type</div>\r\n              <div>amount</div>\r\n              <div>start</div>\r\n              <div>end</div>\r\n              <div></div>\r\n            </div>\r\n            <hr className=\"text-primary w-full\" />\r\n            <div className=\"h-full w-full rounded-2xl flex flex-wrap flex-col\">\r\n              {revenueElements &&\r\n                revenueElements.map((element, index) => {\r\n                  return (\r\n                    <></>\r\n                    //   <RevenueElement\r\n                    //   provided={provided}\r\n                    //   setRevenueElements={setRevenueElements}\r\n                    //   mainDocument={mainDocument}\r\n                    //   projectId={projectId}\r\n                    //   documentId={documentId}\r\n                    //   revenueElements={revenueElements}\r\n                    //   element={element}\r\n                    //   index={index}\r\n                    // />\r\n                  );\r\n                })}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/* Costs */}\r\n        <div\r\n          // ref={costsRef}\r\n          style={{ height: 55 }}\r\n          className=\"overflow-hidden relative w-full rounded-2xl bg-white dark:bg-background px-4 py-4 flex justify-center items-center mt-8 flex flex-wrap shadow-md\"\r\n        >\r\n          <div className=\"w-full flex justify-between items-center\">\r\n            <div className=\"lgContainer:ml-2\">\r\n              <p className=\"text-sm lgContainer:text-base\">Costs</p>\r\n            </div>\r\n            <div className=\"lgContainer:mr-2 flex flex-nowrap items-center\">\r\n              <img\r\n                className=\"cursor-pointer\"\r\n                src=\"/cash-flow/add.svg\"\r\n                height={(size.width > 860 && 22) || (size.width < 860 && size.width > 680 && 18) || (size.width < 680 && 16)}\r\n                width={(size.width > 860 && 22) || (size.width < 860 && size.width > 680 && 18) || (size.width < 680 && 16)}\r\n              />\r\n              <img\r\n                className=\"ml-2 cursor-pointer\"\r\n                src=\"/cash-flow/dropdown.svg\"\r\n                height={(size.width > 860 && 22) || (size.width < 860 && size.width > 680 && 18) || (size.width < 680 && 16)}\r\n                width={(size.width > 860 && 22) || (size.width < 860 && size.width > 680 && 18) || (size.width < 680 && 16)}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div\r\n            className={`w-full ${\r\n              size.width < 1120\r\n                ? 'text-sm mdContainer:text-base lg1Container:mx-8 lg1Container:mb-6 mt-4  bg-background rounded-2xl px-4 mdContainer:px-6 py-4'\r\n                : 'w-full mx-8 mb-6 mt-4  bg-background rounded-2xl px-4 mdContainer:px-6 py-4'\r\n            }`}\r\n          >\r\n            {/* <hr className=\"text-primary w-full\" /> */}\r\n            <div className=\"w-full grid grid-cols-6fr items-center\">\r\n              <div>name</div>\r\n              <div>type</div>\r\n              <div>amount</div>\r\n              <div>start</div>\r\n              <div>end</div>\r\n              <div></div>\r\n            </div>\r\n            <hr className=\"text-primary w-full\" />\r\n            <div className=\"h-full w-full rounded-2xl flex flex-wrap flex-col\">\r\n              {costsElements &&\r\n                costsElements.map((element, index) => {\r\n                  return (\r\n                    <></>\r\n                    //   <CostsElement\r\n                    //   provided={provided}\r\n                    //   setCostsElements={setCostsElements}\r\n                    //   mainDocument={mainDocument}\r\n                    //   projectId={projectId}\r\n                    //   documentId={documentId}\r\n                    //   costsElements={costsElements}\r\n                    //   element={element}\r\n                    //   index={index}\r\n                    // />\r\n                  );\r\n                })}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const getStaticPaths = async () => {\r\n  const snapshot = await db.collection('projects').get();\r\n\r\n  const projects = [];\r\n  snapshot.forEach((doc) => {\r\n    projects.push(doc.data());\r\n  });\r\n\r\n  const paths = projects.map((project) => ({\r\n    params: {\r\n      project: project.projectName.toString(),\r\n      id: project.projectId.toString(),\r\n    },\r\n  }));\r\n\r\n  return {\r\n    paths: paths,\r\n    fallback: true,\r\n  };\r\n};\r\n\r\nexport const getStaticProps = async ({ params }) => {\r\n  console.log(params);\r\n  // let ref = db.collection('projects').where('projectName', '==', params.project);\r\n  let ref = db\r\n    .collection('projects')\r\n    .doc(params.id)\r\n    .collection('cashFlow')\r\n    .doc(params.project)\r\n    .collection('inputs')\r\n    .where('projectId', '==', params.id);\r\n\r\n  const snapshot = await ref.get();\r\n  const project = [];\r\n\r\n  snapshot.forEach((doc) => {\r\n    const data = JSON.parse(safeJsonStringify(doc.data()));\r\n    project.push({ ...data });\r\n  });\r\n\r\n  return {\r\n    props: { project },\r\n    revalidate: 1,\r\n  };\r\n};\r\n\r\nexport default UniqueCashflowPage;\r\n"]},"metadata":{},"sourceType":"module"}