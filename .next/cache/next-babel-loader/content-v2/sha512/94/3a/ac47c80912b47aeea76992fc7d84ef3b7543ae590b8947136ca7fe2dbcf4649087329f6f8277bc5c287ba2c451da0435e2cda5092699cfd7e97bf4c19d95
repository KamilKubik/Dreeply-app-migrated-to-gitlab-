{"ast":null,"code":"import _regeneratorRuntime from \"C:/off-saas/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/off-saas/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useEffect, useState, useRef } from 'react';\nimport { saveAs } from 'file-saver';\nimport ChartJsImage from 'chartjs-to-image';\nimport { format } from 'date-fns';\nimport Router from 'next/router';\nimport gsap, { Linear } from 'gsap';\nimport { useWindowSize } from '../../../../../../utils/useWindowSize';\nimport { Font, pdf, Page, Text, View, Image, Document, StyleSheet, PDFViewer, PDFDownloadLink } from '@react-pdf/renderer';\nFont.register({\n  src: '/fonts/poppins.ttf',\n  family: 'Poppins'\n});\nFont.register({\n  src: '/fonts/comfortaa.ttf',\n  family: 'Comfortaa'\n});\nvar styles = StyleSheet.create({\n  homePage: {\n    padding: 36,\n    fontFamily: 'Comfortaa',\n    backgroundColor: '#f8f9fb',\n    color: '#0a1230'\n  },\n  mainTitle: {\n    fontSize: 22,\n    color: '#0a1230',\n    textAlign: 'center'\n  },\n  mainGridData: {\n    color: '#0a1230',\n    fontSize: 12,\n    width: '100%',\n    marginTop: 52,\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  secondGridData: {\n    color: '#0a1230',\n    fontSize: 12,\n    width: '100%',\n    marginTop: 18,\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center'\n  }\n});\n\nvar MyDocument = function MyDocument(_ref) {\n  var image = _ref.image,\n      data = _ref.data,\n      periods = _ref.periods,\n      revenueElements = _ref.revenueElements,\n      costsElements = _ref.costsElements,\n      tax = _ref.tax,\n      totalRevenue = _ref.totalRevenue,\n      monthlyRevenue = _ref.monthlyRevenue,\n      totalCosts = _ref.totalCosts,\n      monthlyCosts = _ref.monthlyCosts,\n      grossProfit = _ref.grossProfit,\n      netProfit = _ref.netProfit,\n      startDate = _ref.startDate,\n      endDate = _ref.endDate;\n  return /*#__PURE__*/_jsx(Document, {\n    scale: 96 / 72,\n    renderMode: \"svg\",\n    children: /*#__PURE__*/_jsxs(Page, {\n      size: \"A4\",\n      style: styles.homePage,\n      children: [/*#__PURE__*/_jsx(View, {\n        children: /*#__PURE__*/_jsx(Text, {\n          style: styles.mainTitle,\n          children: \"Cash flow analysis\"\n        })\n      }), /*#__PURE__*/_jsxs(View, {\n        style: styles.mainGridData,\n        children: [/*#__PURE__*/_jsx(View, {\n          children: /*#__PURE__*/_jsxs(View, {\n            style: {\n              backgroundColor: '#fcfefe',\n              padding: 14,\n              display: 'flex',\n              flexDirection: 'row',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              borderRadius: 16,\n              width: 155\n            },\n            children: [/*#__PURE__*/_jsxs(View, {\n              style: {\n                display: 'flex',\n                flexDirection: 'row',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsx(Image, {\n                src: \"/cash-flow/png/calendar.png\",\n                style: {\n                  height: 16,\n                  width: 16\n                }\n              }), /*#__PURE__*/_jsx(Text, {\n                style: {\n                  marginLeft: 4\n                },\n                children: \"Start:\"\n              })]\n            }), /*#__PURE__*/_jsx(Text, {\n              children: data.startDate\n            })]\n          })\n        }), /*#__PURE__*/_jsxs(View, {\n          style: {\n            backgroundColor: '#fcfefe',\n            marginLeft: 30,\n            marginRight: 30,\n            padding: 14,\n            display: 'flex',\n            flexDirection: 'row',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            borderRadius: 16,\n            width: 155\n          },\n          children: [/*#__PURE__*/_jsxs(View, {\n            style: {\n              display: 'flex',\n              flexDirection: 'row',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsx(Image, {\n              src: \"/cash-flow/png/hourglass.png\",\n              style: {\n                height: 16,\n                width: 16\n              }\n            }), /*#__PURE__*/_jsx(Text, {\n              style: {\n                marginLeft: 4\n              },\n              children: \"End:\"\n            })]\n          }), /*#__PURE__*/_jsx(Text, {\n            children: data.endDate\n          })]\n        }), /*#__PURE__*/_jsxs(View, {\n          style: {\n            backgroundColor: '#fcfefe',\n            padding: 14,\n            display: 'flex',\n            flexDirection: 'row',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            borderRadius: 16,\n            width: 155\n          },\n          children: [/*#__PURE__*/_jsxs(View, {\n            style: {\n              display: 'flex',\n              flexDirection: 'row',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsx(Image, {\n              src: \"/cash-flow/png/tax.png\",\n              style: {\n                height: 16,\n                width: 16\n              }\n            }), /*#__PURE__*/_jsx(Text, {\n              style: {\n                marginLeft: 4\n              },\n              children: \"Tax:\"\n            })]\n          }), /*#__PURE__*/_jsxs(Text, {\n            children: [data.tax, \"%\"]\n          })]\n        })]\n      }), /*#__PURE__*/_jsx(View, {\n        style: {\n          marginTop: 18,\n          backgroundColor: '#fcfefe',\n          padding: 12,\n          borderRadius: 16\n        },\n        children: /*#__PURE__*/_jsx(Image, {\n          src: image\n        })\n      }), /*#__PURE__*/_jsxs(View, {\n        style: styles.secondGridData,\n        children: [/*#__PURE__*/_jsx(View, {\n          children: /*#__PURE__*/_jsxs(View, {\n            style: {\n              backgroundColor: '#fcfefe',\n              padding: 14,\n              display: 'flex',\n              flexDirection: 'row',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              borderRadius: 16,\n              width: 232.5\n            },\n            children: [/*#__PURE__*/_jsxs(View, {\n              style: {\n                display: 'flex',\n                flexDirection: 'row',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsx(Image, {\n                src: \"/cash-flow/png/gross-profit.png\",\n                style: {\n                  height: 16,\n                  width: 16\n                }\n              }), /*#__PURE__*/_jsx(Text, {\n                style: {\n                  marginLeft: 4\n                },\n                children: \"Gross profit:\"\n              })]\n            }), /*#__PURE__*/_jsxs(Text, {\n              children: [\"$\", grossProfit]\n            })]\n          })\n        }), /*#__PURE__*/_jsxs(View, {\n          style: {\n            backgroundColor: '#fcfefe',\n            marginLeft: 60,\n            padding: 14,\n            display: 'flex',\n            flexDirection: 'row',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            borderRadius: 16,\n            width: 232.5\n          },\n          children: [/*#__PURE__*/_jsxs(View, {\n            style: {\n              display: 'flex',\n              flexDirection: 'row',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsx(Image, {\n              src: \"/cash-flow/png/net-profit.png\",\n              style: {\n                height: 16,\n                width: 16\n              }\n            }), /*#__PURE__*/_jsx(Text, {\n              style: {\n                marginLeft: 4\n              },\n              children: \"Net profit\"\n            })]\n          }), /*#__PURE__*/_jsxs(Text, {\n            children: [\"$\", netProfit]\n          })]\n        })]\n      }), /*#__PURE__*/_jsxs(View, {\n        style: styles.secondGridData,\n        children: [/*#__PURE__*/_jsx(View, {\n          children: /*#__PURE__*/_jsxs(View, {\n            style: {\n              backgroundColor: '#fcfefe',\n              padding: 14,\n              display: 'flex',\n              flexDirection: 'row',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              borderRadius: 16,\n              width: 232.5\n            },\n            children: [/*#__PURE__*/_jsxs(View, {\n              style: {\n                display: 'flex',\n                flexDirection: 'row',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsx(Image, {\n                src: \"/cash-flow/png/total-revenue.png\",\n                style: {\n                  height: 16,\n                  width: 16\n                }\n              }), /*#__PURE__*/_jsx(Text, {\n                style: {\n                  marginLeft: 4\n                },\n                children: \"Total revenue:\"\n              })]\n            }), /*#__PURE__*/_jsxs(Text, {\n              children: [\"$\", totalRevenue]\n            })]\n          })\n        }), /*#__PURE__*/_jsxs(View, {\n          style: {\n            backgroundColor: '#fcfefe',\n            marginLeft: 60,\n            padding: 14,\n            display: 'flex',\n            flexDirection: 'row',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            borderRadius: 16,\n            width: 232.5\n          },\n          children: [/*#__PURE__*/_jsxs(View, {\n            style: {\n              display: 'flex',\n              flexDirection: 'row',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsx(Image, {\n              src: \"/cash-flow/png/monthly-revenue.png\",\n              style: {\n                height: 16,\n                width: 16\n              }\n            }), /*#__PURE__*/_jsx(Text, {\n              style: {\n                marginLeft: 4\n              },\n              children: \"Monthly revenue:\"\n            })]\n          }), /*#__PURE__*/_jsxs(Text, {\n            children: [\"$\", monthlyRevenue]\n          })]\n        })]\n      }), /*#__PURE__*/_jsxs(View, {\n        style: styles.secondGridData,\n        children: [/*#__PURE__*/_jsx(View, {\n          children: /*#__PURE__*/_jsxs(View, {\n            style: {\n              backgroundColor: '#fcfefe',\n              padding: 14,\n              display: 'flex',\n              flexDirection: 'row',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              borderRadius: 16,\n              width: 232.5\n            },\n            children: [/*#__PURE__*/_jsxs(View, {\n              style: {\n                display: 'flex',\n                flexDirection: 'row',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsx(Image, {\n                src: \"/cash-flow/png/total-costs.png\",\n                style: {\n                  height: 16,\n                  width: 16\n                }\n              }), /*#__PURE__*/_jsx(Text, {\n                style: {\n                  marginLeft: 4\n                },\n                children: \"Total costs:\"\n              })]\n            }), /*#__PURE__*/_jsxs(Text, {\n              children: [\"$\", totalCosts]\n            })]\n          })\n        }), /*#__PURE__*/_jsxs(View, {\n          style: {\n            backgroundColor: '#fcfefe',\n            marginLeft: 60,\n            padding: 14,\n            display: 'flex',\n            flexDirection: 'row',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            borderRadius: 16,\n            width: 232.5\n          },\n          children: [/*#__PURE__*/_jsxs(View, {\n            style: {\n              display: 'flex',\n              flexDirection: 'row',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsx(Image, {\n              src: \"/cash-flow/png/monthly-costs.png\",\n              style: {\n                height: 16,\n                width: 16\n              }\n            }), /*#__PURE__*/_jsx(Text, {\n              style: {\n                marginLeft: 4\n              },\n              children: \"Monthly costs:\"\n            })]\n          }), /*#__PURE__*/_jsxs(Text, {\n            children: [\"$\", monthlyCosts]\n          })]\n        })]\n      }), /*#__PURE__*/_jsxs(View, {\n        wrap: false,\n        style: {\n          backgroundColor: '#fcfefe',\n          borderRadius: 16,\n          padding: 16,\n          marginTop: 18\n        },\n        children: [/*#__PURE__*/_jsx(Text, {\n          style: {\n            fontSize: 14\n          },\n          children: \"Revenue\"\n        }), /*#__PURE__*/_jsxs(View, {\n          style: {\n            backgroundColor: '#f8f9fb',\n            borderRadius: 16,\n            padding: 16,\n            marginTop: 8\n          },\n          children: [/*#__PURE__*/_jsxs(View, {\n            style: {\n              display: 'flex',\n              flexDirection: 'row'\n            },\n            children: [/*#__PURE__*/_jsx(View, {\n              style: {\n                width: 145\n              },\n              children: /*#__PURE__*/_jsx(Text, {\n                style: {\n                  fontSize: 12\n                },\n                children: \"name\"\n              })\n            }), /*#__PURE__*/_jsx(View, {\n              style: {\n                width: 87\n              },\n              children: /*#__PURE__*/_jsx(Text, {\n                style: {\n                  fontSize: 12\n                },\n                children: \"type\"\n              })\n            }), /*#__PURE__*/_jsx(View, {\n              style: {\n                width: 87\n              },\n              children: /*#__PURE__*/_jsx(Text, {\n                style: {\n                  fontSize: 12\n                },\n                children: \"amount\"\n              })\n            }), /*#__PURE__*/_jsx(View, {\n              style: {\n                width: 87\n              },\n              children: /*#__PURE__*/_jsx(Text, {\n                style: {\n                  fontSize: 12\n                },\n                children: \"start\"\n              })\n            }), /*#__PURE__*/_jsx(View, {\n              style: {\n                width: 87\n              },\n              children: /*#__PURE__*/_jsx(Text, {\n                style: {\n                  fontSize: 12\n                },\n                children: \"end\"\n              })\n            })]\n          }), /*#__PURE__*/_jsx(View, {\n            style: {\n              width: '100%',\n              height: 1,\n              backgroundColor: '#6C63FF',\n              marginTop: 6\n            }\n          }), revenueElements && revenueElements.map(function (revenueElement) {\n            console.log(revenueElement);\n            var startDate = format(revenueElement.start.seconds * 1000, 'MMM / yyyy');\n            var endDate = format(revenueElement.end.seconds * 1000, 'MMM / yyyy');\n            return /*#__PURE__*/_jsxs(View, {\n              style: {\n                display: 'flex',\n                flexDirection: 'row',\n                marginTop: 6\n              },\n              children: [/*#__PURE__*/_jsxs(View, {\n                style: {\n                  width: 145,\n                  display: 'flex',\n                  flexDirection: 'row',\n                  alignItems: 'center'\n                },\n                children: [/*#__PURE__*/_jsx(View, {\n                  style: {\n                    width: 8,\n                    height: 8,\n                    backgroundColor: revenueElement.color,\n                    position: 'relative',\n                    right: 12,\n                    borderRadius: 16\n                  }\n                }), /*#__PURE__*/_jsx(Text, {\n                  style: {\n                    fontSize: 10,\n                    position: 'relative',\n                    right: 8\n                  },\n                  children: revenueElement.title\n                })]\n              }), /*#__PURE__*/_jsx(View, {\n                style: {\n                  width: 87\n                },\n                children: /*#__PURE__*/_jsx(Text, {\n                  style: {\n                    fontSize: 10\n                  },\n                  children: revenueElement.type\n                })\n              }), /*#__PURE__*/_jsx(View, {\n                style: {\n                  width: 87\n                },\n                children: /*#__PURE__*/_jsx(Text, {\n                  style: {\n                    fontSize: 10\n                  },\n                  children: revenueElement.value\n                })\n              }), /*#__PURE__*/_jsx(View, {\n                style: {\n                  width: 87\n                },\n                children: /*#__PURE__*/_jsx(Text, {\n                  style: {\n                    fontSize: 10\n                  },\n                  children: startDate\n                })\n              }), /*#__PURE__*/_jsx(View, {\n                style: {\n                  width: 87\n                },\n                children: revenueElement.type === 'Recurring' ? /*#__PURE__*/_jsx(Text, {\n                  style: {\n                    fontSize: 10\n                  },\n                  children: endDate\n                }) : /*#__PURE__*/_jsx(View, {\n                  style: {\n                    width: 50,\n                    height: '0.5px',\n                    backgroundColor: '#0a1230',\n                    marginTop: 5\n                  }\n                })\n              })]\n            });\n          })]\n        })]\n      }), /*#__PURE__*/_jsxs(View, {\n        wrap: false,\n        style: {\n          backgroundColor: '#fcfefe',\n          borderRadius: 16,\n          padding: 16,\n          marginTop: 18\n        },\n        children: [/*#__PURE__*/_jsx(Text, {\n          style: {\n            fontSize: 14\n          },\n          children: \"Costs\"\n        }), /*#__PURE__*/_jsxs(View, {\n          style: {\n            backgroundColor: '#f8f9fb',\n            borderRadius: 16,\n            padding: 16,\n            marginTop: 8\n          },\n          children: [/*#__PURE__*/_jsxs(View, {\n            style: {\n              display: 'flex',\n              flexDirection: 'row'\n            },\n            children: [/*#__PURE__*/_jsx(View, {\n              style: {\n                width: 145\n              },\n              children: /*#__PURE__*/_jsx(Text, {\n                style: {\n                  fontSize: 12\n                },\n                children: \"name\"\n              })\n            }), /*#__PURE__*/_jsx(View, {\n              style: {\n                width: 87\n              },\n              children: /*#__PURE__*/_jsx(Text, {\n                style: {\n                  fontSize: 12\n                },\n                children: \"type\"\n              })\n            }), /*#__PURE__*/_jsx(View, {\n              style: {\n                width: 87\n              },\n              children: /*#__PURE__*/_jsx(Text, {\n                style: {\n                  fontSize: 12\n                },\n                children: \"amount\"\n              })\n            }), /*#__PURE__*/_jsx(View, {\n              style: {\n                width: 87\n              },\n              children: /*#__PURE__*/_jsx(Text, {\n                style: {\n                  fontSize: 12\n                },\n                children: \"start\"\n              })\n            }), /*#__PURE__*/_jsx(View, {\n              style: {\n                width: 87\n              },\n              children: /*#__PURE__*/_jsx(Text, {\n                style: {\n                  fontSize: 12\n                },\n                children: \"end\"\n              })\n            })]\n          }), /*#__PURE__*/_jsx(View, {\n            style: {\n              width: '100%',\n              height: 1,\n              backgroundColor: '#6C63FF',\n              marginTop: 6\n            }\n          }), costsElements && costsElements.map(function (costsElement) {\n            console.log(costsElement);\n            var startDate = format(costsElement.start.seconds * 1000, 'MMM / yyyy');\n            var endDate = format(costsElement.end.seconds * 1000, 'MMM / yyyy');\n            return /*#__PURE__*/_jsxs(View, {\n              style: {\n                display: 'flex',\n                flexDirection: 'row',\n                marginTop: 6\n              },\n              children: [/*#__PURE__*/_jsxs(View, {\n                style: {\n                  width: 145,\n                  display: 'flex',\n                  flexDirection: 'row',\n                  alignItems: 'center'\n                },\n                children: [/*#__PURE__*/_jsx(View, {\n                  style: {\n                    width: 8,\n                    height: 8,\n                    backgroundColor: costsElement.color,\n                    position: 'relative',\n                    right: 12,\n                    borderRadius: 16\n                  }\n                }), /*#__PURE__*/_jsx(Text, {\n                  style: {\n                    fontSize: 10,\n                    position: 'relative',\n                    right: 8\n                  },\n                  children: costsElement.title\n                })]\n              }), /*#__PURE__*/_jsx(View, {\n                style: {\n                  width: 87\n                },\n                children: /*#__PURE__*/_jsx(Text, {\n                  style: {\n                    fontSize: 10\n                  },\n                  children: costsElement.type\n                })\n              }), /*#__PURE__*/_jsx(View, {\n                style: {\n                  width: 87\n                },\n                children: /*#__PURE__*/_jsx(Text, {\n                  style: {\n                    fontSize: 10\n                  },\n                  children: costsElement.value\n                })\n              }), /*#__PURE__*/_jsx(View, {\n                style: {\n                  width: 87\n                },\n                children: /*#__PURE__*/_jsx(Text, {\n                  style: {\n                    fontSize: 10\n                  },\n                  children: startDate\n                })\n              }), /*#__PURE__*/_jsx(View, {\n                style: {\n                  width: 87\n                },\n                children: /*#__PURE__*/_jsx(Text, {\n                  style: {\n                    fontSize: 10\n                  },\n                  children: endDate\n                })\n              })]\n            });\n          })]\n        })]\n      })]\n    })\n  });\n};\n\nvar CashFlowPDF = function CashFlowPDF(_ref2) {\n  var data = _ref2.data,\n      periods = _ref2.periods,\n      revenueElements = _ref2.revenueElements,\n      costsElements = _ref2.costsElements,\n      tax = _ref2.tax,\n      totalRevenue = _ref2.totalRevenue,\n      monthlyRevenue = _ref2.monthlyRevenue,\n      totalCosts = _ref2.totalCosts,\n      monthlyCosts = _ref2.monthlyCosts,\n      grossProfit = _ref2.grossProfit,\n      netProfit = _ref2.netProfit,\n      startDate = _ref2.startDate,\n      endDate = _ref2.endDate;\n\n  var _useState = useState(),\n      imageUrl = _useState[0],\n      setImageUrl = _useState[1];\n\n  useEffect(function () {\n    var revenueDataset = [];\n    var testArray = []; // const monthData = periods && periods.map(() => null);\n\n    revenueElements && revenueElements.map(function (revenueElement, index) {\n      var monthData = periods && periods.map(function () {\n        return null;\n      });\n      console.log(revenueElement);\n      periods && periods.map(function (period, periodIndex) {\n        revenueElement.periods.map(function (revenuePeriod) {\n          if (period == revenuePeriod) {\n            if (monthData[periodIndex] == null) {\n              monthData[periodIndex] = revenueElement.value;\n            }\n          }\n        });\n      });\n      console.log(monthData);\n      testArray.push(monthData);\n      revenueDataset.push({\n        label: \"revenue / \".concat(revenueElement.title),\n        data: monthData,\n        backgroundColor: revenueElement.color,\n        borderColor: revenueElement.color\n      });\n    }); // Costs datasets\n\n    var costsDataset = [];\n    costsElements && costsElements.map(function (costsElement, index) {\n      var monthData = periods && periods.map(function () {\n        return null;\n      });\n      console.log(costsElement);\n      periods && periods.map(function (period, periodIndex) {\n        costsElement.periods.map(function (costsPeriod) {\n          if (period == costsPeriod) {\n            if (monthData[periodIndex] == null) {\n              monthData[periodIndex] = -costsElement.value;\n            }\n          }\n        });\n      });\n      console.log(monthData);\n      testArray.push(monthData);\n      costsDataset.push({\n        label: \"costs / \".concat(costsElement.title),\n        data: monthData,\n        backgroundColor: costsElement.color,\n        borderColor: costsElement.color\n      });\n    }); // ----------------------\n    // Revenue\n\n    var revenueArray = [];\n    revenueDataset.length !== 0 && revenueDataset.length !== 0 && revenueDataset.map(function (element) {\n      return revenueArray.push(element.data && element.data.map(function (data) {\n        if (data !== null) {\n          return parseInt(data);\n        } else {\n          return 0;\n        }\n      }));\n    });\n    var calculatedRevenueArray = revenueArray.length !== 0 && revenueArray[0] !== undefined && revenueArray.reduce(function (a, b) {\n      return a.map(function (c, i) {\n        return c + b[i];\n      });\n    }); // Costs\n\n    var costsArray = [];\n    costsDataset.length !== 0 && costsDataset.length !== 0 && costsDataset.map(function (element) {\n      return costsArray.push(element.data && element.data.map(function (data) {\n        if (data !== null) {\n          return parseInt(data);\n        } else {\n          return 0;\n        }\n      }));\n    });\n    var calculatedCostsArray = costsArray.length !== 0 && costsArray[0] !== undefined && costsArray.reduce(function (a, b) {\n      return a.map(function (c, i) {\n        return c + b[i];\n      });\n    }); // Final value\n\n    var finalArray = [calculatedRevenueArray, calculatedCostsArray]; // Check if any array is falsy\n\n    var calculatedFinalArray = finalArray && finalArray.map(function (array) {\n      if (!array) {\n        var zeroArray = [];\n        periods && periods.map(function (period) {\n          return zeroArray.push(0);\n        });\n        return zeroArray;\n      } else {\n        return array;\n      }\n    });\n    var finalDataBeforeTax = calculatedFinalArray.length !== 0 && calculatedFinalArray.reduce(function (a, b) {\n      return a && b && a.map(function (c, i) {\n        return c + b[i];\n      });\n    });\n    var finalDataAfterTax = finalDataBeforeTax && finalDataBeforeTax.map(function (data) {\n      return data - tax / 100 * data;\n    });\n    console.log(finalDataAfterTax);\n    var toSaveChart = new ChartJsImage();\n    toSaveChart.setConfig({\n      type: 'bar',\n      data: {\n        labels: periods && periods,\n        datasets: [{\n          type: 'line',\n          label: 'Net profit',\n          data: finalDataAfterTax,\n          backgroundColor: 'rgba(10, 18, 48, 1)',\n          borderColor: 'rgba(10, 18, 48, 1)',\n          fill: 0,\n          lineTension: 0,\n          borderWidth: 1,\n          pointRadius: 2\n        }].concat(revenueDataset, costsDataset)\n      },\n      options: {\n        skipNull: true,\n        responsive: true,\n        maintainAspectRatio: false,\n        bezierCurve: false,\n        legend: {\n          labels: {\n            boxWidth: 30,\n            boxHeight: 5,\n            fontFamily: 'Comfortaa',\n            fontSize: 12\n          }\n        },\n        scales: {\n          xAxes: [{\n            stacked: true,\n            ticks: {\n              fontFamily: 'Comfortaa',\n              fontSize: 10,\n              beginAtZero: true\n            }\n          }],\n          yAxes: [{\n            stacked: true,\n            ticks: {\n              fontFamily: 'Comfortaa',\n              fontSize: 10,\n              beginAtZero: true,\n              callback: function callback(value) {\n                return '$' + value;\n              }\n            }\n          }]\n        }\n      }\n    });\n    toSaveChart.setHeight(200).setFormat('png').setDevicePixelRatio(2.0).setBackgroundColor('#fcfefe');\n    var imageUrl = toSaveChart.toDataUrl();\n    imageUrl.then(function (image) {\n      return setImageUrl(image);\n    });\n  }, [data, periods, revenueElements, costsElements, tax, totalRevenue, monthlyRevenue, totalCosts, monthlyCosts, grossProfit, netProfit, startDate, endDate]);\n  var saveContainer = useRef();\n  var size = useWindowSize();\n  var dropdownButton = useRef();\n  var dropdownContainer = useRef();\n\n  var _useState2 = useState(false),\n      dropdownButtonColorHelper = _useState2[0],\n      setDropdownButtonColorHelper = _useState2[1];\n\n  var _useState3 = useState(false),\n      dropdownContainerHelper = _useState3[0],\n      setDropdownContainerHelper = _useState3[1];\n\n  var onSaveDropdownShow = function onSaveDropdownShow() {\n    if (!dropdownContainerHelper) {\n      gsap.to(dropdownContainer.current, {\n        autoAlpha: 1,\n        duration: 1,\n        ease: Linear\n      }); // gsap.to(dropdownButton.current, { backgroundColor: '#6C63FF', color: '#f8f9fb', duration: 1, ease: Linear });\n\n      setDropdownContainerHelper(true);\n      setDropdownButtonColorHelper(true);\n    } else if (dropdownContainerHelper) {\n      gsap.to(dropdownContainer.current, {\n        autoAlpha: 0,\n        duration: 1,\n        ease: Linear\n      }); // gsap.to(dropdownButton.current, { backgroundColor: '#f8f9fb', color: '#6C63FF', duration: 1, ease: Linear });\n\n      setDropdownContainerHelper(false);\n      setDropdownButtonColorHelper(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsx(\"div\", {\n    ref: saveContainer,\n    className: \"relative flex justify-start\",\n    children: size.width < 680 ? /*#__PURE__*/_jsx(\"div\", {\n      className: \"flex mt-4\",\n      children: /*#__PURE__*/_jsx(\"img\", {\n        onClick: /*#__PURE__*/function () {\n          var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n            var doc, asPdf, blob;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    e.preventDefault();\n                    doc = /*#__PURE__*/_jsx(MyDocument, {\n                      image: imageUrl,\n                      data: data,\n                      periods: periods,\n                      revenueElements: revenueElements,\n                      costsElements: costsElements,\n                      tax: tax,\n                      totalRevenue: totalRevenue,\n                      monthlyRevenue: monthlyRevenue,\n                      totalCosts: totalCosts,\n                      monthlyCosts: monthlyCosts,\n                      grossProfit: grossProfit,\n                      netProfit: netProfit,\n                      startDate: startDate,\n                      endDate: endDate\n                    });\n                    asPdf = pdf([]); // {} is important, throws without an argument\n\n                    asPdf.updateContainer(doc);\n                    _context.next = 6;\n                    return asPdf.toBlob();\n\n                  case 6:\n                    blob = _context.sent;\n                    saveAs(blob, \"\".concat(Router.query.project, \"/cash-flow.pdf\"));\n\n                  case 8:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n\n          return function (_x) {\n            return _ref3.apply(this, arguments);\n          };\n        }(),\n        src: \"/mobile-navbar/pdf.svg\",\n        height: 30,\n        width: 30\n      })\n    }) : /*#__PURE__*/_jsxs(\"div\", {\n      className: \"relative w-full flex justify-end items-center\",\n      children: [/*#__PURE__*/_jsx(\"button\", {\n        ref: dropdownButton,\n        onClick: onSaveDropdownShow,\n        className: \"hover:bg-primary hover:text-white dark:hover:bg-primarydark dark:hover:text-background focus:outline-none border border-primary text-primary text-sm font-light py-2 px-8 rounded-2xl mt-2 dark:text-primarydark dark:border-primarydark \".concat(dropdownButtonColorHelper ? 'bg-primary text-background dark:bg-primarydark dark:text-background' : ''),\n        children: \"Save my work\"\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        ref: dropdownContainer,\n        className: \"absolute bg-white rounded-2xl shadow-xl p-6 top-14 z-50 invisible opacity-0\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex items-center justify-start\",\n          children: [/*#__PURE__*/_jsx(\"img\", {\n            src: \"/mobile-navbar/success.svg\",\n            height: 26,\n            width: 26\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"text-lg ml-2\",\n            children: \"Show the world your work!\"\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"px-6 py-4 bg-background rounded-2xl mt-2 pr-6\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: \"flex\",\n              children: \"Save as PDF:\"\n            }), /*#__PURE__*/_jsx(\"img\", {\n              onClick: /*#__PURE__*/function () {\n                var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n                  var doc, asPdf, blob;\n                  return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          e.preventDefault();\n                          doc = /*#__PURE__*/_jsx(MyDocument, {\n                            competitors: competitors\n                          });\n                          asPdf = pdf([]);\n                          asPdf.updateContainer(doc);\n                          _context2.next = 6;\n                          return asPdf.toBlob();\n\n                        case 6:\n                          blob = _context2.sent;\n                          saveAs(blob, \"\".concat(Router.query.project, \"/competitors-analysis.pdf\"));\n\n                        case 8:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2);\n                }));\n\n                return function (_x2) {\n                  return _ref4.apply(this, arguments);\n                };\n              }(),\n              src: \"/mobile-navbar/pdf.svg\",\n              height: 30,\n              width: 30,\n              className: \"mt-2 cursor-pointer\"\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"w-full justify-start items-center mt-4\",\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              children: \"Share your competitors analysis with this public link:\"\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"w-full flex mt-2\",\n              children: [/*#__PURE__*/_jsx(\"input\", {\n                value: \"www.project.com\",\n                className: \"bg-linkBackground text-sm px-2 py-1 dark:text-primarydark\"\n              }), /*#__PURE__*/_jsx(\"img\", {\n                src: \"/mobile-navbar/foreign.svg\",\n                height: 28,\n                width: 28\n              })]\n            })]\n          })]\n        })]\n      })]\n    })\n  });\n};\n\nexport default CashFlowPDF;","map":null,"metadata":{},"sourceType":"module"}