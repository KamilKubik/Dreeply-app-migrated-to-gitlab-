{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"C:/off-saas/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/off-saas/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"C:/off-saas/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _jsxFileName = \"C:\\\\off-saas\\\\components\\\\dashboard\\\\startup\\\\project\\\\business-plan\\\\Container.js\",\n    _this = this,\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport gsap, { Power4 } from 'gsap';\nimport NavbarTemplate from '../../../NavbarTemplate';\nimport SectionManager from './SectionManager';\nimport fetcher from '../../../../../utils/fetcher';\nimport { useRouter } from 'next/router';\nimport useSWR from 'swr';\nimport { useAuth } from '../../../../../lib/newAuth';\nimport firebase, { db } from '../../../../../lib/firebase';\nimport InputElement from './InputElement';\nimport DisplayedData from './DisplayedData';\nimport { v4 as uuidv4 } from 'uuid';\n\nvar BusinessPlanContainer = function BusinessPlanContainer() {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  var _useState = useState('Startup overview'),\n      activeSection = _useState[0],\n      setActiveSection = _useState[1];\n\n  var _useState2 = useState(),\n      businessPlan = _useState2[0],\n      setBusinessPlan = _useState2[1];\n\n  var _useState3 = useState(),\n      projectId = _useState3[0],\n      setProjectId = _useState3[1];\n\n  var containerRef = useRef();\n\n  var _useState4 = useState(),\n      particularSection = _useState4[0],\n      setParticularSection = _useState4[1]; // PROJECT\n\n\n  var _useState5 = useState(),\n      ProjectPathName = _useState5[0],\n      setProjectPathName = _useState5[1];\n\n  var _useAuth = useAuth(),\n      currentUser = _useAuth.currentUser;\n\n  var router = useRouter();\n\n  var _useState6 = useState(),\n      sections = _useState6[0],\n      setSections = _useState6[1];\n\n  var _useState7 = useState(),\n      sections1 = _useState7[0],\n      setSections1 = _useState7[1];\n\n  var ref = db.collection('currentBusinessPlan');\n  useEffect(function () {\n    // PROJECT ID\n    // const gcp = async () => {\n    //   // const gcpdata = await db.collection('currentProject').doc('uid', '==', currentUser.uid).get();\n    //   await db\n    //     .collection('projects')\n    //     .where('uid', '==', currentUser.uid)\n    //     .where('projectName', '==', router.query.project)\n    //     .get()\n    //     .then((querySnapshot) => {\n    //       querySnapshot.forEach((doc) => {\n    //         return setProjectId(doc.data().projectId);\n    //       });\n    //     });\n    // };\n    // gcp()\n    ref.doc(currentUser.uid).collection('data').where('name', '==', activeSection).onSnapshot(function (querySnapshot) {\n      var items = [];\n      querySnapshot.forEach(function (doc) {\n        console.log(doc.data());\n        items.push.apply(items, _toConsumableArray(doc.data().values)); // setSections1(doc.data());\n      });\n      setSections1(items);\n    }); // GSAP\n\n    gsap.fromTo(containerRef.current, {\n      autoAlpha: 0\n    }, {\n      autoAlpha: 1,\n      duration: 2,\n      ease: Power4.easeOut\n    });\n  }, [activeSection]); // useEffect(() => {\n  //   // PARTICULAR SECTION\n  //   const item = sections && sections.find((doc) => doc.name == activeSection);\n  //   setParticularSection(item);\n  // }, [activeSection]);\n\n  console.log('CONTAINER SECTIONS - ', sections);\n\n  var doingMyBest = function doingMyBest() {\n    _s();\n\n    var _useSWR = useSWR(currentUser && projectId ? [\"/api/business-plan/\".concat(projectId), currentUser.token] : null, fetcher),\n        data = _useSWR.data; // return setBusinessPlan(data);\n    // console.log(data);\n\n\n    useMemo(function () {\n      return data && data.map(function (project) {\n        // useMemo jest po to, żeby nie było rerenderów (w sensie wyskakuje wtedy błąd, że za dużo renderowań)\n        setBusinessPlan(project);\n        setProjectPathName(project.pathName);\n      });\n    }, [data]);\n  };\n\n  _s(doingMyBest, \"80pa3d4mkHQ6nYeXlvblfuyH4J8=\", false, function () {\n    return [useSWR];\n  });\n\n  doingMyBest(); // console.log('PROJECT ID --> ', projectId);\n\n  console.log('OFFICIAL DATA --> ', businessPlan); // console.log('PROJECT PATHNAME FROM SWR --> ', ProjectPathName);\n\n  console.log('ACTIVE SECTION', activeSection);\n  console.log('PARTICULAR SECTION --> ', particularSection);\n\n  var _useState8 = useState(),\n      dataFromInput = _useState8[0],\n      setDataFromInput = _useState8[1];\n\n  var _useState9 = useState(),\n      changedData = _useState9[0],\n      setChangedData = _useState9[1];\n\n  console.log('DATA FROM INPUT --> ', dataFromInput); // ON ADD NEW INPUT\n\n  var addNewInput = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var dataToUpload;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              // Add new section to data collection\n              dataToUpload = dataFromInput ? dataFromInput : {\n                inputs: []\n              }; //   setSections1(null);\n              //   await sections1.sections.push({ blocks: [] });\n              //   await db\n              //     .collection('currentBusinessPlan')\n              //     .doc(currentUser.uid)\n              //     .collection('data')\n              //     .doc(activeSection)\n              //     .update({\n              //       sections1\n              //     })\n              // };\n\n              setSections1(null);\n              _context.next = 4;\n              return db.collection('currentBusinessPlan').doc(currentUser.uid).collection('data').doc(activeSection).update({\n                values: firebase.firestore.FieldValue.arrayUnion({\n                  blocks: [],\n                  id: uuidv4(),\n                  type: 'textarea'\n                })\n              });\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function addNewInput() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  console.log('SECTIONS1', sections1);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(NavbarTemplate, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: containerRef,\n        className: \"min-h-screen w-full relative flex flex-col items-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full max-w-full relative mt-16 px-32\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 grid-rows-1 grid-flow-col\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                height: \"30\",\n                width: \"30\",\n                className: \"fill-current text-primary dark:text-primarydark\",\n                xmlns: \"http://www.w3.org/2000/svg\",\n                viewBox: \"0 0 128 128\",\n                children: [/*#__PURE__*/_jsxDEV(\"title\", {\n                  children: \"Landing Success\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 19\n                }, _this), /*#__PURE__*/_jsxDEV(\"g\", {\n                  id: \"Landing_Success\",\n                  \"data-name\": \"Landing Success\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    className: \"cls-1\",\n                    d: \"M109.3,90.1A46,46,0,0,0,65,36V20.08c1.78-.62,7.21-2.14,12.57.23a19.33,19.33,0,0,0,14.82,0c.87-.38.61.31.61-17.93a1,1,0,0,0-1.43-.93c-.07,0-6.69,2.87-13.18,0A19.41,19.41,0,0,0,65,.93,1,1,0,0,0,63,1V36a45.86,45.86,0,0,0-28.66,10.8C16.18,40.48,4,40,.79,45.51-2.29,50.86,3.94,59.3,10,65.68A11,11,0,0,0,18,83c.81,38.41,46.08,59.2,75.66,34.21,8.53,3,29,9.15,33.55,1.31C130.39,113,123.86,102.65,109.3,90.1ZM77.59,3.31A19.39,19.39,0,0,0,91,3.83V18.68c-1.79.62-7.22,2.13-12.57-.23A19.19,19.19,0,0,0,65,17.93V3.08C66.81,2.46,72.24,1,77.59,3.31ZM65,45v-7c39.69.91,58,50.27,28.21,76.81C71.32,107,46,92.66,27.77,78.64a11,11,0,0,0-3.2-16.13A43.88,43.88,0,0,1,63,38.06V45A1,1,0,0,0,65,45ZM32.55,48.36a46.21,46.21,0,0,0-9.83,13.28,10.93,10.93,0,0,0-11.4,2.47C-8.39,43.23,5.23,39.08,32.55,48.36ZM10,72a9,9,0,1,1,9,9A9,9,0,0,1,10,72Zm10,11a11,11,0,0,0,6.34-2.82c18.45,14.21,43.45,28.35,65.05,36.22C63,139.16,20.83,119.1,20.05,83Zm105.4,34.5c-2.51,4.35-14,3.62-30-1.85a45.61,45.61,0,0,0,13.42-23.21C121.59,103.58,128,113.12,125.45,117.47Z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 169,\n                    columnNumber: 21\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 19\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-primarydark text-2xl mt-2 pl-2 dark:text-background\",\n                children: \"Business plan\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-end mt-4\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"hover:bg-primary hover:text-white dark:hover:bg-primarydark dark:hover:text-background focus:outline-none border border-primary text-primary text-sm font-light py-2 px-8 rounded-2xl mt-2 dark:text-primarydark dark:border-primarydark\",\n                children: \"Settings\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 17\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-secondary text-md text-gray\",\n              children: \"Create your business plan any way you want\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-8fr grid-flow-col\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-start-1 col-end-7 w-full mt-12\",\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"text-primarydark text-base dark:text-background\",\n                children: \"Manage your input\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative flex flex-col h-full w-full flex px-8 pt-8 pb-4 rounded-2xl bg-white dark:bg-background mt-1\",\n                children: [sections1 && sections1.map(function (section) {\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      children: \"Sections below:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 202,\n                      columnNumber: 27\n                    }, _this), /*#__PURE__*/_jsxDEV(InputElement, {\n                      setDataFromInput: setDataFromInput,\n                      data: section\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 203,\n                      columnNumber: 27\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 201,\n                    columnNumber: 25\n                  }, _this);\n                }), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: addNewInput,\n                    children: \"Add Item\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 211,\n                    columnNumber: 21\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 19\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(SectionManager, {\n              setSections1: setSections1,\n              setDataFromInput: setDataFromInput,\n              dataFromInput: dataFromInput,\n              activeSection: activeSection,\n              setActiveSection: setActiveSection\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false);\n};\n\n_s2(BusinessPlanContainer, \"ILKUYx62sb7f63xiwyxWRDtZkUk=\", false, function () {\n  return [useAuth, useRouter];\n});\n\n_c = BusinessPlanContainer;\nexport default BusinessPlanContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"BusinessPlanContainer\");","map":{"version":3,"sources":["C:/off-saas/components/dashboard/startup/project/business-plan/Container.js"],"names":["React","useEffect","useMemo","useRef","useState","gsap","Power4","NavbarTemplate","SectionManager","fetcher","useRouter","useSWR","useAuth","firebase","db","InputElement","DisplayedData","v4","uuidv4","BusinessPlanContainer","activeSection","setActiveSection","businessPlan","setBusinessPlan","projectId","setProjectId","containerRef","particularSection","setParticularSection","ProjectPathName","setProjectPathName","currentUser","router","sections","setSections","sections1","setSections1","ref","collection","doc","uid","where","onSnapshot","querySnapshot","items","forEach","console","log","data","push","values","fromTo","current","autoAlpha","duration","ease","easeOut","doingMyBest","token","map","project","pathName","dataFromInput","setDataFromInput","changedData","setChangedData","addNewInput","dataToUpload","inputs","update","firestore","FieldValue","arrayUnion","blocks","id","type","section"],"mappings":"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","sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from 'react';\r\nimport gsap, { Power4 } from 'gsap';\r\nimport NavbarTemplate from '../../../NavbarTemplate';\r\nimport SectionManager from './SectionManager';\r\nimport fetcher from '../../../../../utils/fetcher';\r\nimport { useRouter } from 'next/router';\r\nimport useSWR from 'swr';\r\nimport { useAuth } from '../../../../../lib/newAuth';\r\nimport firebase, { db } from '../../../../../lib/firebase';\r\nimport InputElement from './InputElement';\r\nimport DisplayedData from './DisplayedData';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nconst BusinessPlanContainer = () => {\r\n  const [activeSection, setActiveSection] = useState('Startup overview');\r\n\r\n  const [businessPlan, setBusinessPlan] = useState();\r\n  const [projectId, setProjectId] = useState();\r\n  const containerRef = useRef();\r\n\r\n  const [particularSection, setParticularSection] = useState();\r\n\r\n  // PROJECT\r\n  const [ProjectPathName, setProjectPathName] = useState();\r\n\r\n  const { currentUser } = useAuth();\r\n  const router = useRouter();\r\n\r\n  const [sections, setSections] = useState();\r\n  const [sections1, setSections1] = useState();\r\n\r\n  const ref = db.collection('currentBusinessPlan');\r\n\r\n  useEffect(() => {\r\n    // PROJECT ID\r\n    // const gcp = async () => {\r\n    //   // const gcpdata = await db.collection('currentProject').doc('uid', '==', currentUser.uid).get();\r\n    //   await db\r\n    //     .collection('projects')\r\n    //     .where('uid', '==', currentUser.uid)\r\n    //     .where('projectName', '==', router.query.project)\r\n    //     .get()\r\n    //     .then((querySnapshot) => {\r\n    //       querySnapshot.forEach((doc) => {\r\n    //         return setProjectId(doc.data().projectId);\r\n    //       });\r\n    //     });\r\n    // };\r\n\r\n    // gcp()\r\n\r\n    ref\r\n      .doc(currentUser.uid)\r\n      .collection('data')\r\n      .where('name', '==', activeSection)\r\n      .onSnapshot((querySnapshot) => {\r\n        const items = [];\r\n        querySnapshot.forEach((doc) => {\r\n          console.log(doc.data());\r\n          items.push(...doc.data().values);\r\n          // setSections1(doc.data());\r\n        });\r\n        setSections1(items);\r\n      });\r\n\r\n    // GSAP\r\n    gsap.fromTo(\r\n      containerRef.current,\r\n      { autoAlpha: 0 },\r\n      { autoAlpha: 1, duration: 2, ease: Power4.easeOut }\r\n    );\r\n  }, [activeSection]);\r\n\r\n  // useEffect(() => {\r\n  //   // PARTICULAR SECTION\r\n  //   const item = sections && sections.find((doc) => doc.name == activeSection);\r\n  //   setParticularSection(item);\r\n  // }, [activeSection]);\r\n\r\n  console.log('CONTAINER SECTIONS - ', sections);\r\n\r\n  const doingMyBest = () => {\r\n    const { data } = useSWR(\r\n      currentUser && projectId\r\n        ? [`/api/business-plan/${projectId}`, currentUser.token]\r\n        : null,\r\n      fetcher\r\n    );\r\n    // return setBusinessPlan(data);\r\n    // console.log(data);\r\n    useMemo(\r\n      () =>\r\n        data &&\r\n        data.map((project) => {\r\n          // useMemo jest po to, żeby nie było rerenderów (w sensie wyskakuje wtedy błąd, że za dużo renderowań)\r\n          setBusinessPlan(project);\r\n          setProjectPathName(project.pathName);\r\n        }),\r\n      [data]\r\n    );\r\n  };\r\n  doingMyBest();\r\n\r\n  // console.log('PROJECT ID --> ', projectId);\r\n  console.log('OFFICIAL DATA --> ', businessPlan);\r\n  // console.log('PROJECT PATHNAME FROM SWR --> ', ProjectPathName);\r\n\r\n  console.log('ACTIVE SECTION', activeSection);\r\n  console.log('PARTICULAR SECTION --> ', particularSection);\r\n  const [dataFromInput, setDataFromInput] = useState();\r\n  const [changedData, setChangedData] = useState();\r\n  console.log('DATA FROM INPUT --> ', dataFromInput);\r\n\r\n  // ON ADD NEW INPUT\r\n  const addNewInput = async () => {\r\n    // Add new section to data collection\r\n\r\n    const dataToUpload = dataFromInput ? dataFromInput : { inputs: [] };\r\n    //   setSections1(null);\r\n\r\n    //   await sections1.sections.push({ blocks: [] });\r\n\r\n    //   await db\r\n    //     .collection('currentBusinessPlan')\r\n    //     .doc(currentUser.uid)\r\n    //     .collection('data')\r\n    //     .doc(activeSection)\r\n    //     .update({\r\n    //       sections1\r\n    //     })\r\n    // };\r\n    setSections1(null);\r\n\r\n    await db\r\n      .collection('currentBusinessPlan')\r\n      .doc(currentUser.uid)\r\n      .collection('data')\r\n      .doc(activeSection)\r\n      .update({\r\n        values: firebase.firestore.FieldValue.arrayUnion({\r\n          blocks: [],\r\n          id: uuidv4(),\r\n          type: 'textarea',\r\n        }),\r\n      });\r\n  };\r\n\r\n  console.log('SECTIONS1', sections1);\r\n\r\n  return (\r\n    <>\r\n      <NavbarTemplate>\r\n        <div\r\n          ref={containerRef}\r\n          className='min-h-screen w-full relative flex flex-col items-center'\r\n        >\r\n          <div className='w-full max-w-full relative mt-16 px-32'>\r\n            <div className='grid grid-cols-2 grid-rows-1 grid-flow-col'>\r\n              <div className='flex items-center'>\r\n                <svg\r\n                  height='30'\r\n                  width='30'\r\n                  className='fill-current text-primary dark:text-primarydark'\r\n                  xmlns='http://www.w3.org/2000/svg'\r\n                  viewBox='0 0 128 128'\r\n                >\r\n                  <title>Landing Success</title>\r\n                  <g id='Landing_Success' data-name='Landing Success'>\r\n                    <path\r\n                      className='cls-1'\r\n                      d='M109.3,90.1A46,46,0,0,0,65,36V20.08c1.78-.62,7.21-2.14,12.57.23a19.33,19.33,0,0,0,14.82,0c.87-.38.61.31.61-17.93a1,1,0,0,0-1.43-.93c-.07,0-6.69,2.87-13.18,0A19.41,19.41,0,0,0,65,.93,1,1,0,0,0,63,1V36a45.86,45.86,0,0,0-28.66,10.8C16.18,40.48,4,40,.79,45.51-2.29,50.86,3.94,59.3,10,65.68A11,11,0,0,0,18,83c.81,38.41,46.08,59.2,75.66,34.21,8.53,3,29,9.15,33.55,1.31C130.39,113,123.86,102.65,109.3,90.1ZM77.59,3.31A19.39,19.39,0,0,0,91,3.83V18.68c-1.79.62-7.22,2.13-12.57-.23A19.19,19.19,0,0,0,65,17.93V3.08C66.81,2.46,72.24,1,77.59,3.31ZM65,45v-7c39.69.91,58,50.27,28.21,76.81C71.32,107,46,92.66,27.77,78.64a11,11,0,0,0-3.2-16.13A43.88,43.88,0,0,1,63,38.06V45A1,1,0,0,0,65,45ZM32.55,48.36a46.21,46.21,0,0,0-9.83,13.28,10.93,10.93,0,0,0-11.4,2.47C-8.39,43.23,5.23,39.08,32.55,48.36ZM10,72a9,9,0,1,1,9,9A9,9,0,0,1,10,72Zm10,11a11,11,0,0,0,6.34-2.82c18.45,14.21,43.45,28.35,65.05,36.22C63,139.16,20.83,119.1,20.05,83Zm105.4,34.5c-2.51,4.35-14,3.62-30-1.85a45.61,45.61,0,0,0,13.42-23.21C121.59,103.58,128,113.12,125.45,117.47Z'\r\n                    />\r\n                  </g>\r\n                </svg>\r\n                <p className='text-primarydark text-2xl mt-2 pl-2 dark:text-background'>\r\n                  Business plan\r\n                </p>\r\n              </div>\r\n              <div className='flex justify-end mt-4'>\r\n                <button className='hover:bg-primary hover:text-white dark:hover:bg-primarydark dark:hover:text-background focus:outline-none border border-primary text-primary text-sm font-light py-2 px-8 rounded-2xl mt-2 dark:text-primarydark dark:border-primarydark'>\r\n                  Settings\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <h1 className='text-secondary text-md text-gray'>\r\n                Create your business plan any way you want\r\n              </h1>\r\n            </div>\r\n            {/* SECTIONS */}\r\n            <div className='grid grid-cols-8fr grid-flow-col'>\r\n              <div className='col-start-1 col-end-7 w-full mt-12'>\r\n                <h1 className='text-primarydark text-base dark:text-background'>\r\n                  Manage your input\r\n                </h1>\r\n                <div className='relative flex flex-col h-full w-full flex px-8 pt-8 pb-4 rounded-2xl bg-white dark:bg-background mt-1'>\r\n                  {/* ACTIVE SECTION */}\r\n                  {sections1 &&\r\n                    sections1.map((section) => {\r\n                      return (\r\n                        <div>\r\n                          <p>Sections below:</p>\r\n                          <InputElement\r\n                            setDataFromInput={setDataFromInput}\r\n                            data={section}\r\n                          />\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  <div>\r\n                    <button onClick={addNewInput}>Add Item</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <SectionManager\r\n                setSections1={setSections1}\r\n                setDataFromInput={setDataFromInput}\r\n                dataFromInput={dataFromInput}\r\n                activeSection={activeSection}\r\n                setActiveSection={setActiveSection}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </NavbarTemplate>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BusinessPlanContainer;\r\n"]},"metadata":{},"sourceType":"module"}