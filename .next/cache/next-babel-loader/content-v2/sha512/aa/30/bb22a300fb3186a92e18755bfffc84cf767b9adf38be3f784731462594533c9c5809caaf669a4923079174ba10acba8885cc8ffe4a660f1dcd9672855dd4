{"ast":null,"code":"import Router from 'next/router';\nimport { db } from '../../../../../../../lib/firebase'; // Add new section\n\nexport const newSectionPage = async (title, sections, setSelectedSection) => {\n  const section = {\n    position: this.state.sections.length,\n    title: title,\n    body: ''\n  };\n  const newFromDB = await db.collection('projects').doc(this.state.projectId).collection('businessPlan').doc(Router.query.project).collection('inputs').add({\n    position: section.position,\n    title: section.title,\n    // body: section.body,\n    fields: [],\n    timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n    createdAt: new Date()\n  });\n  const newID = newFromDB.id; // await this.setState({ sections: [...this.state.sections, section] });\n\n  const newSectionIndex = sections.indexOf(sections.filter(_section => _section.id === newID)[0]);\n  setSelectedSection(sections[newSectionIndex]);\n}; // Select section\n\nexport const selectSectionPage = (section, index, setSelectedSection) => setSelectedSection(section);","map":{"version":3,"sources":["C:/off-saas/components/dashboard/startup/project/business-app/business-plan/businessPlanUtils/sections.js"],"names":["Router","db","newSectionPage","title","sections","setSelectedSection","section","position","state","length","body","newFromDB","collection","doc","projectId","query","project","add","fields","timestamp","firebase","firestore","FieldValue","serverTimestamp","createdAt","Date","newID","id","newSectionIndex","indexOf","filter","_section","selectSectionPage","index"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,aAAnB;AACA,SAASC,EAAT,QAAmB,mCAAnB,C,CAEA;;AACA,OAAO,MAAMC,cAAc,GAAG,OAAOC,KAAP,EAAcC,QAAd,EAAwBC,kBAAxB,KAA+C;AAC3E,QAAMC,OAAO,GAAG;AACdC,IAAAA,QAAQ,EAAE,KAAKC,KAAL,CAAWJ,QAAX,CAAoBK,MADhB;AAEdN,IAAAA,KAAK,EAAEA,KAFO;AAGdO,IAAAA,IAAI,EAAE;AAHQ,GAAhB;AAKA,QAAMC,SAAS,GAAG,MAAMV,EAAE,CACvBW,UADqB,CACV,UADU,EAErBC,GAFqB,CAEjB,KAAKL,KAAL,CAAWM,SAFM,EAGrBF,UAHqB,CAGV,cAHU,EAIrBC,GAJqB,CAIjBb,MAAM,CAACe,KAAP,CAAaC,OAJI,EAKrBJ,UALqB,CAKV,QALU,EAMrBK,GANqB,CAMjB;AACHV,IAAAA,QAAQ,EAAED,OAAO,CAACC,QADf;AAEHJ,IAAAA,KAAK,EAAEG,OAAO,CAACH,KAFZ;AAGH;AACAe,IAAAA,MAAM,EAAE,EAJL;AAKHC,IAAAA,SAAS,EAAEC,QAAQ,CAACC,SAAT,CAAmBC,UAAnB,CAA8BC,eAA9B,EALR;AAMHC,IAAAA,SAAS,EAAE,IAAIC,IAAJ;AANR,GANiB,CAAxB;AAcA,QAAMC,KAAK,GAAGf,SAAS,CAACgB,EAAxB,CApB2E,CAqB3E;;AACA,QAAMC,eAAe,GAAGxB,QAAQ,CAACyB,OAAT,CAAiBzB,QAAQ,CAAC0B,MAAT,CAAiBC,QAAD,IAAcA,QAAQ,CAACJ,EAAT,KAAgBD,KAA9C,EAAqD,CAArD,CAAjB,CAAxB;AACArB,EAAAA,kBAAkB,CAACD,QAAQ,CAACwB,eAAD,CAAT,CAAlB;AACD,CAxBM,C,CA0BP;;AACA,OAAO,MAAMI,iBAAiB,GAAG,CAAC1B,OAAD,EAAU2B,KAAV,EAAiB5B,kBAAjB,KAAwCA,kBAAkB,CAACC,OAAD,CAApF","sourcesContent":["import Router from 'next/router';\r\nimport { db } from '../../../../../../../lib/firebase';\r\n\r\n// Add new section\r\nexport const newSectionPage = async (title, sections, setSelectedSection) => {\r\n  const section = {\r\n    position: this.state.sections.length,\r\n    title: title,\r\n    body: '',\r\n  };\r\n  const newFromDB = await db\r\n    .collection('projects')\r\n    .doc(this.state.projectId)\r\n    .collection('businessPlan')\r\n    .doc(Router.query.project)\r\n    .collection('inputs')\r\n    .add({\r\n      position: section.position,\r\n      title: section.title,\r\n      // body: section.body,\r\n      fields: [],\r\n      timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n      createdAt: new Date(),\r\n    });\r\n  const newID = newFromDB.id;\r\n  // await this.setState({ sections: [...this.state.sections, section] });\r\n  const newSectionIndex = sections.indexOf(sections.filter((_section) => _section.id === newID)[0]);\r\n  setSelectedSection(sections[newSectionIndex]);\r\n};\r\n\r\n// Select section\r\nexport const selectSectionPage = (section, index, setSelectedSection) => setSelectedSection(section);\r\n"]},"metadata":{},"sourceType":"module"}