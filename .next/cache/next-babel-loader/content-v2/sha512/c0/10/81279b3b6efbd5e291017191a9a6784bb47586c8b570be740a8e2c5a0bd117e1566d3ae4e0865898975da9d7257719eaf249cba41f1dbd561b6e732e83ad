{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\off-saas\\\\components\\\\dashboard\\\\startup\\\\project\\\\business-app\\\\Editor.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport dynamic from 'next/dynamic'; // import debounce from 'lodash/debounce';\n// import debounce from '../../../../../utils/helpers';\n// import debounce from 'lodash/debounce';\n\nimport debounce from '../../../../../utils/helpers';\nimport { useStateWithPromise } from '../../../../../utils/useStateWithPromise';\nimport { useCustomState } from '../../../../../utils/useCustomState';\nconst ReactQuill = dynamic(() => import('react-quill'), {\n  ssr: false,\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('react-quill')],\n    modules: [\"..\\\\components\\\\dashboard\\\\startup\\\\project\\\\business-app\\\\Editor.js -> \" + 'react-quill']\n  }\n});\nimport '../../../../../node_modules/react-quill/dist/quill.snow.css';\nimport '../../../../../node_modules/react-quill/dist/quill.bubble.css';\nimport '../../../../../node_modules/react-quill/dist/quill.core.css';\nimport Image from 'next/image';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd'; // import { useRechartToPng } from 'recharts-to-png';\n\nimport FileSaver from 'file-saver';\nimport ChartJsComponent from './Chartjs'; // import ReactChart from './ReachChart';\n\nimport gsap, { Power4, Linear } from 'gsap';\nimport HeaderComponent from './Header';\nimport TextElement from './Text';\nimport TableElement from './Table';\nimport SpacingElement from './Spacing';\nimport Router from 'next/router';\nimport Cookies from 'js-cookie';\nimport { db } from '../../../../../lib/firebase';\n\nconst EditorInputElement = ({\n  sectionTitleUpdate,\n  tableUpdate,\n  headerUpdate,\n  reorderElements,\n  projectId,\n  addChart,\n  addNewHeader,\n  chartTypeUpdate,\n  onDatasetLabel6Update,\n  onDatasetLabel5Update,\n  onDatasetLabel4Update,\n  onDatasetLabel3Update,\n  onDatasetLabel2Update,\n  onDatasetLabel1Update,\n  onDataset6Update,\n  onDataset5Update,\n  onDataset4Update,\n  onDataset3Update,\n  onDataset2Update,\n  onDataset1Update,\n  chartLabelsUpdate,\n  chartValueUpdate,\n  addNewChart,\n  deleteParticularField,\n  addNewField,\n  fieldUpdate,\n  sectionUpdate,\n  selectedSection,\n  selectedSectionIndex,\n  sections\n}) => {\n  const {\n    0: title,\n    1: setTitle\n  } = useState('');\n  const {\n    0: text,\n    1: setText\n  } = useState('');\n  const {\n    0: id,\n    1: setId\n  } = useState('');\n  const {\n    0: currentIndex,\n    1: setCurrentIndex\n  } = useState(null);\n  const {\n    0: lastSectionIndex,\n    1: setLastSectionIndex\n  } = useState(null); // const [currentSectionIndex, setCurrentSectionIndex] = useState(null);\n\n  const {\n    0: fetchedSections,\n    1: setFetchedSections\n  } = useState();\n  useEffect(async () => {\n    const userUid = await Cookies.get('uid'); // console.log(Router.query.project);\n\n    if (userUid && Router.query.project) {\n      console.log(userUid);\n      const data = await db.collection('projects').where('uid', '==', userUid);\n      data.where('projectName', '==', Router.query.project).get().then(querySnapshot => {\n        querySnapshot.forEach(async doc1 => {\n          // setProjectId(doc1.data().projectId);\n          await db.collection('projects').doc(doc1.data().projectId).collection('businessPlan').doc(Router.query.project).collection('inputs').onSnapshot(serverUpdate => {\n            serverUpdate.docs.map(doc => {\n              console.log(doc.data());\n              setFetchedSections(doc.data().fields);\n            });\n          });\n        });\n      });\n    }\n  }, [Router.query.project]);\n  console.log(fetchedSections);\n\n  const onLeftBarShow = () => {\n    // --- VERSION 2 ---\n    // CONTAINERS\n    gsap.to(document.getElementById('container'), {\n      autoAlpha: 1\n    });\n    gsap.to(document.getElementById('container1'), {\n      autoAlpha: 1\n    });\n    gsap.to(document.getElementById('container2'), {\n      autoAlpha: 1\n    });\n    gsap.to(document.getElementById('container3'), {\n      autoAlpha: 1\n    });\n    gsap.to(document.getElementById('container4'), {\n      autoAlpha: 1\n    }); // LEFT BAR\n\n    gsap.to(document.getElementById('left-bar'), {\n      height: '100vh',\n      transformOrigin: 'top',\n      duration: 2,\n      ease: Linear\n    }); // EXIT\n\n    gsap.to(document.getElementById('exit'), {\n      autoAlpha: 1,\n      duration: 1,\n      ease: Linear,\n      delay: 2\n    }); // IMAGES\n\n    gsap.to(document.getElementById('left-element'), {\n      zIndex: 50,\n      scale: 1,\n      transformOrigin: 'top',\n      duration: 1,\n      ease: Linear,\n      delay: 0.3\n    });\n    gsap.to(document.getElementById('left-element1'), {\n      zIndex: 50,\n      scale: 1,\n      transformOrigin: 'top',\n      duration: 1,\n      ease: Linear,\n      delay: 0.5\n    });\n    gsap.to(document.getElementById('left-element2'), {\n      zIndex: 50,\n      scale: 1,\n      transformOrigin: 'top',\n      duration: 1,\n      ease: Linear,\n      delay: 0.7\n    });\n    gsap.to(document.getElementById('left-element3'), {\n      zIndex: 50,\n      scale: 1,\n      transformOrigin: 'top',\n      duration: 1,\n      ease: Linear,\n      delay: 0.9\n    });\n    gsap.to(document.getElementById('left-element4'), {\n      zIndex: 50,\n      scale: 1,\n      transformOrigin: 'top',\n      duration: 1,\n      ease: Linear,\n      delay: 1.1\n    }); // TEXT\n\n    gsap.to(document.getElementById('left-text'), {\n      zIndex: 50,\n      scale: 1,\n      transformOrigin: 'top',\n      duration: 1,\n      ease: Linear,\n      delay: 0.3\n    });\n    gsap.to(document.getElementById('left-text1'), {\n      zIndex: 50,\n      scale: 1,\n      transformOrigin: 'top',\n      duration: 1,\n      ease: Linear,\n      delay: 0.5\n    });\n    gsap.to(document.getElementById('left-text2'), {\n      zIndex: 50,\n      scale: 1,\n      transformOrigin: 'top',\n      duration: 1,\n      ease: Linear,\n      delay: 0.7\n    });\n    gsap.to(document.getElementById('left-text3'), {\n      zIndex: 50,\n      scale: 1,\n      transformOrigin: 'top',\n      duration: 1,\n      ease: Linear,\n      delay: 0.9\n    });\n    gsap.to(document.getElementById('left-text4'), {\n      zIndex: 50,\n      scale: 1,\n      transformOrigin: 'top',\n      duration: 1,\n      ease: Linear,\n      delay: 1.1\n    });\n  };\n\n  const deleteField = index => {\n    deleteParticularField(index);\n  };\n\n  const updateTitle = async title => {\n    await setTitle(title);\n    onSectionTitleUpdate(title);\n  };\n\n  const onSectionTitleUpdate = useCallback(debounce(data => {\n    sectionTitleUpdate(data);\n  }, 500), []);\n  const labelUpdate = useCallback(debounce(async data => {\n    const currentSectionIndex = await data.selSection.fields.findIndex(field => field.index == data.index);\n    console.log(data);\n    chartLabelsUpdate(data, data.index, currentSectionIndex, data.selSection);\n  }, 500), []); // Dataset1 update\n\n  const dataset1Update = useCallback(debounce(async data => {\n    const currentSectionIndex = await data.selSection.fields.findIndex(field => field.index == data.index);\n    console.log(data);\n    onDataset1Update(data, data.index, currentSectionIndex, data.selSection);\n  }, 500), []); // Dataset2 update\n\n  const dataset2Update = useCallback(debounce(async data => {\n    const currentSectionIndex = await data.selSection.fields.findIndex(field => field.index == data.index);\n    console.log(data);\n    onDataset2Update(data, data.index, currentSectionIndex, data.selSection);\n  }, 500), []); // Dataset3 update\n\n  const dataset3Update = useCallback(debounce(async data => {\n    const currentSectionIndex = await data.selSection.fields.findIndex(field => field.index == data.index);\n    console.log(data);\n    onDataset3Update(data, data.index, currentSectionIndex, data.selSection);\n  }, 500), []); // Dataset4 update\n\n  const dataset4Update = useCallback(debounce(async data => {\n    const currentSectionIndex = await data.selSection.fields.findIndex(field => field.index == data.index);\n    console.log(data);\n    onDataset4Update(data, data.index, currentSectionIndex, data.selSection);\n  }, 500), []); // Dataset5 update\n\n  const dataset5Update = useCallback(debounce(async data => {\n    const currentSectionIndex = await data.selSection.fields.findIndex(field => field.index == data.index);\n    console.log(data);\n    onDataset5Update(data, data.index, currentSectionIndex, data.selSection);\n  }, 500), []); // Dataset6 update\n\n  const dataset6Update = useCallback(debounce(async data => {\n    const currentSectionIndex = await data.selSection.fields.findIndex(field => field.index == data.index);\n    console.log(data);\n    onDataset6Update(data, data.index, currentSectionIndex, data.selSection);\n  }, 500), []); // Dataset labels update\n\n  const datasetLabel1Update = useCallback(debounce(async data => {\n    const currentSectionIndex = await data.selSection.fields.findIndex(field => field.index == data.index);\n    console.log(data);\n    onDatasetLabel1Update(data, data.index, currentSectionIndex, data.selSection);\n  }, 500), []);\n  const datasetLabel2Update = useCallback(debounce(async data => {\n    const currentSectionIndex = await data.selSection.fields.findIndex(field => field.index == data.index);\n    console.log(data);\n    onDatasetLabel2Update(data, data.index, currentSectionIndex, data.selSection);\n  }, 500), []);\n  const datasetLabel3Update = useCallback(debounce(async data => {\n    const currentSectionIndex = await data.selSection.fields.findIndex(field => field.index == data.index);\n    console.log(data);\n    onDatasetLabel3Update(data, data.index, currentSectionIndex, data.selSection);\n  }, 500), []);\n  const datasetLabel4Update = useCallback(debounce(async data => {\n    const currentSectionIndex = await data.selSection.fields.findIndex(field => field.index == data.index);\n    console.log(data);\n    onDatasetLabel4Update(data, data.index, currentSectionIndex, data.selSection);\n  }, 500), []);\n  const datasetLabel5Update = useCallback(debounce(async data => {\n    const currentSectionIndex = await data.selSection.fields.findIndex(field => field.index == data.index);\n    console.log(data);\n    onDatasetLabel5Update(data, data.index, currentSectionIndex, data.selSection);\n  }, 500), []);\n  const datasetLabel6Update = useCallback(debounce(async data => {\n    const currentSectionIndex = await data.selSection.fields.findIndex(field => field.index == data.index);\n    console.log(data);\n    onDatasetLabel6Update(data, data.index, currentSectionIndex, data.selSection);\n  }, 500), []);\n  useEffect(() => {\n    setCurrentIndex(null); // selectedSection.fields możesz wyrzucić\n  }, [selectedSection.id, selectedSection.fields]);\n  useEffect(() => {\n    if (selectedSection.id !== id) {\n      setTitle(selectedSection.title); // setText(selectedSection.body);\n      // setId(selectedSection.id);\n    }\n  }, [selectedSection.id]); // useEffect(() => {\n  //   setCurrentIndex()\n  // }, [currentIndex])\n  // console.log(selectedSection);\n  // console.log(currentIndex);\n\n  console.log(selectedSection); // const [png, ref] = useRechartToPng();\n  // const fn = useCallback(async () => {\n  //   FileSaver.saveAs(png, 'myChart.png');\n  //   console.log(png);\n  // }, [png]);\n\n  const containerRef = useRef();\n  console.log('Selected section --> ', selectedSection); // Elements manager\n\n  const {\n    0: elementsArray,\n    1: setElementsArray\n  } = useState();\n  useEffect(() => {\n    // elementsArray !== selectedSection.fields\n    setElementsArray(selectedSection.fields); // if (elementsArray !== selectedSection.fields) {\n    //   console.log('Yeeeeep');\n    //   setElementsArray(selectedSection.fields);\n    // }\n  }, []);\n\n  const handleOnDragEnd = result => {\n    if (!result.destination) return;\n    const items = Array.from(elementsArray);\n    const [reorderedItem] = items.splice(result.source.index, 1);\n    items.splice(result.destination.index, 0, reorderedItem); // console.log(result);\n    // setElementsArray(items);\n\n    setFetchedSections(items);\n    reorderElements(items);\n  };\n\n  console.log('Important --> ', elementsArray);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative flex flex-col h-full w-full flex px-2 py-2 rounded-2xl bg-white dark:bg-background mt-1\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full px-3 bg-white py-3 rounded-2xl flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"text-lg bg-white focus:outline-none w-3/5 text-primarydark\",\n            placeholder: \"Section title...\",\n            value: title ? title : '',\n            onChange: e => updateTitle(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end items-center w-2/5\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-primarydark text-basae mr-4 pl-2\",\n              children: \"New element\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Image, {\n              onClick: onLeftBarShow,\n              src: \"/chart/pencil.svg\",\n              height: 40,\n              width: 40\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DragDropContext, {\n      onDragEnd: handleOnDragEnd,\n      children: /*#__PURE__*/_jsxDEV(Droppable, {\n        droppableId: \"elements\",\n        children: provided => /*#__PURE__*/_jsxDEV(\"div\", _objectSpread(_objectSpread({\n          className: \"elements\"\n        }, provided.droppableProps), {}, {\n          ref: provided.innerRef,\n          className: \"w-full flex justify-center items-center flex-col\",\n          children: [fetchedSections && fetchedSections.length !== 0 && fetchedSections.map((field, currentIndex) => {\n            console.log('FIELD --> ', field);\n            return /*#__PURE__*/_jsxDEV(Draggable, {\n              draggableId: field.index,\n              index: currentIndex,\n              children: provided => field.type == 'text' && /*#__PURE__*/_jsxDEV(TextElement, {\n                fieldUpdate: fieldUpdate,\n                currentIndex: currentIndex,\n                selectedSection: selectedSection,\n                provided: provided,\n                field: field,\n                deleteField: deleteField,\n                setCurrentIndex: setCurrentIndex\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 394,\n                columnNumber: 27\n              }, this) || field.type == 'chart' && /*#__PURE__*/_jsxDEV(ChartJsComponent, {\n                provided: provided,\n                projectId: projectId,\n                addChart: addChart,\n                chartTypeUpdate: chartTypeUpdate,\n                currentIndex: currentIndex,\n                deleteField: deleteField,\n                containerRef: containerRef,\n                datasetLabel6Update: datasetLabel6Update,\n                datasetLabel5Update: datasetLabel5Update,\n                datasetLabel4Update: datasetLabel4Update,\n                datasetLabel3Update: datasetLabel3Update,\n                datasetLabel2Update: datasetLabel2Update,\n                datasetLabel1Update: datasetLabel1Update,\n                dataset6Update: dataset6Update,\n                dataset5Update: dataset5Update,\n                dataset4Update: dataset4Update,\n                dataset3Update: dataset3Update,\n                dataset2Update: dataset2Update,\n                dataset1Update: dataset1Update,\n                labelUpdate: labelUpdate,\n                chartLabelsUpdate: chartLabelsUpdate,\n                field: field,\n                selectedSection: selectedSection,\n                index: field.index,\n                chartValueUpdate: chartValueUpdate,\n                selectedSection: selectedSection\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 405,\n                columnNumber: 27\n              }, this) || field.type == 'header' && /*#__PURE__*/_jsxDEV(HeaderComponent, {\n                fieldUpdate: fieldUpdate,\n                currentIndex: currentIndex,\n                headerUpdate: headerUpdate,\n                provided: provided,\n                deleteField: deleteField,\n                field: field\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 435,\n                columnNumber: 27\n              }, this) || field.type == 'table' && /*#__PURE__*/_jsxDEV(TableElement, {\n                currentIndex: currentIndex,\n                tableUpdate: tableUpdate,\n                deleteField: deleteField,\n                provided: provided,\n                field: field\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 445,\n                columnNumber: 27\n              }, this) || field.type == 'spacing' && /*#__PURE__*/_jsxDEV(SpacingElement, {\n                deleteField: deleteField,\n                provided: provided,\n                field: field\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 453,\n                columnNumber: 53\n              }, this)\n            }, field.index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 21\n            }, this);\n          }), provided.placeholder]\n        }), void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\nexport default EditorInputElement;","map":{"version":3,"sources":["C:/off-saas/components/dashboard/startup/project/business-app/Editor.js"],"names":["React","useCallback","useEffect","useMemo","useRef","useState","dynamic","debounce","useStateWithPromise","useCustomState","ReactQuill","ssr","Image","DragDropContext","Droppable","Draggable","FileSaver","ChartJsComponent","gsap","Power4","Linear","HeaderComponent","TextElement","TableElement","SpacingElement","Router","Cookies","db","EditorInputElement","sectionTitleUpdate","tableUpdate","headerUpdate","reorderElements","projectId","addChart","addNewHeader","chartTypeUpdate","onDatasetLabel6Update","onDatasetLabel5Update","onDatasetLabel4Update","onDatasetLabel3Update","onDatasetLabel2Update","onDatasetLabel1Update","onDataset6Update","onDataset5Update","onDataset4Update","onDataset3Update","onDataset2Update","onDataset1Update","chartLabelsUpdate","chartValueUpdate","addNewChart","deleteParticularField","addNewField","fieldUpdate","sectionUpdate","selectedSection","selectedSectionIndex","sections","title","setTitle","text","setText","id","setId","currentIndex","setCurrentIndex","lastSectionIndex","setLastSectionIndex","fetchedSections","setFetchedSections","userUid","get","query","project","console","log","data","collection","where","then","querySnapshot","forEach","doc1","doc","onSnapshot","serverUpdate","docs","map","fields","onLeftBarShow","to","document","getElementById","autoAlpha","height","transformOrigin","duration","ease","delay","zIndex","scale","deleteField","index","updateTitle","onSectionTitleUpdate","labelUpdate","currentSectionIndex","selSection","findIndex","field","dataset1Update","dataset2Update","dataset3Update","dataset4Update","dataset5Update","dataset6Update","datasetLabel1Update","datasetLabel2Update","datasetLabel3Update","datasetLabel4Update","datasetLabel5Update","datasetLabel6Update","containerRef","elementsArray","setElementsArray","handleOnDragEnd","result","destination","items","Array","from","reorderedItem","splice","source","e","target","value","provided","droppableProps","innerRef","length","type","placeholder"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,WAAhB,EAA6BC,SAA7B,EAAwCC,OAAxC,EAAiDC,MAAjD,EAAyDC,QAAzD,QAAyE,OAAzE;AACA,OAAOC,OAAP,MAAoB,cAApB,C,CACA;AACA;AACA;;AACA,OAAOC,QAAP,MAAqB,8BAArB;AACA,SAASC,mBAAT,QAAoC,0CAApC;AACA,SAASC,cAAT,QAA+B,qCAA/B;AACA,MAAMC,UAAU,GAAGJ,OAAO,CAAC,MAAM,OAAO,aAAP,CAAP,EAA8B;AAAEK,EAAAA,GAAG,EAAE,KAAP;AAAA;AAAA,wCAAhB,aAAgB;AAAA,2FAAhB,aAAgB;AAAA;AAAA,CAA9B,CAA1B;AACA,OAAO,6DAAP;AACA,OAAO,+DAAP;AACA,OAAO,6DAAP;AACA,OAAOC,KAAP,MAAkB,YAAlB;AACA,SAASC,eAAT,EAA0BC,SAA1B,EAAqCC,SAArC,QAAsD,qBAAtD,C,CAEA;;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,gBAAP,MAA6B,WAA7B,C,CACA;;AACA,OAAOC,IAAP,IAAeC,MAAf,EAAuBC,MAAvB,QAAqC,MAArC;AACA,OAAOC,eAAP,MAA4B,UAA5B;AACA,OAAOC,WAAP,MAAwB,QAAxB;AACA,OAAOC,YAAP,MAAyB,SAAzB;AACA,OAAOC,cAAP,MAA2B,WAA3B;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,SAASC,EAAT,QAAmB,6BAAnB;;AAEA,MAAMC,kBAAkB,GAAG,CAAC;AAC1BC,EAAAA,kBAD0B;AAE1BC,EAAAA,WAF0B;AAG1BC,EAAAA,YAH0B;AAI1BC,EAAAA,eAJ0B;AAK1BC,EAAAA,SAL0B;AAM1BC,EAAAA,QAN0B;AAO1BC,EAAAA,YAP0B;AAQ1BC,EAAAA,eAR0B;AAS1BC,EAAAA,qBAT0B;AAU1BC,EAAAA,qBAV0B;AAW1BC,EAAAA,qBAX0B;AAY1BC,EAAAA,qBAZ0B;AAa1BC,EAAAA,qBAb0B;AAc1BC,EAAAA,qBAd0B;AAe1BC,EAAAA,gBAf0B;AAgB1BC,EAAAA,gBAhB0B;AAiB1BC,EAAAA,gBAjB0B;AAkB1BC,EAAAA,gBAlB0B;AAmB1BC,EAAAA,gBAnB0B;AAoB1BC,EAAAA,gBApB0B;AAqB1BC,EAAAA,iBArB0B;AAsB1BC,EAAAA,gBAtB0B;AAuB1BC,EAAAA,WAvB0B;AAwB1BC,EAAAA,qBAxB0B;AAyB1BC,EAAAA,WAzB0B;AA0B1BC,EAAAA,WA1B0B;AA2B1BC,EAAAA,aA3B0B;AA4B1BC,EAAAA,eA5B0B;AA6B1BC,EAAAA,oBA7B0B;AA8B1BC,EAAAA;AA9B0B,CAAD,KA+BrB;AACJ,QAAM;AAAA,OAACC,KAAD;AAAA,OAAQC;AAAR,MAAoBvD,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM;AAAA,OAACwD,IAAD;AAAA,OAAOC;AAAP,MAAkBzD,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM;AAAA,OAAC0D,EAAD;AAAA,OAAKC;AAAL,MAAc3D,QAAQ,CAAC,EAAD,CAA5B;AACA,QAAM;AAAA,OAAC4D,YAAD;AAAA,OAAeC;AAAf,MAAkC7D,QAAQ,CAAC,IAAD,CAAhD;AACA,QAAM;AAAA,OAAC8D,gBAAD;AAAA,OAAmBC;AAAnB,MAA0C/D,QAAQ,CAAC,IAAD,CAAxD,CALI,CAMJ;;AACA,QAAM;AAAA,OAACgE,eAAD;AAAA,OAAkBC;AAAlB,MAAwCjE,QAAQ,EAAtD;AAEAH,EAAAA,SAAS,CAAC,YAAY;AACpB,UAAMqE,OAAO,GAAG,MAAM7C,OAAO,CAAC8C,GAAR,CAAY,KAAZ,CAAtB,CADoB,CAEpB;;AACA,QAAID,OAAO,IAAI9C,MAAM,CAACgD,KAAP,CAAaC,OAA5B,EAAqC;AACnCC,MAAAA,OAAO,CAACC,GAAR,CAAYL,OAAZ;AACA,YAAMM,IAAI,GAAG,MAAMlD,EAAE,CAACmD,UAAH,CAAc,UAAd,EAA0BC,KAA1B,CAAgC,KAAhC,EAAuC,IAAvC,EAA6CR,OAA7C,CAAnB;AACAM,MAAAA,IAAI,CACDE,KADH,CACS,aADT,EACwB,IADxB,EAC8BtD,MAAM,CAACgD,KAAP,CAAaC,OAD3C,EAEGF,GAFH,GAGGQ,IAHH,CAGSC,aAAD,IAAmB;AACvBA,QAAAA,aAAa,CAACC,OAAd,CAAsB,MAAOC,IAAP,IAAgB;AACpC;AAEA,gBAAMxD,EAAE,CACLmD,UADG,CACQ,UADR,EAEHM,GAFG,CAECD,IAAI,CAACN,IAAL,GAAY5C,SAFb,EAGH6C,UAHG,CAGQ,cAHR,EAIHM,GAJG,CAIC3D,MAAM,CAACgD,KAAP,CAAaC,OAJd,EAKHI,UALG,CAKQ,QALR,EAMHO,UANG,CAMSC,YAAD,IAAkB;AAC5BA,YAAAA,YAAY,CAACC,IAAb,CAAkBC,GAAlB,CAAuBJ,GAAD,IAAS;AAC7BT,cAAAA,OAAO,CAACC,GAAR,CAAYQ,GAAG,CAACP,IAAJ,EAAZ;AACAP,cAAAA,kBAAkB,CAACc,GAAG,CAACP,IAAJ,GAAWY,MAAZ,CAAlB;AACD,aAHD;AAID,WAXG,CAAN;AAYD,SAfD;AAgBD,OApBH;AAqBD;AACF,GA5BQ,EA4BN,CAAChE,MAAM,CAACgD,KAAP,CAAaC,OAAd,CA5BM,CAAT;AA6BAC,EAAAA,OAAO,CAACC,GAAR,CAAYP,eAAZ;;AAEA,QAAMqB,aAAa,GAAG,MAAM;AAC1B;AACA;AACAxE,IAAAA,IAAI,CAACyE,EAAL,CAAQC,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAR,EAA8C;AAAEC,MAAAA,SAAS,EAAE;AAAb,KAA9C;AACA5E,IAAAA,IAAI,CAACyE,EAAL,CAAQC,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAR,EAA+C;AAAEC,MAAAA,SAAS,EAAE;AAAb,KAA/C;AACA5E,IAAAA,IAAI,CAACyE,EAAL,CAAQC,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAR,EAA+C;AAAEC,MAAAA,SAAS,EAAE;AAAb,KAA/C;AACA5E,IAAAA,IAAI,CAACyE,EAAL,CAAQC,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAR,EAA+C;AAAEC,MAAAA,SAAS,EAAE;AAAb,KAA/C;AACA5E,IAAAA,IAAI,CAACyE,EAAL,CAAQC,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAR,EAA+C;AAAEC,MAAAA,SAAS,EAAE;AAAb,KAA/C,EAP0B,CAQ1B;;AACA5E,IAAAA,IAAI,CAACyE,EAAL,CAAQC,QAAQ,CAACC,cAAT,CAAwB,UAAxB,CAAR,EAA6C;AAAEE,MAAAA,MAAM,EAAE,OAAV;AAAmBC,MAAAA,eAAe,EAAE,KAApC;AAA2CC,MAAAA,QAAQ,EAAE,CAArD;AAAwDC,MAAAA,IAAI,EAAE9E;AAA9D,KAA7C,EAT0B,CAU1B;;AACAF,IAAAA,IAAI,CAACyE,EAAL,CAAQC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAAR,EAAyC;AAAEC,MAAAA,SAAS,EAAE,CAAb;AAAgBG,MAAAA,QAAQ,EAAE,CAA1B;AAA6BC,MAAAA,IAAI,EAAE9E,MAAnC;AAA2C+E,MAAAA,KAAK,EAAE;AAAlD,KAAzC,EAX0B,CAY1B;;AACAjF,IAAAA,IAAI,CAACyE,EAAL,CAAQC,QAAQ,CAACC,cAAT,CAAwB,cAAxB,CAAR,EAAiD;AAC/CO,MAAAA,MAAM,EAAE,EADuC;AAE/CC,MAAAA,KAAK,EAAE,CAFwC;AAG/CL,MAAAA,eAAe,EAAE,KAH8B;AAI/CC,MAAAA,QAAQ,EAAE,CAJqC;AAK/CC,MAAAA,IAAI,EAAE9E,MALyC;AAM/C+E,MAAAA,KAAK,EAAE;AANwC,KAAjD;AAQAjF,IAAAA,IAAI,CAACyE,EAAL,CAAQC,QAAQ,CAACC,cAAT,CAAwB,eAAxB,CAAR,EAAkD;AAChDO,MAAAA,MAAM,EAAE,EADwC;AAEhDC,MAAAA,KAAK,EAAE,CAFyC;AAGhDL,MAAAA,eAAe,EAAE,KAH+B;AAIhDC,MAAAA,QAAQ,EAAE,CAJsC;AAKhDC,MAAAA,IAAI,EAAE9E,MAL0C;AAMhD+E,MAAAA,KAAK,EAAE;AANyC,KAAlD;AAQAjF,IAAAA,IAAI,CAACyE,EAAL,CAAQC,QAAQ,CAACC,cAAT,CAAwB,eAAxB,CAAR,EAAkD;AAChDO,MAAAA,MAAM,EAAE,EADwC;AAEhDC,MAAAA,KAAK,EAAE,CAFyC;AAGhDL,MAAAA,eAAe,EAAE,KAH+B;AAIhDC,MAAAA,QAAQ,EAAE,CAJsC;AAKhDC,MAAAA,IAAI,EAAE9E,MAL0C;AAMhD+E,MAAAA,KAAK,EAAE;AANyC,KAAlD;AAQAjF,IAAAA,IAAI,CAACyE,EAAL,CAAQC,QAAQ,CAACC,cAAT,CAAwB,eAAxB,CAAR,EAAkD;AAChDO,MAAAA,MAAM,EAAE,EADwC;AAEhDC,MAAAA,KAAK,EAAE,CAFyC;AAGhDL,MAAAA,eAAe,EAAE,KAH+B;AAIhDC,MAAAA,QAAQ,EAAE,CAJsC;AAKhDC,MAAAA,IAAI,EAAE9E,MAL0C;AAMhD+E,MAAAA,KAAK,EAAE;AANyC,KAAlD;AAQAjF,IAAAA,IAAI,CAACyE,EAAL,CAAQC,QAAQ,CAACC,cAAT,CAAwB,eAAxB,CAAR,EAAkD;AAChDO,MAAAA,MAAM,EAAE,EADwC;AAEhDC,MAAAA,KAAK,EAAE,CAFyC;AAGhDL,MAAAA,eAAe,EAAE,KAH+B;AAIhDC,MAAAA,QAAQ,EAAE,CAJsC;AAKhDC,MAAAA,IAAI,EAAE9E,MAL0C;AAMhD+E,MAAAA,KAAK,EAAE;AANyC,KAAlD,EA7C0B,CAqD1B;;AACAjF,IAAAA,IAAI,CAACyE,EAAL,CAAQC,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAR,EAA8C;AAAEO,MAAAA,MAAM,EAAE,EAAV;AAAcC,MAAAA,KAAK,EAAE,CAArB;AAAwBL,MAAAA,eAAe,EAAE,KAAzC;AAAgDC,MAAAA,QAAQ,EAAE,CAA1D;AAA6DC,MAAAA,IAAI,EAAE9E,MAAnE;AAA2E+E,MAAAA,KAAK,EAAE;AAAlF,KAA9C;AACAjF,IAAAA,IAAI,CAACyE,EAAL,CAAQC,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAR,EAA+C;AAAEO,MAAAA,MAAM,EAAE,EAAV;AAAcC,MAAAA,KAAK,EAAE,CAArB;AAAwBL,MAAAA,eAAe,EAAE,KAAzC;AAAgDC,MAAAA,QAAQ,EAAE,CAA1D;AAA6DC,MAAAA,IAAI,EAAE9E,MAAnE;AAA2E+E,MAAAA,KAAK,EAAE;AAAlF,KAA/C;AACAjF,IAAAA,IAAI,CAACyE,EAAL,CAAQC,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAR,EAA+C;AAAEO,MAAAA,MAAM,EAAE,EAAV;AAAcC,MAAAA,KAAK,EAAE,CAArB;AAAwBL,MAAAA,eAAe,EAAE,KAAzC;AAAgDC,MAAAA,QAAQ,EAAE,CAA1D;AAA6DC,MAAAA,IAAI,EAAE9E,MAAnE;AAA2E+E,MAAAA,KAAK,EAAE;AAAlF,KAA/C;AACAjF,IAAAA,IAAI,CAACyE,EAAL,CAAQC,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAR,EAA+C;AAAEO,MAAAA,MAAM,EAAE,EAAV;AAAcC,MAAAA,KAAK,EAAE,CAArB;AAAwBL,MAAAA,eAAe,EAAE,KAAzC;AAAgDC,MAAAA,QAAQ,EAAE,CAA1D;AAA6DC,MAAAA,IAAI,EAAE9E,MAAnE;AAA2E+E,MAAAA,KAAK,EAAE;AAAlF,KAA/C;AACAjF,IAAAA,IAAI,CAACyE,EAAL,CAAQC,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAR,EAA+C;AAAEO,MAAAA,MAAM,EAAE,EAAV;AAAcC,MAAAA,KAAK,EAAE,CAArB;AAAwBL,MAAAA,eAAe,EAAE,KAAzC;AAAgDC,MAAAA,QAAQ,EAAE,CAA1D;AAA6DC,MAAAA,IAAI,EAAE9E,MAAnE;AAA2E+E,MAAAA,KAAK,EAAE;AAAlF,KAA/C;AACD,GA3DD;;AA6DA,QAAMG,WAAW,GAAIC,KAAD,IAAW;AAC7BnD,IAAAA,qBAAqB,CAACmD,KAAD,CAArB;AACD,GAFD;;AAIA,QAAMC,WAAW,GAAG,MAAO7C,KAAP,IAAiB;AACnC,UAAMC,QAAQ,CAACD,KAAD,CAAd;AACA8C,IAAAA,oBAAoB,CAAC9C,KAAD,CAApB;AACD,GAHD;;AAKA,QAAM8C,oBAAoB,GAAGxG,WAAW,CACtCM,QAAQ,CAAEsE,IAAD,IAAU;AACjBhD,IAAAA,kBAAkB,CAACgD,IAAD,CAAlB;AACD,GAFO,EAEL,GAFK,CAD8B,EAItC,EAJsC,CAAxC;AAOA,QAAM6B,WAAW,GAAGzG,WAAW,CAC7BM,QAAQ,CAAC,MAAOsE,IAAP,IAAgB;AACvB,UAAM8B,mBAAmB,GAAG,MAAM9B,IAAI,CAAC+B,UAAL,CAAgBnB,MAAhB,CAAuBoB,SAAvB,CAAkCC,KAAD,IAAWA,KAAK,CAACP,KAAN,IAAe1B,IAAI,CAAC0B,KAAhE,CAAlC;AACA5B,IAAAA,OAAO,CAACC,GAAR,CAAYC,IAAZ;AACA5B,IAAAA,iBAAiB,CAAC4B,IAAD,EAAOA,IAAI,CAAC0B,KAAZ,EAAmBI,mBAAnB,EAAwC9B,IAAI,CAAC+B,UAA7C,CAAjB;AACD,GAJO,EAIL,GAJK,CADqB,EAM7B,EAN6B,CAA/B,CArHI,CA8HJ;;AACA,QAAMG,cAAc,GAAG9G,WAAW,CAChCM,QAAQ,CAAC,MAAOsE,IAAP,IAAgB;AACvB,UAAM8B,mBAAmB,GAAG,MAAM9B,IAAI,CAAC+B,UAAL,CAAgBnB,MAAhB,CAAuBoB,SAAvB,CAAkCC,KAAD,IAAWA,KAAK,CAACP,KAAN,IAAe1B,IAAI,CAAC0B,KAAhE,CAAlC;AACA5B,IAAAA,OAAO,CAACC,GAAR,CAAYC,IAAZ;AACA7B,IAAAA,gBAAgB,CAAC6B,IAAD,EAAOA,IAAI,CAAC0B,KAAZ,EAAmBI,mBAAnB,EAAwC9B,IAAI,CAAC+B,UAA7C,CAAhB;AACD,GAJO,EAIL,GAJK,CADwB,EAMhC,EANgC,CAAlC,CA/HI,CAwIJ;;AACA,QAAMI,cAAc,GAAG/G,WAAW,CAChCM,QAAQ,CAAC,MAAOsE,IAAP,IAAgB;AACvB,UAAM8B,mBAAmB,GAAG,MAAM9B,IAAI,CAAC+B,UAAL,CAAgBnB,MAAhB,CAAuBoB,SAAvB,CAAkCC,KAAD,IAAWA,KAAK,CAACP,KAAN,IAAe1B,IAAI,CAAC0B,KAAhE,CAAlC;AACA5B,IAAAA,OAAO,CAACC,GAAR,CAAYC,IAAZ;AACA9B,IAAAA,gBAAgB,CAAC8B,IAAD,EAAOA,IAAI,CAAC0B,KAAZ,EAAmBI,mBAAnB,EAAwC9B,IAAI,CAAC+B,UAA7C,CAAhB;AACD,GAJO,EAIL,GAJK,CADwB,EAMhC,EANgC,CAAlC,CAzII,CAkJJ;;AACA,QAAMK,cAAc,GAAGhH,WAAW,CAChCM,QAAQ,CAAC,MAAOsE,IAAP,IAAgB;AACvB,UAAM8B,mBAAmB,GAAG,MAAM9B,IAAI,CAAC+B,UAAL,CAAgBnB,MAAhB,CAAuBoB,SAAvB,CAAkCC,KAAD,IAAWA,KAAK,CAACP,KAAN,IAAe1B,IAAI,CAAC0B,KAAhE,CAAlC;AACA5B,IAAAA,OAAO,CAACC,GAAR,CAAYC,IAAZ;AACA/B,IAAAA,gBAAgB,CAAC+B,IAAD,EAAOA,IAAI,CAAC0B,KAAZ,EAAmBI,mBAAnB,EAAwC9B,IAAI,CAAC+B,UAA7C,CAAhB;AACD,GAJO,EAIL,GAJK,CADwB,EAMhC,EANgC,CAAlC,CAnJI,CA4JJ;;AACA,QAAMM,cAAc,GAAGjH,WAAW,CAChCM,QAAQ,CAAC,MAAOsE,IAAP,IAAgB;AACvB,UAAM8B,mBAAmB,GAAG,MAAM9B,IAAI,CAAC+B,UAAL,CAAgBnB,MAAhB,CAAuBoB,SAAvB,CAAkCC,KAAD,IAAWA,KAAK,CAACP,KAAN,IAAe1B,IAAI,CAAC0B,KAAhE,CAAlC;AACA5B,IAAAA,OAAO,CAACC,GAAR,CAAYC,IAAZ;AACAhC,IAAAA,gBAAgB,CAACgC,IAAD,EAAOA,IAAI,CAAC0B,KAAZ,EAAmBI,mBAAnB,EAAwC9B,IAAI,CAAC+B,UAA7C,CAAhB;AACD,GAJO,EAIL,GAJK,CADwB,EAMhC,EANgC,CAAlC,CA7JI,CAsKJ;;AACA,QAAMO,cAAc,GAAGlH,WAAW,CAChCM,QAAQ,CAAC,MAAOsE,IAAP,IAAgB;AACvB,UAAM8B,mBAAmB,GAAG,MAAM9B,IAAI,CAAC+B,UAAL,CAAgBnB,MAAhB,CAAuBoB,SAAvB,CAAkCC,KAAD,IAAWA,KAAK,CAACP,KAAN,IAAe1B,IAAI,CAAC0B,KAAhE,CAAlC;AACA5B,IAAAA,OAAO,CAACC,GAAR,CAAYC,IAAZ;AACAjC,IAAAA,gBAAgB,CAACiC,IAAD,EAAOA,IAAI,CAAC0B,KAAZ,EAAmBI,mBAAnB,EAAwC9B,IAAI,CAAC+B,UAA7C,CAAhB;AACD,GAJO,EAIL,GAJK,CADwB,EAMhC,EANgC,CAAlC,CAvKI,CAgLJ;;AACA,QAAMQ,cAAc,GAAGnH,WAAW,CAChCM,QAAQ,CAAC,MAAOsE,IAAP,IAAgB;AACvB,UAAM8B,mBAAmB,GAAG,MAAM9B,IAAI,CAAC+B,UAAL,CAAgBnB,MAAhB,CAAuBoB,SAAvB,CAAkCC,KAAD,IAAWA,KAAK,CAACP,KAAN,IAAe1B,IAAI,CAAC0B,KAAhE,CAAlC;AACA5B,IAAAA,OAAO,CAACC,GAAR,CAAYC,IAAZ;AACAlC,IAAAA,gBAAgB,CAACkC,IAAD,EAAOA,IAAI,CAAC0B,KAAZ,EAAmBI,mBAAnB,EAAwC9B,IAAI,CAAC+B,UAA7C,CAAhB;AACD,GAJO,EAIL,GAJK,CADwB,EAMhC,EANgC,CAAlC,CAjLI,CA0LJ;;AACA,QAAMS,mBAAmB,GAAGpH,WAAW,CACrCM,QAAQ,CAAC,MAAOsE,IAAP,IAAgB;AACvB,UAAM8B,mBAAmB,GAAG,MAAM9B,IAAI,CAAC+B,UAAL,CAAgBnB,MAAhB,CAAuBoB,SAAvB,CAAkCC,KAAD,IAAWA,KAAK,CAACP,KAAN,IAAe1B,IAAI,CAAC0B,KAAhE,CAAlC;AACA5B,IAAAA,OAAO,CAACC,GAAR,CAAYC,IAAZ;AACAnC,IAAAA,qBAAqB,CAACmC,IAAD,EAAOA,IAAI,CAAC0B,KAAZ,EAAmBI,mBAAnB,EAAwC9B,IAAI,CAAC+B,UAA7C,CAArB;AACD,GAJO,EAIL,GAJK,CAD6B,EAMrC,EANqC,CAAvC;AASA,QAAMU,mBAAmB,GAAGrH,WAAW,CACrCM,QAAQ,CAAC,MAAOsE,IAAP,IAAgB;AACvB,UAAM8B,mBAAmB,GAAG,MAAM9B,IAAI,CAAC+B,UAAL,CAAgBnB,MAAhB,CAAuBoB,SAAvB,CAAkCC,KAAD,IAAWA,KAAK,CAACP,KAAN,IAAe1B,IAAI,CAAC0B,KAAhE,CAAlC;AACA5B,IAAAA,OAAO,CAACC,GAAR,CAAYC,IAAZ;AACApC,IAAAA,qBAAqB,CAACoC,IAAD,EAAOA,IAAI,CAAC0B,KAAZ,EAAmBI,mBAAnB,EAAwC9B,IAAI,CAAC+B,UAA7C,CAArB;AACD,GAJO,EAIL,GAJK,CAD6B,EAMrC,EANqC,CAAvC;AASA,QAAMW,mBAAmB,GAAGtH,WAAW,CACrCM,QAAQ,CAAC,MAAOsE,IAAP,IAAgB;AACvB,UAAM8B,mBAAmB,GAAG,MAAM9B,IAAI,CAAC+B,UAAL,CAAgBnB,MAAhB,CAAuBoB,SAAvB,CAAkCC,KAAD,IAAWA,KAAK,CAACP,KAAN,IAAe1B,IAAI,CAAC0B,KAAhE,CAAlC;AACA5B,IAAAA,OAAO,CAACC,GAAR,CAAYC,IAAZ;AACArC,IAAAA,qBAAqB,CAACqC,IAAD,EAAOA,IAAI,CAAC0B,KAAZ,EAAmBI,mBAAnB,EAAwC9B,IAAI,CAAC+B,UAA7C,CAArB;AACD,GAJO,EAIL,GAJK,CAD6B,EAMrC,EANqC,CAAvC;AASA,QAAMY,mBAAmB,GAAGvH,WAAW,CACrCM,QAAQ,CAAC,MAAOsE,IAAP,IAAgB;AACvB,UAAM8B,mBAAmB,GAAG,MAAM9B,IAAI,CAAC+B,UAAL,CAAgBnB,MAAhB,CAAuBoB,SAAvB,CAAkCC,KAAD,IAAWA,KAAK,CAACP,KAAN,IAAe1B,IAAI,CAAC0B,KAAhE,CAAlC;AACA5B,IAAAA,OAAO,CAACC,GAAR,CAAYC,IAAZ;AACAtC,IAAAA,qBAAqB,CAACsC,IAAD,EAAOA,IAAI,CAAC0B,KAAZ,EAAmBI,mBAAnB,EAAwC9B,IAAI,CAAC+B,UAA7C,CAArB;AACD,GAJO,EAIL,GAJK,CAD6B,EAMrC,EANqC,CAAvC;AASA,QAAMa,mBAAmB,GAAGxH,WAAW,CACrCM,QAAQ,CAAC,MAAOsE,IAAP,IAAgB;AACvB,UAAM8B,mBAAmB,GAAG,MAAM9B,IAAI,CAAC+B,UAAL,CAAgBnB,MAAhB,CAAuBoB,SAAvB,CAAkCC,KAAD,IAAWA,KAAK,CAACP,KAAN,IAAe1B,IAAI,CAAC0B,KAAhE,CAAlC;AACA5B,IAAAA,OAAO,CAACC,GAAR,CAAYC,IAAZ;AACAvC,IAAAA,qBAAqB,CAACuC,IAAD,EAAOA,IAAI,CAAC0B,KAAZ,EAAmBI,mBAAnB,EAAwC9B,IAAI,CAAC+B,UAA7C,CAArB;AACD,GAJO,EAIL,GAJK,CAD6B,EAMrC,EANqC,CAAvC;AASA,QAAMc,mBAAmB,GAAGzH,WAAW,CACrCM,QAAQ,CAAC,MAAOsE,IAAP,IAAgB;AACvB,UAAM8B,mBAAmB,GAAG,MAAM9B,IAAI,CAAC+B,UAAL,CAAgBnB,MAAhB,CAAuBoB,SAAvB,CAAkCC,KAAD,IAAWA,KAAK,CAACP,KAAN,IAAe1B,IAAI,CAAC0B,KAAhE,CAAlC;AACA5B,IAAAA,OAAO,CAACC,GAAR,CAAYC,IAAZ;AACAxC,IAAAA,qBAAqB,CAACwC,IAAD,EAAOA,IAAI,CAAC0B,KAAZ,EAAmBI,mBAAnB,EAAwC9B,IAAI,CAAC+B,UAA7C,CAArB;AACD,GAJO,EAIL,GAJK,CAD6B,EAMrC,EANqC,CAAvC;AASA1G,EAAAA,SAAS,CAAC,MAAM;AACdgE,IAAAA,eAAe,CAAC,IAAD,CAAf,CADc,CAEd;AACD,GAHQ,EAGN,CAACV,eAAe,CAACO,EAAjB,EAAqBP,eAAe,CAACiC,MAArC,CAHM,CAAT;AAKAvF,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIsD,eAAe,CAACO,EAAhB,KAAuBA,EAA3B,EAA+B;AAC7BH,MAAAA,QAAQ,CAACJ,eAAe,CAACG,KAAjB,CAAR,CAD6B,CAE7B;AACA;AACD;AACF,GANQ,EAMN,CAACH,eAAe,CAACO,EAAjB,CANM,CAAT,CAtPI,CA8PJ;AACA;AACA;AACA;AACA;;AAEAY,EAAAA,OAAO,CAACC,GAAR,CAAYpB,eAAZ,EApQI,CAsQJ;AACA;AACA;AACA;AACA;;AAEA,QAAMmE,YAAY,GAAGvH,MAAM,EAA3B;AAEAuE,EAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ,EAAqCpB,eAArC,EA9QI,CAgRJ;;AACA,QAAM;AAAA,OAACoE,aAAD;AAAA,OAAgBC;AAAhB,MAAoCxH,QAAQ,EAAlD;AAEAH,EAAAA,SAAS,CAAC,MAAM;AACd;AACA2H,IAAAA,gBAAgB,CAACrE,eAAe,CAACiC,MAAjB,CAAhB,CAFc,CAGd;AACA;AACA;AACA;AACD,GAPQ,EAON,EAPM,CAAT;;AASA,QAAMqC,eAAe,GAAIC,MAAD,IAAY;AAClC,QAAI,CAACA,MAAM,CAACC,WAAZ,EAAyB;AACzB,UAAMC,KAAK,GAAGC,KAAK,CAACC,IAAN,CAAWP,aAAX,CAAd;AACA,UAAM,CAACQ,aAAD,IAAkBH,KAAK,CAACI,MAAN,CAAaN,MAAM,CAACO,MAAP,CAAc/B,KAA3B,EAAkC,CAAlC,CAAxB;AACA0B,IAAAA,KAAK,CAACI,MAAN,CAAaN,MAAM,CAACC,WAAP,CAAmBzB,KAAhC,EAAuC,CAAvC,EAA0C6B,aAA1C,EAJkC,CAMlC;AACA;;AACA9D,IAAAA,kBAAkB,CAAC2D,KAAD,CAAlB;AACAjG,IAAAA,eAAe,CAACiG,KAAD,CAAf;AACD,GAVD;;AAYAtD,EAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BgD,aAA9B;AAEA,sBACE;AAAA,4BAEE;AAAK,MAAA,SAAS,EAAC,kGAAf;AAAA,6BACE;AAAA,+BACE;AAAK,UAAA,SAAS,EAAC,yEAAf;AAAA,kCACE;AACE,YAAA,SAAS,EAAC,4DADZ;AAEE,YAAA,WAAW,EAAC,kBAFd;AAGE,YAAA,KAAK,EAAEjE,KAAK,GAAGA,KAAH,GAAW,EAHzB;AAIE,YAAA,QAAQ,EAAG4E,CAAD,IAAO/B,WAAW,CAAC+B,CAAC,CAACC,MAAF,CAASC,KAAV;AAJ9B;AAAA;AAAA;AAAA;AAAA,kBADF,eAOE;AAAK,YAAA,SAAS,EAAC,qCAAf;AAAA,oCACE;AAAG,cAAA,SAAS,EAAC,uCAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE,QAAC,KAAD;AAAO,cAAA,OAAO,EAAE/C,aAAhB;AAA+B,cAAA,GAAG,EAAC,mBAAnC;AAAuD,cAAA,MAAM,EAAE,EAA/D;AAAmE,cAAA,KAAK,EAAE;AAA1E;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAPF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAFF,eAkBE,QAAC,eAAD;AAAiB,MAAA,SAAS,EAAEoC,eAA5B;AAAA,6BACE,QAAC,SAAD;AAAW,QAAA,WAAW,EAAC,UAAvB;AAAA,kBACIY,QAAD,iBACC;AACE,UAAA,SAAS,EAAC;AADZ,WAEMA,QAAQ,CAACC,cAFf;AAGE,UAAA,GAAG,EAAED,QAAQ,CAACE,QAHhB;AAIE,UAAA,SAAS,EAAC,kDAJZ;AAAA,qBAMGvE,eAAe,IACdA,eAAe,CAACwE,MAAhB,KAA2B,CAD5B,IAECxE,eAAe,CAACmB,GAAhB,CAAoB,CAACsB,KAAD,EAAQ7C,YAAR,KAAyB;AAC3CU,YAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BkC,KAA1B;AACA,gCACE,QAAC,SAAD;AAA6B,cAAA,WAAW,EAAEA,KAAK,CAACP,KAAhD;AAAuD,cAAA,KAAK,EAAEtC,YAA9D;AAAA,wBACIyE,QAAD,IACE5B,KAAK,CAACgC,IAAN,IAAc,MAAd,iBACC,QAAC,WAAD;AACE,gBAAA,WAAW,EAAExF,WADf;AAEE,gBAAA,YAAY,EAAEW,YAFhB;AAGE,gBAAA,eAAe,EAAET,eAHnB;AAIE,gBAAA,QAAQ,EAAEkF,QAJZ;AAKE,gBAAA,KAAK,EAAE5B,KALT;AAME,gBAAA,WAAW,EAAER,WANf;AAOE,gBAAA,eAAe,EAAEpC;AAPnB;AAAA;AAAA;AAAA;AAAA,sBADF,IAWC4C,KAAK,CAACgC,IAAN,IAAc,OAAd,iBACC,QAAC,gBAAD;AACE,gBAAA,QAAQ,EAAEJ,QADZ;AAEE,gBAAA,SAAS,EAAEzG,SAFb;AAGE,gBAAA,QAAQ,EAAEC,QAHZ;AAIE,gBAAA,eAAe,EAAEE,eAJnB;AAKE,gBAAA,YAAY,EAAE6B,YALhB;AAME,gBAAA,WAAW,EAAEqC,WANf;AAOE,gBAAA,YAAY,EAAEqB,YAPhB;AAQE,gBAAA,mBAAmB,EAAED,mBARvB;AASE,gBAAA,mBAAmB,EAAED,mBATvB;AAUE,gBAAA,mBAAmB,EAAED,mBAVvB;AAWE,gBAAA,mBAAmB,EAAED,mBAXvB;AAYE,gBAAA,mBAAmB,EAAED,mBAZvB;AAaE,gBAAA,mBAAmB,EAAED,mBAbvB;AAcE,gBAAA,cAAc,EAAED,cAdlB;AAeE,gBAAA,cAAc,EAAED,cAflB;AAgBE,gBAAA,cAAc,EAAED,cAhBlB;AAiBE,gBAAA,cAAc,EAAED,cAjBlB;AAkBE,gBAAA,cAAc,EAAED,cAlBlB;AAmBE,gBAAA,cAAc,EAAED,cAnBlB;AAoBE,gBAAA,WAAW,EAAEL,WApBf;AAqBE,gBAAA,iBAAiB,EAAEzD,iBArBrB;AAsBE,gBAAA,KAAK,EAAE6D,KAtBT;AAuBE,gBAAA,eAAe,EAAEtD,eAvBnB;AAwBE,gBAAA,KAAK,EAAEsD,KAAK,CAACP,KAxBf;AAyBE,gBAAA,gBAAgB,EAAErD,gBAzBpB;AA0BE,gBAAA,eAAe,EAAEM;AA1BnB;AAAA;AAAA;AAAA;AAAA,sBAZF,IAyCCsD,KAAK,CAACgC,IAAN,IAAc,QAAd,iBACC,QAAC,eAAD;AACE,gBAAA,WAAW,EAAExF,WADf;AAEE,gBAAA,YAAY,EAAEW,YAFhB;AAGE,gBAAA,YAAY,EAAElC,YAHhB;AAIE,gBAAA,QAAQ,EAAE2G,QAJZ;AAKE,gBAAA,WAAW,EAAEpC,WALf;AAME,gBAAA,KAAK,EAAEQ;AANT;AAAA;AAAA;AAAA;AAAA,sBA1CF,IAmDCA,KAAK,CAACgC,IAAN,IAAc,OAAd,iBACC,QAAC,YAAD;AACE,gBAAA,YAAY,EAAE7E,YADhB;AAEE,gBAAA,WAAW,EAAEnC,WAFf;AAGE,gBAAA,WAAW,EAAEwE,WAHf;AAIE,gBAAA,QAAQ,EAAEoC,QAJZ;AAKE,gBAAA,KAAK,EAAE5B;AALT;AAAA;AAAA;AAAA;AAAA,sBApDF,IA4DCA,KAAK,CAACgC,IAAN,IAAc,SAAd,iBAA2B,QAAC,cAAD;AAAgB,gBAAA,WAAW,EAAExC,WAA7B;AAA0C,gBAAA,QAAQ,EAAEoC,QAApD;AAA8D,gBAAA,KAAK,EAAE5B;AAArE;AAAA;AAAA;AAAA;AAAA;AA9DhC,eAAgBA,KAAK,CAACP,KAAtB;AAAA;AAAA;AAAA;AAAA,oBADF;AAmED,WArED,CARJ,EA8EGmC,QAAQ,CAACK,WA9EZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAlBF;AAAA,kBADF;AA2GD,CApbD;;AAsbA,eAAenH,kBAAf","sourcesContent":["import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\nimport dynamic from 'next/dynamic';\r\n// import debounce from 'lodash/debounce';\r\n// import debounce from '../../../../../utils/helpers';\r\n// import debounce from 'lodash/debounce';\r\nimport debounce from '../../../../../utils/helpers';\r\nimport { useStateWithPromise } from '../../../../../utils/useStateWithPromise';\r\nimport { useCustomState } from '../../../../../utils/useCustomState';\r\nconst ReactQuill = dynamic(() => import('react-quill'), { ssr: false });\r\nimport '../../../../../node_modules/react-quill/dist/quill.snow.css';\r\nimport '../../../../../node_modules/react-quill/dist/quill.bubble.css';\r\nimport '../../../../../node_modules/react-quill/dist/quill.core.css';\r\nimport Image from 'next/image';\r\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\r\n\r\n// import { useRechartToPng } from 'recharts-to-png';\r\nimport FileSaver from 'file-saver';\r\nimport ChartJsComponent from './Chartjs';\r\n// import ReactChart from './ReachChart';\r\nimport gsap, { Power4, Linear } from 'gsap';\r\nimport HeaderComponent from './Header';\r\nimport TextElement from './Text';\r\nimport TableElement from './Table';\r\nimport SpacingElement from './Spacing';\r\nimport Router from 'next/router';\r\nimport Cookies from 'js-cookie';\r\nimport { db } from '../../../../../lib/firebase';\r\n\r\nconst EditorInputElement = ({\r\n  sectionTitleUpdate,\r\n  tableUpdate,\r\n  headerUpdate,\r\n  reorderElements,\r\n  projectId,\r\n  addChart,\r\n  addNewHeader,\r\n  chartTypeUpdate,\r\n  onDatasetLabel6Update,\r\n  onDatasetLabel5Update,\r\n  onDatasetLabel4Update,\r\n  onDatasetLabel3Update,\r\n  onDatasetLabel2Update,\r\n  onDatasetLabel1Update,\r\n  onDataset6Update,\r\n  onDataset5Update,\r\n  onDataset4Update,\r\n  onDataset3Update,\r\n  onDataset2Update,\r\n  onDataset1Update,\r\n  chartLabelsUpdate,\r\n  chartValueUpdate,\r\n  addNewChart,\r\n  deleteParticularField,\r\n  addNewField,\r\n  fieldUpdate,\r\n  sectionUpdate,\r\n  selectedSection,\r\n  selectedSectionIndex,\r\n  sections,\r\n}) => {\r\n  const [title, setTitle] = useState('');\r\n  const [text, setText] = useState('');\r\n  const [id, setId] = useState('');\r\n  const [currentIndex, setCurrentIndex] = useState(null);\r\n  const [lastSectionIndex, setLastSectionIndex] = useState(null);\r\n  // const [currentSectionIndex, setCurrentSectionIndex] = useState(null);\r\n  const [fetchedSections, setFetchedSections] = useState();\r\n\r\n  useEffect(async () => {\r\n    const userUid = await Cookies.get('uid');\r\n    // console.log(Router.query.project);\r\n    if (userUid && Router.query.project) {\r\n      console.log(userUid);\r\n      const data = await db.collection('projects').where('uid', '==', userUid);\r\n      data\r\n        .where('projectName', '==', Router.query.project)\r\n        .get()\r\n        .then((querySnapshot) => {\r\n          querySnapshot.forEach(async (doc1) => {\r\n            // setProjectId(doc1.data().projectId);\r\n\r\n            await db\r\n              .collection('projects')\r\n              .doc(doc1.data().projectId)\r\n              .collection('businessPlan')\r\n              .doc(Router.query.project)\r\n              .collection('inputs')\r\n              .onSnapshot((serverUpdate) => {\r\n                serverUpdate.docs.map((doc) => {\r\n                  console.log(doc.data());\r\n                  setFetchedSections(doc.data().fields);\r\n                });\r\n              });\r\n          });\r\n        });\r\n    }\r\n  }, [Router.query.project]);\r\n  console.log(fetchedSections);\r\n\r\n  const onLeftBarShow = () => {\r\n    // --- VERSION 2 ---\r\n    // CONTAINERS\r\n    gsap.to(document.getElementById('container'), { autoAlpha: 1 });\r\n    gsap.to(document.getElementById('container1'), { autoAlpha: 1 });\r\n    gsap.to(document.getElementById('container2'), { autoAlpha: 1 });\r\n    gsap.to(document.getElementById('container3'), { autoAlpha: 1 });\r\n    gsap.to(document.getElementById('container4'), { autoAlpha: 1 });\r\n    // LEFT BAR\r\n    gsap.to(document.getElementById('left-bar'), { height: '100vh', transformOrigin: 'top', duration: 2, ease: Linear });\r\n    // EXIT\r\n    gsap.to(document.getElementById('exit'), { autoAlpha: 1, duration: 1, ease: Linear, delay: 2 });\r\n    // IMAGES\r\n    gsap.to(document.getElementById('left-element'), {\r\n      zIndex: 50,\r\n      scale: 1,\r\n      transformOrigin: 'top',\r\n      duration: 1,\r\n      ease: Linear,\r\n      delay: 0.3,\r\n    });\r\n    gsap.to(document.getElementById('left-element1'), {\r\n      zIndex: 50,\r\n      scale: 1,\r\n      transformOrigin: 'top',\r\n      duration: 1,\r\n      ease: Linear,\r\n      delay: 0.5,\r\n    });\r\n    gsap.to(document.getElementById('left-element2'), {\r\n      zIndex: 50,\r\n      scale: 1,\r\n      transformOrigin: 'top',\r\n      duration: 1,\r\n      ease: Linear,\r\n      delay: 0.7,\r\n    });\r\n    gsap.to(document.getElementById('left-element3'), {\r\n      zIndex: 50,\r\n      scale: 1,\r\n      transformOrigin: 'top',\r\n      duration: 1,\r\n      ease: Linear,\r\n      delay: 0.9,\r\n    });\r\n    gsap.to(document.getElementById('left-element4'), {\r\n      zIndex: 50,\r\n      scale: 1,\r\n      transformOrigin: 'top',\r\n      duration: 1,\r\n      ease: Linear,\r\n      delay: 1.1,\r\n    });\r\n    // TEXT\r\n    gsap.to(document.getElementById('left-text'), { zIndex: 50, scale: 1, transformOrigin: 'top', duration: 1, ease: Linear, delay: 0.3 });\r\n    gsap.to(document.getElementById('left-text1'), { zIndex: 50, scale: 1, transformOrigin: 'top', duration: 1, ease: Linear, delay: 0.5 });\r\n    gsap.to(document.getElementById('left-text2'), { zIndex: 50, scale: 1, transformOrigin: 'top', duration: 1, ease: Linear, delay: 0.7 });\r\n    gsap.to(document.getElementById('left-text3'), { zIndex: 50, scale: 1, transformOrigin: 'top', duration: 1, ease: Linear, delay: 0.9 });\r\n    gsap.to(document.getElementById('left-text4'), { zIndex: 50, scale: 1, transformOrigin: 'top', duration: 1, ease: Linear, delay: 1.1 });\r\n  };\r\n\r\n  const deleteField = (index) => {\r\n    deleteParticularField(index);\r\n  };\r\n\r\n  const updateTitle = async (title) => {\r\n    await setTitle(title);\r\n    onSectionTitleUpdate(title);\r\n  };\r\n\r\n  const onSectionTitleUpdate = useCallback(\r\n    debounce((data) => {\r\n      sectionTitleUpdate(data);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  const labelUpdate = useCallback(\r\n    debounce(async (data) => {\r\n      const currentSectionIndex = await data.selSection.fields.findIndex((field) => field.index == data.index);\r\n      console.log(data);\r\n      chartLabelsUpdate(data, data.index, currentSectionIndex, data.selSection);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  // Dataset1 update\r\n  const dataset1Update = useCallback(\r\n    debounce(async (data) => {\r\n      const currentSectionIndex = await data.selSection.fields.findIndex((field) => field.index == data.index);\r\n      console.log(data);\r\n      onDataset1Update(data, data.index, currentSectionIndex, data.selSection);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  // Dataset2 update\r\n  const dataset2Update = useCallback(\r\n    debounce(async (data) => {\r\n      const currentSectionIndex = await data.selSection.fields.findIndex((field) => field.index == data.index);\r\n      console.log(data);\r\n      onDataset2Update(data, data.index, currentSectionIndex, data.selSection);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  // Dataset3 update\r\n  const dataset3Update = useCallback(\r\n    debounce(async (data) => {\r\n      const currentSectionIndex = await data.selSection.fields.findIndex((field) => field.index == data.index);\r\n      console.log(data);\r\n      onDataset3Update(data, data.index, currentSectionIndex, data.selSection);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  // Dataset4 update\r\n  const dataset4Update = useCallback(\r\n    debounce(async (data) => {\r\n      const currentSectionIndex = await data.selSection.fields.findIndex((field) => field.index == data.index);\r\n      console.log(data);\r\n      onDataset4Update(data, data.index, currentSectionIndex, data.selSection);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  // Dataset5 update\r\n  const dataset5Update = useCallback(\r\n    debounce(async (data) => {\r\n      const currentSectionIndex = await data.selSection.fields.findIndex((field) => field.index == data.index);\r\n      console.log(data);\r\n      onDataset5Update(data, data.index, currentSectionIndex, data.selSection);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  // Dataset6 update\r\n  const dataset6Update = useCallback(\r\n    debounce(async (data) => {\r\n      const currentSectionIndex = await data.selSection.fields.findIndex((field) => field.index == data.index);\r\n      console.log(data);\r\n      onDataset6Update(data, data.index, currentSectionIndex, data.selSection);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  // Dataset labels update\r\n  const datasetLabel1Update = useCallback(\r\n    debounce(async (data) => {\r\n      const currentSectionIndex = await data.selSection.fields.findIndex((field) => field.index == data.index);\r\n      console.log(data);\r\n      onDatasetLabel1Update(data, data.index, currentSectionIndex, data.selSection);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  const datasetLabel2Update = useCallback(\r\n    debounce(async (data) => {\r\n      const currentSectionIndex = await data.selSection.fields.findIndex((field) => field.index == data.index);\r\n      console.log(data);\r\n      onDatasetLabel2Update(data, data.index, currentSectionIndex, data.selSection);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  const datasetLabel3Update = useCallback(\r\n    debounce(async (data) => {\r\n      const currentSectionIndex = await data.selSection.fields.findIndex((field) => field.index == data.index);\r\n      console.log(data);\r\n      onDatasetLabel3Update(data, data.index, currentSectionIndex, data.selSection);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  const datasetLabel4Update = useCallback(\r\n    debounce(async (data) => {\r\n      const currentSectionIndex = await data.selSection.fields.findIndex((field) => field.index == data.index);\r\n      console.log(data);\r\n      onDatasetLabel4Update(data, data.index, currentSectionIndex, data.selSection);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  const datasetLabel5Update = useCallback(\r\n    debounce(async (data) => {\r\n      const currentSectionIndex = await data.selSection.fields.findIndex((field) => field.index == data.index);\r\n      console.log(data);\r\n      onDatasetLabel5Update(data, data.index, currentSectionIndex, data.selSection);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  const datasetLabel6Update = useCallback(\r\n    debounce(async (data) => {\r\n      const currentSectionIndex = await data.selSection.fields.findIndex((field) => field.index == data.index);\r\n      console.log(data);\r\n      onDatasetLabel6Update(data, data.index, currentSectionIndex, data.selSection);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  useEffect(() => {\r\n    setCurrentIndex(null);\r\n    // selectedSection.fields możesz wyrzucić\r\n  }, [selectedSection.id, selectedSection.fields]);\r\n\r\n  useEffect(() => {\r\n    if (selectedSection.id !== id) {\r\n      setTitle(selectedSection.title);\r\n      // setText(selectedSection.body);\r\n      // setId(selectedSection.id);\r\n    }\r\n  }, [selectedSection.id]);\r\n\r\n  // useEffect(() => {\r\n  //   setCurrentIndex()\r\n  // }, [currentIndex])\r\n  // console.log(selectedSection);\r\n  // console.log(currentIndex);\r\n\r\n  console.log(selectedSection);\r\n\r\n  // const [png, ref] = useRechartToPng();\r\n  // const fn = useCallback(async () => {\r\n  //   FileSaver.saveAs(png, 'myChart.png');\r\n  //   console.log(png);\r\n  // }, [png]);\r\n\r\n  const containerRef = useRef();\r\n\r\n  console.log('Selected section --> ', selectedSection);\r\n\r\n  // Elements manager\r\n  const [elementsArray, setElementsArray] = useState();\r\n\r\n  useEffect(() => {\r\n    // elementsArray !== selectedSection.fields\r\n    setElementsArray(selectedSection.fields);\r\n    // if (elementsArray !== selectedSection.fields) {\r\n    //   console.log('Yeeeeep');\r\n    //   setElementsArray(selectedSection.fields);\r\n    // }\r\n  }, []);\r\n\r\n  const handleOnDragEnd = (result) => {\r\n    if (!result.destination) return;\r\n    const items = Array.from(elementsArray);\r\n    const [reorderedItem] = items.splice(result.source.index, 1);\r\n    items.splice(result.destination.index, 0, reorderedItem);\r\n\r\n    // console.log(result);\r\n    // setElementsArray(items);\r\n    setFetchedSections(items);\r\n    reorderElements(items);\r\n  };\r\n\r\n  console.log('Important --> ', elementsArray);\r\n\r\n  return (\r\n    <>\r\n      {/* <ChartComponent /> */}\r\n      <div className=\"relative flex flex-col h-full w-full flex px-2 py-2 rounded-2xl bg-white dark:bg-background mt-1\">\r\n        <div>\r\n          <div className=\"w-full px-3 bg-white py-3 rounded-2xl flex items-center justify-between\">\r\n            <input\r\n              className=\"text-lg bg-white focus:outline-none w-3/5 text-primarydark\"\r\n              placeholder=\"Section title...\"\r\n              value={title ? title : ''}\r\n              onChange={(e) => updateTitle(e.target.value)}\r\n            />\r\n            <div className=\"flex justify-end items-center w-2/5\">\r\n              <p className=\"text-primarydark text-basae mr-4 pl-2\">New element</p>\r\n              <Image onClick={onLeftBarShow} src=\"/chart/pencil.svg\" height={40} width={40} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <DragDropContext onDragEnd={handleOnDragEnd}>\r\n        <Droppable droppableId=\"elements\">\r\n          {(provided) => (\r\n            <div\r\n              className=\"elements\"\r\n              {...provided.droppableProps}\r\n              ref={provided.innerRef}\r\n              className=\"w-full flex justify-center items-center flex-col\"\r\n            >\r\n              {fetchedSections &&\r\n                fetchedSections.length !== 0 &&\r\n                fetchedSections.map((field, currentIndex) => {\r\n                  console.log('FIELD --> ', field);\r\n                  return (\r\n                    <Draggable key={field.index} draggableId={field.index} index={currentIndex}>\r\n                      {(provided) =>\r\n                        (field.type == 'text' && (\r\n                          <TextElement\r\n                            fieldUpdate={fieldUpdate}\r\n                            currentIndex={currentIndex}\r\n                            selectedSection={selectedSection}\r\n                            provided={provided}\r\n                            field={field}\r\n                            deleteField={deleteField}\r\n                            setCurrentIndex={setCurrentIndex}\r\n                          />\r\n                        )) ||\r\n                        (field.type == 'chart' && (\r\n                          <ChartJsComponent\r\n                            provided={provided}\r\n                            projectId={projectId}\r\n                            addChart={addChart}\r\n                            chartTypeUpdate={chartTypeUpdate}\r\n                            currentIndex={currentIndex}\r\n                            deleteField={deleteField}\r\n                            containerRef={containerRef}\r\n                            datasetLabel6Update={datasetLabel6Update}\r\n                            datasetLabel5Update={datasetLabel5Update}\r\n                            datasetLabel4Update={datasetLabel4Update}\r\n                            datasetLabel3Update={datasetLabel3Update}\r\n                            datasetLabel2Update={datasetLabel2Update}\r\n                            datasetLabel1Update={datasetLabel1Update}\r\n                            dataset6Update={dataset6Update}\r\n                            dataset5Update={dataset5Update}\r\n                            dataset4Update={dataset4Update}\r\n                            dataset3Update={dataset3Update}\r\n                            dataset2Update={dataset2Update}\r\n                            dataset1Update={dataset1Update}\r\n                            labelUpdate={labelUpdate}\r\n                            chartLabelsUpdate={chartLabelsUpdate}\r\n                            field={field}\r\n                            selectedSection={selectedSection}\r\n                            index={field.index}\r\n                            chartValueUpdate={chartValueUpdate}\r\n                            selectedSection={selectedSection}\r\n                          />\r\n                        )) ||\r\n                        (field.type == 'header' && (\r\n                          <HeaderComponent\r\n                            fieldUpdate={fieldUpdate}\r\n                            currentIndex={currentIndex}\r\n                            headerUpdate={headerUpdate}\r\n                            provided={provided}\r\n                            deleteField={deleteField}\r\n                            field={field}\r\n                          />\r\n                        )) ||\r\n                        (field.type == 'table' && (\r\n                          <TableElement\r\n                            currentIndex={currentIndex}\r\n                            tableUpdate={tableUpdate}\r\n                            deleteField={deleteField}\r\n                            provided={provided}\r\n                            field={field}\r\n                          />\r\n                        )) ||\r\n                        (field.type == 'spacing' && <SpacingElement deleteField={deleteField} provided={provided} field={field} />)\r\n                      }\r\n                    </Draggable>\r\n                  );\r\n                })}\r\n              {provided.placeholder}\r\n            </div>\r\n          )}\r\n        </Droppable>\r\n      </DragDropContext>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EditorInputElement;\r\n"]},"metadata":{},"sourceType":"module"}