{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport Router from 'next/router';\nimport { db, storage } from '../../../../../../lib/firebase';\nimport debounce from '../../../../../../utils/helpers'; // import Image from 'next/image';\n\nimport gsap, { Linear } from 'gsap';\nimport { isMobile } from 'react-device-detect';\n\nconst Competitor = ({\n  data,\n  projectId,\n  documentId,\n  competitors,\n  index,\n  setCompetitors,\n  provided\n}) => {\n  const {\n    0: image,\n    1: setImage\n  } = useState('');\n  const {\n    0: title,\n    1: setTitle\n  } = useState('');\n  const {\n    0: location,\n    1: setLocation\n  } = useState('');\n  const {\n    0: employees,\n    1: setEmployees\n  } = useState('');\n  const {\n    0: revenue,\n    1: setRevenue\n  } = useState('');\n  const {\n    0: elementIndex,\n    1: setElementIndex\n  } = useState(''); // Elements\n\n  const {\n    0: companyDescription,\n    1: setCompanyDescription\n  } = useState('');\n  const {\n    0: businessModel,\n    1: setBusinessModel\n  } = useState('');\n  const {\n    0: productOverview,\n    1: setProductOverview\n  } = useState('');\n  const {\n    0: promotionStrategy,\n    1: setPromotionStrategy\n  } = useState('');\n  const {\n    0: companyStrengths,\n    1: setCompanyStrengths\n  } = useState('');\n  const {\n    0: companyWeaknesses,\n    1: setCompanyWeaknesses\n  } = useState('');\n  const {\n    0: opportunities,\n    1: setOpportunities\n  } = useState('');\n  useEffect(() => {\n    setImage(data.image);\n    setTitle(data.title);\n    setLocation(data.location);\n    setEmployees(data.employees);\n    setRevenue(data.revenue);\n    setElementIndex(data.index); // Elements\n\n    setCompanyDescription(data.companyDescription);\n    setBusinessModel(data.businessModel);\n    setProductOverview(data.productOverview);\n    setPromotionStrategy(data.promotionStrategy);\n    setCompanyStrengths(data.companyStrengths);\n    setCompanyWeaknesses(data.companyWeaknesses);\n    setOpportunities(data.opportunities);\n  }, [competitors]);\n\n  const onFileChange = async e => {\n    const file = e.target.files[0];\n    const storageRef = storage.ref();\n    const fileRef = storageRef.child(file.name);\n    await fileRef.put(file);\n    setImage(await fileRef.getDownloadURL()); // Firebase update\n\n    const newCompetitorsArray = [...competitors];\n    newCompetitorsArray[index] = {\n      image: await fileRef.getDownloadURL(),\n      title,\n      location,\n      employees,\n      revenue,\n      elementIndex,\n      companyDescription,\n      businessModel,\n      productOverview,\n      promotionStrategy,\n      companyStrengths,\n      companyWeaknesses,\n      opportunities\n    };\n    await db.collection('projects').doc(projectId).collection('competitors').doc(Router.query.project).collection('inputs').doc(documentId).update({\n      competitorsArray: newCompetitorsArray\n    });\n  };\n\n  const onDataChange = (value, type) => {\n    console.log(type);\n    type === 'title' && setTitle(value);\n    type === 'location' && setLocation(value);\n    type === 'employees' && setEmployees(value);\n    type === 'revenue' && setRevenue(value); // Elements\n\n    type === 'companyDescription' && setCompanyDescription(value);\n    type === 'businessModel' && setBusinessModel(value);\n    type === 'productOverview' && setProductOverview(value);\n    type === 'promotionStrategy' && setPromotionStrategy(value);\n    type === 'companyStrengths' && setCompanyStrengths(value);\n    type === 'companyWeaknesses' && setCompanyWeaknesses(value);\n    type === 'opportunities' && setOpportunities(value);\n    const newCompetitorsArray = [...competitors];\n    newCompetitorsArray[index] = {\n      title: type === 'title' ? value : title,\n      location: type === 'location' ? value : location,\n      employees: type === 'employees' ? value : employees,\n      revenue: type === 'revenue' ? value : revenue,\n      image: image,\n      index: elementIndex,\n      // Elements\n      companyDescription: type === 'companyDescription' ? value : companyDescription,\n      businessModel: type === 'businessModel' ? value : businessModel,\n      productOverview: type === 'productOverview' ? value : productOverview,\n      promotionStrategy: type === 'promotionStrategy' ? value : promotionStrategy,\n      companyStrengths: type === 'companyStrengths' ? value : companyStrengths,\n      companyWeaknesses: type === 'companyWeaknesses' ? value : companyWeaknesses,\n      opportunities: type === 'opportunities' ? value : opportunities\n    };\n    dataUpdate(newCompetitorsArray);\n  };\n\n  const dataUpdate = useCallback(debounce(async newCompetitorsArray => {\n    // Firebase update\n    await db.collection('projects').doc(projectId).collection('competitors').doc(Router.query.project).collection('inputs').doc(documentId).update({\n      competitorsArray: newCompetitorsArray\n    });\n  }, 300), []);\n\n  const onCompetitorRemove = async index => {\n    const newCompetitors = competitors.filter(element => index !== element.index); // setCompetitors(newCompetitors);\n    // Firebase update\n\n    await db.collection('projects').doc(projectId).collection('competitors').doc(Router.query.project).collection('inputs').doc(documentId).update({\n      competitorsArray: newCompetitors\n    });\n  };\n\n  const {\n    0: dropdownHelper,\n    1: setDropdownHelper\n  } = useState(false);\n  const initialContainer = document.getElementById(index); // Elements\n\n  const descriptionTitle = document.getElementById(`descriptionTitle${index}`);\n  const placeholderTitle = document.getElementById(`placeholderTitle${index}`);\n  const descriptionModel = document.getElementById(`descriptionModel${index}`);\n  const placeholderModel = document.getElementById(`placeholderModel${index}`);\n  const descriptionProduct = document.getElementById(`descriptionProduct${index}`);\n  const placeholderProduct = document.getElementById(`placeholderProduct${index}`);\n  const descriptionPromotion = document.getElementById(`descriptionPromotion${index}`);\n  const placeholderPromotion = document.getElementById(`placeholderPromotion${index}`);\n  const descriptionStrengths = document.getElementById(`descriptionStrengths${index}`);\n  const placeholderStrengths = document.getElementById(`placeholderStrengths${index}`);\n  const descriptionWeaknesses = document.getElementById(`descriptionWeaknesses${index}`);\n  const placeholderWeaknesses = document.getElementById(`placeholderWeaknesses${index}`);\n  const descriptionOpportunities = document.getElementById(`descriptionOpportunities${index}`);\n  const placeholderOpportunities = document.getElementById(`placeholderOpportunities${index}`);\n  const dropDownElement = document.getElementById(`dropdown${index}`);\n  const dataElement = document.getElementById(`data${index}`);\n  useEffect(() => {\n    gsap.set(dropDownElement, {\n      rotation: '-90_cw'\n    });\n\n    if (!isMobile) {\n      const containerElement = document.getElementById(`container${index}`);\n      const competitorManager = document.getElementById(`manager${index}`);\n      containerElement.addEventListener('mouseenter', () => {\n        gsap.to(competitorManager, {\n          height: 18,\n          marignBottom: 16,\n          duration: 0.5,\n          ease: Linear.easeIn\n        });\n        gsap.to(initialContainer, {\n          marginTop: 16,\n          duration: 0.5,\n          ease: Linear.easeIn\n        });\n      });\n      containerElement.addEventListener('mouseleave', () => {\n        gsap.to(competitorManager, {\n          height: 0,\n          marginBottom: 0,\n          duration: 0.5,\n          ease: Linear.easeOut\n        });\n        gsap.to(initialContainer, {\n          marginTop: 0,\n          duration: 0.5,\n          ease: Linear.easeIn\n        });\n      });\n    }\n  }, [dropDownElement]);\n\n  const onSectionDropdown = () => {\n    const sectionHeight = descriptionTitle.offsetHeight + placeholderTitle.offsetHeight + descriptionModel.offsetHeight + placeholderModel.offsetHeight + 24 + descriptionProduct.offsetHeight + placeholderProduct.offsetHeight + 24 + descriptionPromotion.offsetHeight + placeholderPromotion.offsetHeight + 24 + descriptionStrengths.offsetHeight + placeholderStrengths.offsetHeight + 24 + descriptionWeaknesses.offsetHeight + placeholderWeaknesses.offsetHeight + 24 + descriptionOpportunities.offsetHeight + placeholderOpportunities.offsetHeight + 24;\n\n    if (!dropdownHelper) {\n      gsap.to(dataElement, {\n        height: sectionHeight,\n        marginTop: 32,\n        marginBottom: 112,\n        autoAlpha: 1,\n        duration: 1,\n        ease: Linear\n      });\n      gsap.to(dropDownElement, {\n        rotation: '0_cw',\n        duration: 1,\n        ease: Linear\n      });\n      setDropdownHelper(true);\n    } else if (dropdownHelper) {\n      gsap.to(dataElement, {\n        height: 0,\n        marginTop: 0,\n        marginBottom: 0,\n        autoAlpha: 0,\n        duration: 1,\n        ease: Linear\n      });\n      gsap.to(dropDownElement, {\n        rotation: '-90_ccw',\n        duration: 1,\n        ease: Linear\n      });\n      setDropdownHelper(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    style: {\n      height: 'fit-content'\n    },\n    id: `container${index}`,\n    className: \"w-full bg-background rounded-2xl p-4 ssmContainer:p-6 shadow-md overflow-hidden mt-8 smContainer:mt-8\",\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      style: {\n        height: `${isMobile ? 40 : 0}`,\n        top: `${isMobile ? '-6px' : '-6px'}`\n      },\n      id: `manager${index}`,\n      className: \"flex justify-between relative\",\n      children: [/*#__PURE__*/_jsx(\"img\", {\n        className: \"cursor-pointer\" //   style={{ transform: 'rotate(-90deg)' }}\n        ,\n        onClick: onSectionDropdown,\n        id: `dropdown${index}`,\n        src: \"/competitors/dropdown.svg\",\n        height: 18,\n        width: 18\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"flex\",\n        children: [/*#__PURE__*/_jsx(\"img\", {\n          className: \"cursor-pointer mr-2\",\n          src: \"/competitors/drag.svg\",\n          height: 18,\n          width: 18\n        }), /*#__PURE__*/_jsx(\"img\", {\n          className: \"cursor-pointer\",\n          onClick: () => onCompetitorRemove(data.index),\n          src: \"/competitors/remove.svg\",\n          height: 18,\n          width: 18\n        })]\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      id: index,\n      className: \"flex gap-6 flex-col justify-center items-center smContainer:gap-0 smContainer:grid smContainer:grid-cols-12fr\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"smContainer:col-start-1 smContainer:col-end-4 justify-self-center flex justify-start items-center\",\n        children: [image !== '' ? /*#__PURE__*/_jsx(\"label\", {\n          htmlFor: `upload-image${index}`,\n          className: \"relative w-20 h-20 cursor-pointer rounded-full bg-white flex justify-center items-center\",\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: image,\n            height: 55,\n            width: 55\n          })\n        }) : /*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsx(\"label\", {\n            htmlFor: `upload-image${index}`,\n            className: \"w-20 h-20 cursor-pointer rounded-full bg-primary flex justify-center items-center\",\n            children: /*#__PURE__*/_jsx(\"img\", {\n              src: \"/competitors/empty-image.svg\",\n              height: 65,\n              width: 65\n            })\n          })\n        }), /*#__PURE__*/_jsx(\"input\", {\n          type: \"file\",\n          id: `upload-image${index}`,\n          style: {\n            display: 'none',\n            zIndex: 10\n          },\n          onChange: onFileChange\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"smContainer:col-start-5 smContainer:col-end-13 grid grid-cols-2fr grid-rows-2fr justify-items-center items-center gap-x-4 ssmContainer:gap-x-8 gap-y-2 ssmContainer:gap-y-4\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsx(\"input\", {\n            onChange: e => onDataChange(e.target.value, 'title'),\n            value: title,\n            className: \"bg-white rounded-2xl w-full px-3 py-2 text-sm text-primarydark focus:outline-none\",\n            placeholder: \"name\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsx(\"input\", {\n            onChange: e => onDataChange(e.target.value, 'location'),\n            value: location,\n            className: \"bg-white rounded-2xl w-full px-3 py-2 text-sm text-primarydark focus:outline-none\",\n            placeholder: \"location\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsx(\"input\", {\n            onChange: e => onDataChange(e.target.value, 'employees'),\n            value: employees,\n            className: \"bg-white rounded-2xl w-full px-3 py-2 text-sm text-primarydark focus:outline-none\",\n            placeholder: \"employees\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsx(\"input\", {\n            onChange: e => onDataChange(e.target.value, 'revenue'),\n            value: revenue,\n            className: \"bg-white rounded-2xl w-full px-3 py-2 text-sm text-primarydark focus:outline-none\",\n            placeholder: \"revenue\"\n          })\n        })]\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      id: `data${index}`,\n      className: \"w-full h-0 invisible\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        id: `descriptionTitle${index}`,\n        className: \"flex justify-start items-center\",\n        children: [/*#__PURE__*/_jsx(\"img\", {\n          src: \"/competitors/description.svg\",\n          height: 22,\n          width: 22\n        }), /*#__PURE__*/_jsx(\"p\", {\n          className: \"text-primarydark ml-2\",\n          children: \"Company description\"\n        })]\n      }), /*#__PURE__*/_jsx(\"textarea\", {\n        value: companyDescription,\n        onChange: e => onDataChange(e.target.value, 'companyDescription'),\n        id: `placeholderTitle${index}`,\n        className: \"w-full bg-white rounded-2xl mt-2 p-2 text-primarydark text-sm px-4 py-3 h-28 max-h-28 focus:outline-none\",\n        placeholder: \"Describe the main assumption of analyzed company.\"\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        id: `descriptionModel${index}`,\n        className: \"flex justify-start items-center mt-6\",\n        children: [/*#__PURE__*/_jsx(\"img\", {\n          src: \"/competitors/model.svg\",\n          height: 22,\n          width: 22\n        }), /*#__PURE__*/_jsx(\"p\", {\n          className: \"text-primarydark ml-2\",\n          children: \"Business model\"\n        })]\n      }), /*#__PURE__*/_jsx(\"textarea\", {\n        value: businessModel,\n        onChange: e => onDataChange(e.target.value, 'businessModel'),\n        id: `placeholderModel${index}`,\n        className: \"w-full bg-white rounded-2xl mt-2 p-2 text-primarydark text-sm px-4 py-3 h-28 max-h-28 focus:outline-none\",\n        placeholder: \"How does the company business model look like?\"\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        id: `descriptionProduct${index}`,\n        className: \"flex justify-start items-center mt-6\",\n        children: [/*#__PURE__*/_jsx(\"img\", {\n          src: \"/competitors/product1.svg\",\n          height: 22,\n          width: 22\n        }), /*#__PURE__*/_jsx(\"p\", {\n          className: \"text-primarydark ml-2\",\n          children: \"Product overview\"\n        })]\n      }), /*#__PURE__*/_jsx(\"textarea\", {\n        value: productOverview,\n        onChange: e => onDataChange(e.target.value, 'productOverview'),\n        id: `placeholderProduct${index}`,\n        className: \"w-full bg-white rounded-2xl mt-2 p-2 text-primarydark text-sm px-4 py-3 h-28 max-h-28 focus:outline-none\",\n        placeholder: \"What is the full range of products and services the company offers?\"\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        id: `descriptionPromotion${index}`,\n        className: \"flex justify-start items-center mt-6\",\n        children: [/*#__PURE__*/_jsx(\"img\", {\n          src: \"/competitors/promotion.svg\",\n          height: 22,\n          width: 22\n        }), /*#__PURE__*/_jsx(\"p\", {\n          className: \"text-primarydark ml-2\",\n          children: \"Promotion strategy\"\n        })]\n      }), /*#__PURE__*/_jsx(\"textarea\", {\n        value: promotionStrategy,\n        onChange: e => onDataChange(e.target.value, 'promotionStrategy'),\n        id: `placeholderPromotion${index}`,\n        className: \"w-full bg-white rounded-2xl mt-2 p-2 text-primarydark text-sm px-4 py-3 h-28 max-h-28 focus:outline-none\",\n        placeholder: \"What are the company marketing and promotional strategies?\"\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        id: `descriptionStrengths${index}`,\n        className: \"flex justify-start items-center mt-6\",\n        children: [/*#__PURE__*/_jsx(\"img\", {\n          src: \"/competitors/strengths.svg\",\n          height: 22,\n          width: 22\n        }), /*#__PURE__*/_jsx(\"p\", {\n          className: \"text-primarydark ml-2\",\n          children: \"Company strengths\"\n        })]\n      }), /*#__PURE__*/_jsx(\"textarea\", {\n        value: companyStrengths,\n        onChange: e => onDataChange(e.target.value, 'companyStrengths'),\n        id: `placeholderStrengths${index}`,\n        className: \"w-full bg-white rounded-2xl mt-2 p-2 text-primarydark text-sm px-4 py-3 h-28 max-h-28 focus:outline-none\",\n        placeholder: \"What do your competitors do really well that differentiates them?\"\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        id: `descriptionWeaknesses${index}`,\n        className: \"flex justify-start items-center mt-6\",\n        children: [/*#__PURE__*/_jsx(\"img\", {\n          src: \"/competitors/weaknesses.svg\",\n          height: 22,\n          width: 22\n        }), /*#__PURE__*/_jsx(\"p\", {\n          className: \"text-primarydark ml-2\",\n          children: \"Company Weaknesses\"\n        })]\n      }), /*#__PURE__*/_jsx(\"textarea\", {\n        value: companyWeaknesses,\n        onChange: e => onDataChange(e.target.value, 'companyWeaknesses'),\n        id: `placeholderWeaknesses${index}`,\n        className: \"w-full bg-white rounded-2xl mt-2 p-2 text-primarydark text-sm px-4 py-3 h-28 max-h-28 focus:outline-none\",\n        placeholder: \"What do the company customers complain about the most, and what products do they lack?\"\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        id: `descriptionOpportunities${index}`,\n        className: \"flex justify-start items-center mt-6\",\n        children: [/*#__PURE__*/_jsx(\"img\", {\n          src: \"/competitors/opportunities2.svg\",\n          height: 22,\n          width: 22\n        }), /*#__PURE__*/_jsx(\"p\", {\n          className: \"text-primarydark ml-2\",\n          children: \"Opportunities\"\n        })]\n      }), /*#__PURE__*/_jsx(\"textarea\", {\n        value: opportunities,\n        onChange: e => onDataChange(e.target.value, 'opportunities'),\n        id: `placeholderOpportunities${index}`,\n        className: \"w-full bg-white rounded-2xl mt-2 p-2 text-primarydark text-sm px-4 py-3 h-28 max-h-28 focus:outline-none\",\n        placeholder: \"What distinguish your startup from this particular competitive company?\"\n      })]\n    })]\n  });\n};\n\nexport default Competitor;","map":null,"metadata":{},"sourceType":"module"}