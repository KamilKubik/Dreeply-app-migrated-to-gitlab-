{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useEffect, useState } from 'react';\nimport { useRouter } from 'next/router';\nimport gsap, { Linear } from 'gsap';\nimport { v4 as uuidv4 } from 'uuid';\nimport { useAuth } from '../../../lib/newAuth';\nimport { db } from '../../../lib/firebase';\nimport NavbarTemplate from '../../../components/dashboard/NavbarTemplate';\nimport { CountryDropdown } from 'react-country-region-selector';\nimport ImagesModal from '../../../components/dashboard/startup/ImagesModal';\nimport Image from 'next/image';\nimport Link from 'next/link';\n\nconst newStartupPage = () => {\n  const {\n    0: projectName,\n    1: setProjectName\n  } = useState('');\n  const {\n    0: projectDescription,\n    1: setProjectDescription\n  } = useState('');\n  const {\n    0: projectField,\n    1: setProjectField\n  } = useState('');\n  const {\n    0: projectCountry,\n    1: setProjectCountry\n  } = useState('');\n  const {\n    0: projectEmail,\n    1: setProjectEmail\n  } = useState('');\n  const {\n    0: projectNumber,\n    1: setProjectNumber\n  } = useState('');\n  const {\n    0: projectImage,\n    1: setProjectImage\n  } = useState('');\n  const {\n    0: imageName,\n    1: setImageName\n  } = useState('blank');\n  const {\n    0: imagesModal,\n    1: setImagesModal\n  } = useState(false);\n  const {\n    0: fileUrl,\n    1: setFileUrl\n  } = useState(null);\n  const router = useRouter();\n  const {\n    currentUser\n  } = useAuth();\n  const {\n    0: projects,\n    1: setProjects\n  } = useState();\n  useEffect(async () => {\n    const userProjects = await db.collection('projects').where('uid', '==', currentUser.uid).get();\n    const arrays = [];\n    userProjects.docs.map(doc => {\n      if (doc.data().uid == currentUser.uid) {\n        return arrays.push(doc.data());\n      }\n\n      return;\n    });\n    setProjects(arrays);\n  }, []);\n\n  const onProjectCreate = async e => {\n    projects.map(project => {\n      if (project.projectName == projectName) {\n        alert('This name already exists');\n        return;\n      }\n    });\n    e.preventDefault(); // NEW PROJECT\n\n    const projectId = uuidv4();\n    const newProject = {\n      projectName: projectName,\n      projectDescription: projectDescription,\n      projectField: projectField,\n      projectCountry: projectCountry,\n      projectEmail: projectEmail,\n      projectNumber: projectNumber,\n      imageName,\n      imageFileUrl: fileUrl,\n      createdAt: new Date().toISOString(),\n      projectId: projectId,\n      uid: currentUser.uid,\n      isIdeaPlanCreated: false,\n      isBusinessPlanCreated: false,\n      isCashflowCreated: false,\n      isCompetitorsAnalysisCreated: false,\n      isMembersManagerCreated: false\n    };\n    await db.collection('projects').doc(projectId).set(newProject); // await db.collection('currentProject').doc(currentUser.uid).set(newProject);\n    // router.push(`/dashboard/works/${projectName}`);\n  };\n\n  const onFileChange = async e => {\n    if (imageName && fileUrl) {\n      setImageName('blank');\n    }\n\n    setImagesModal(false);\n    const file = e.target.files[0];\n    const storageRef = storage.ref();\n    const fileRef = storageRef.child(file.name);\n    await fileRef.put(file);\n    setFileUrl(await fileRef.getDownloadURL());\n  };\n\n  const browseImageOpen = () => {\n    setImagesModal(true);\n    setImageName('blank');\n  };\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [imagesModal && /*#__PURE__*/_jsx(ImagesModal, {\n      currentUser: currentUser,\n      onFileChange: onFileChange,\n      setImagesModal: setImagesModal,\n      setImageName: setImageName\n    }), /*#__PURE__*/_jsx(NavbarTemplate, {\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"min-h-screen w-full max-w-full relative px-32 py-16 flex items-center flex-col\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"z-10 p-10 h-auto grid grid-cols-1 grid-rows-3 w-auto max-w-nameContainer w-full bg-white rounded-3xl\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"row-span-1 text-center\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"text-2xl font-medium flex items-center justify-center\",\n              children: [/*#__PURE__*/_jsx(Image, {\n                src: \"/project-create/rocket.svg\",\n                height: 36,\n                width: 36,\n                className: \"inline-block relative bottom-2\"\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: \"ml-2 text-primarydark\",\n                children: \"Let's create your startup!\"\n              })]\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"text-base text-gray px-4\",\n              children: \"Oops, one more tiny step and we will get down to business.\"\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"row-span-2\",\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"z-50 px-4 pt-2 rounded-2xl mt-4\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"mb-4\",\n                children: /*#__PURE__*/_jsx(\"input\", {\n                  value: projectName,\n                  onChange: e => setProjectName(e.target.value),\n                  id: \"startup-name\",\n                  className: \"border border-background focus:border-primary shadow appearance-none rounded w-full py-3 px-4 text-primarydark leading-tight focus:outline-none focus:shadow-outline text-sm bg-white rounded-2xl mr-2\",\n                  type: \"startup-name\",\n                  placeholder: \"startup name\"\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"mb-4\",\n                children: /*#__PURE__*/_jsx(\"textarea\", {\n                  value: projectDescription,\n                  onChange: e => setProjectDescription(e.target.value),\n                  id: \"startup-description\",\n                  style: {\n                    maxHeight: 160\n                  },\n                  className: \"border border-background focus:border-primary shadow appearance-none rounded w-full py-3 px-4 text-primarydark leading-tight focus:outline-none focus:shadow-outline text-sm bg-white rounded-2xl mr-2 pb-12\",\n                  type: \"startup-description\",\n                  placeholder: \"startup description\"\n                })\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"mb-4\",\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: \"flex justify-items-stretch\",\n                  children: [/*#__PURE__*/_jsx(\"input\", {\n                    value: projectField,\n                    onChange: e => setProjectField(e.target.value),\n                    autoComplete: \"none\",\n                    className: \"border border-background focus:border-primary shadow appearance-none rounded w-full py-3 px-4 text-primarydark leading-tight focus:outline-none focus:shadow-outline text-sm bg-white rounded-2xl mr-2\",\n                    type: \"text\",\n                    placeholder: \"Startup field\"\n                  }), /*#__PURE__*/_jsx(CountryDropdown, {\n                    value: projectCountry,\n                    onChange: country => setProjectCountry(country),\n                    id: \"test\",\n                    defaultOptionLabel: \"Country\",\n                    className: `${projectCountry ? 'text-primarydark' : 'text-placeholder'} border border-background focus:border-primary shadow appearance-none rounded w-full py-3 px-4 leading-tight focus:outline-none focus:shadow-outline text-sm bg-white rounded-2xl ml-2`\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"flex justify-items-stretch mt-4\",\n                  children: [/*#__PURE__*/_jsx(\"input\", {\n                    value: projectEmail,\n                    onChange: e => setProjectEmail(e.target.value),\n                    autoComplete: \"none\",\n                    className: \"border border-background focus:border-primary shadow appearance-none rounded w-full py-3 px-4 text-primarydark leading-tight focus:outline-none focus:shadow-outline text-sm bg-white rounded-2xl mr-2\",\n                    type: \"text\",\n                    placeholder: \"E-mail\"\n                  }), /*#__PURE__*/_jsx(\"input\", {\n                    value: projectNumber,\n                    onChange: e => setProjectNumber(e.target.value),\n                    autoComplete: \"none\",\n                    className: \"border border-background focus:border-primary shadow appearance-none rounded w-full py-3 px-4 text-primarydark leading-tight focus:outline-none focus:shadow-outline text-sm bg-white rounded-2xl ml-2\",\n                    type: \"text\",\n                    placeholder: \"Phone number\"\n                  })]\n                })]\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"flex justify-center items-center p-6 z-10\",\n                children: fileUrl || imageName !== 'blank' ? imageName == 'blank' ? /*#__PURE__*/_jsx(\"img\", {\n                  style: {\n                    height: '200px',\n                    width: '200px'\n                  },\n                  src: fileUrl,\n                  onClick: () => setImagesModal(true),\n                  className: \"cursor-pointer\"\n                }) : /*#__PURE__*/_jsx(Image, {\n                  onClick: () => setImagesModal(true),\n                  src: `/modal/${imageName}.svg`,\n                  height: 200,\n                  width: 200,\n                  className: \"cursor-pointer\",\n                  style: {\n                    height: '200px',\n                    width: '200px'\n                  }\n                }) : /*#__PURE__*/_jsx(Image, {\n                  onClick: () => browseImageOpen(),\n                  src: \"/edit-photo.svg\",\n                  height: 200,\n                  width: 200,\n                  className: \"cursor-pointer\",\n                  style: {\n                    height: '200px',\n                    width: '200px'\n                  }\n                })\n              }), /*#__PURE__*/_jsx(\"hr\", {\n                style: {\n                  width: '100%',\n                  color: '#6C63FF'\n                }\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"flex items-center justify-between mt-8\",\n                children: [/*#__PURE__*/_jsx(\"p\", {\n                  className: \"text-primarydark\",\n                  children: \"Back\"\n                }), /*#__PURE__*/_jsx(Link, {\n                  href: \"/dashboard/projects/[project]\",\n                  as: `/dashboard/projects/${inputValue}`,\n                  children: /*#__PURE__*/_jsx(\"a\", {\n                    className: \"z-50 border-2 border-primary hover:bg-primary hover:text-white text-primary font-medium py-1.5 px-6 rounded-2xl focus:outline-none\",\n                    onClick: onProjectCreate,\n                    children: \"Create your project!\"\n                  })\n                })]\n              })]\n            })\n          })]\n        })\n      })\n    })]\n  });\n};\n\nexport default newStartupPage;","map":null,"metadata":{},"sourceType":"module"}