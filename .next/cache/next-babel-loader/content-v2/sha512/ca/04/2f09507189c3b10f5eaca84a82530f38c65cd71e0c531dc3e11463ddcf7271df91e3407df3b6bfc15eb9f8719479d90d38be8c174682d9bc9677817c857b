{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState } from 'react';\nimport { useRouter } from 'next/router';\nimport { db } from '../../lib/firebase';\nimport { useAuth } from '../../lib/newAuth';\nimport ManagerTippy from './startup/project/business-app/tippys/ManagerTippy';\nimport BounceLoader from 'react-spinners/BounceLoader';\n\nconst MembersCodeComponent = () => {\n  const {\n    0: projectIdInputValue,\n    1: setProjectIdInputValue\n  } = useState('');\n  const {\n    0: projectLoading,\n    1: setProjectLoading\n  } = useState(false);\n  const {\n    currentUser\n  } = useAuth();\n  const router = useRouter();\n\n  const onNewProjectAdd = async () => {\n    // Fetch particular project\n    try {\n      const data = await db.collection('projects').doc(projectIdInputValue).get();\n      const projectData = data.data();\n\n      if (projectData.uid === currentUser.uid) {\n        alert('You are already a member of this project!');\n        return;\n      } else {\n        setProjectLoading(true); // Fetch particular user\n\n        const usersData = await db.collection('users').doc(currentUser.uid).get();\n        const {\n          name,\n          userCountry,\n          formatedUser\n        } = usersData.data(); // Update particular project users\n\n        const newUsersArray = projectData.projectUsers;\n        newUsersArray.push({\n          role: 'member',\n          email: formatedUser.email,\n          stripeRole: formatedUser.stripeRole,\n          token: formatedUser.token,\n          userUid: formatedUser.uid,\n          userName: name,\n          userCountry\n        }); // Update firebase\n\n        await db.collection('projects').doc(projectIdInputValue).update({\n          projectUsers: newUsersArray\n        }); // Page reload\n\n        router.reload();\n        setProjectLoading(false);\n      }\n    } catch {\n      alert('Your project code is invalid');\n      return;\n    }\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"z-50 text-primarydark rounded-2xl mb-32 mt-12 flex flex-col\",\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"flex\",\n      children: [/*#__PURE__*/_jsx(\"p\", {\n        className: \"text-lg dark:text-background\",\n        children: \"Become a project member\"\n      }), /*#__PURE__*/_jsx(ManagerTippy, {})]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"py-8 px-8 mt-1 w-full flex justify-between items-center border-r-6 rounded-2xl bg-white dark:bg-background\",\n      children: [/*#__PURE__*/_jsx(\"input\", {\n        value: projectIdInputValue,\n        onChange: e => setProjectIdInputValue(e.target.value),\n        placeholder: \"project code\",\n        className: \"w-8/12 bg-white text-base focus:outline-none text-gray\"\n      }), projectLoading ? /*#__PURE__*/_jsx(BounceLoader, {\n        color: '#6C63FF',\n        size: 38\n      }) : /*#__PURE__*/_jsx(\"button\", {\n        onClick: onNewProjectAdd,\n        className: \"z-30 hover:bg-primary hover:text-white dark:hover:bg-primarydark dark:hover:text-background focus:outline-none border border-primary text-primary text-sm font-light py-2 px-6 rounded-2xl dark:text-primarydark dark:border-primarydark\",\n        children: \"Add Project\"\n      })]\n    })]\n  });\n};\n\nexport default MembersCodeComponent;","map":null,"metadata":{},"sourceType":"module"}