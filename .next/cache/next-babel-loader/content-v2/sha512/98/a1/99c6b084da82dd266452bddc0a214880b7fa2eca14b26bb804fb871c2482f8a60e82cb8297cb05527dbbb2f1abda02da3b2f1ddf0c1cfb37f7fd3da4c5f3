{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport Image from 'next/image';\nimport { db } from '../../../../../../lib/firebase';\nimport NavbarTemplate from '../../../../NavbarTemplate';\nimport PDFDocument from '../PDFDocument';\nimport Cookies from 'js-cookie';\nimport Router from 'next/router';\nimport RevenueElement from './RevenueElement'; // Date picker\n\nimport DatePicker from 'react-datepicker';\nimport { addYears, format } from 'date-fns';\nimport moment from 'moment'; // uuidv4\n\nimport { v4 as uuidv4 } from 'uuid'; // gsap\n\nimport gsap, { Linear, TweenMax } from 'gsap'; // Drag & drop\n\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport CostsElement from './CostsElement';\nimport CashFlowPDF from './CashFlowPDF'; // Mobile friendly\n\nimport { isMobile } from 'react-device-detect';\nimport { useWindowSize } from '../../../../../../utils/useWindowSize';\nimport TippyMonster from '../../../../Tippy';\nimport ExitComponent from '../../../ExitComponent';\n\nconst CashFlowPage = () => {\n  // const size = useWindowSize();\n  // console.log(size);\n  const {\n    0: projectName,\n    1: setProjectName\n  } = useState('');\n  const {\n    0: mainDocument,\n    1: setMainDocument\n  } = useState('');\n  const {\n    0: projectId,\n    1: setProjectId\n  } = useState('');\n  const {\n    0: documentId,\n    1: setDocumentId\n  } = useState('');\n  const {\n    0: revenueElements,\n    1: setRevenueElements\n  } = useState();\n  const {\n    0: costsElements,\n    1: setCostsElements\n  } = useState();\n  const {\n    0: budgetElements,\n    1: setBudgetElements\n  } = useState();\n  const chartRef = useRef();\n  const {\n    0: periods,\n    1: setPeriods\n  } = useState();\n  const {\n    0: tax,\n    1: setTax\n  } = useState(); // Sum data\n\n  const {\n    0: totalRevenue,\n    1: setTotalRevenue\n  } = useState();\n  const {\n    0: monthlyRevenue,\n    1: setMonthlyRevenue\n  } = useState();\n  const {\n    0: totalCosts,\n    1: setTotalCosts\n  } = useState();\n  const {\n    0: monthlyCosts,\n    1: setMonthlyCosts\n  } = useState();\n  const {\n    0: grossProfit,\n    1: setGrossProfit\n  } = useState();\n  const {\n    0: netProfit,\n    1: setNetProfit\n  } = useState(); // Mobile friendly\n  // const size = useWindowSize();\n\n  useEffect(async () => {\n    const userUid = await Cookies.get('uid'); // console.log(Router.query.project);\n\n    if (userUid && Router.query.project) {\n      console.log(userUid);\n      const data = await db.collection('projects').where('uid', '==', userUid);\n      data.where('projectName', '==', Router.query.project).get().then(querySnapshot => {\n        console.log(querySnapshot);\n        querySnapshot.forEach(async doc1 => {\n          setProjectId(doc1.data().projectId);\n          setProjectName(doc1.data().projectName);\n          await db.collection('projects').doc(doc1.data().projectId).collection('cashFlow').doc(Router.query.project).collection('inputs').onSnapshot(serverUpdate => {\n            serverUpdate.docs.map(doc => {\n              console.log(doc.data());\n              setMainDocument(doc.data());\n              setDocumentId(doc.id);\n              setRevenueElements(doc.data().revenueElements);\n              setCostsElements(doc.data().costsElements);\n              setBudgetElements(doc.data().budgetElements);\n              setTax(doc.data().tax); // Global start date\n\n              const changedStartDate = doc.data().globalStartDate.seconds * 1000;\n              doc.data().globalStartDate !== '' && setStartDate(new Date(changedStartDate));\n              const changedEndDate = doc.data().globalEndDate.seconds * 1000; // Global end date\n\n              doc.data().globalEndDate !== '' && setEndDate(new Date(changedEndDate)); // Periods\n\n              setPeriods(doc.data().periods); // Total revenue\n\n              const totalRevenueArray = doc.data().revenueElements.map(element => parseInt(element.value * element.periods.length));\n              const totalRevenue = totalRevenueArray.reduce((a, b) => {\n                return a + b;\n              }, 0);\n              setTotalRevenue(Number.isNaN(totalRevenue) ? 0 : Math.round(totalRevenue)); // Monthly revenue\n\n              const periodLength = doc.data().periods.length;\n              const monthlyRevenue = totalRevenue / periodLength;\n              setMonthlyRevenue(Number.isNaN(monthlyRevenue) ? 0 : Math.round(monthlyRevenue)); // Total costs\n\n              const totalCostsArray = doc.data().costsElements.map(element => parseInt(element.value * element.periods.length));\n              const totalCosts = totalCostsArray.reduce((a, b) => {\n                return a + b;\n              }, 0);\n              console.log(totalCosts); // const filteredTotalCosts =\n              //   typeof totalCosts == 'number' ? Math.round(totalCosts) : 0;\n              // console.log(filteredTotalCosts);\n\n              setTotalCosts(Number.isFinite(totalCosts) ? Math.round(totalCosts) : 0); // Monthly costs\n\n              const monthlyCosts = totalCosts / periodLength;\n              setMonthlyCosts(Number.isFinite(monthlyCosts) ? Math.round(monthlyCosts) : 0); // Gross profit\n\n              const grossProfit = totalRevenue - totalCosts;\n              setGrossProfit(Number.isFinite(grossProfit) ? Math.round(grossProfit) : 0); // Net profit\n\n              const tax = parseInt(doc.data().tax);\n              const netProfit = grossProfit - tax / 100 * grossProfit;\n              setNetProfit(Number.isFinite(netProfit) ? Math.round(netProfit) : 0);\n            });\n          });\n        });\n      });\n    }\n  }, [Router.query.project]);\n  useEffect(() => {\n    // const myChartRef = chartRef.current.getContext('2d');\n    document.getElementById(`chartContainer`).innerHTML = '&nbsp;';\n    document.getElementById(`chartContainer`).innerHTML = `<canvas height='${size.width > 680 ? 75 : 'unset'}' id='chart'></canvas>`;\n    const myChartRef = document.getElementById('chart').getContext('2d'); // Revenue datasets\n\n    const revenueDataset = [];\n    const testArray = []; // const monthData = periods && periods.map(() => null);\n\n    revenueElements && revenueElements.map((revenueElement, index) => {\n      const monthData = periods && periods.map(() => null);\n      console.log(revenueElement);\n      periods && periods.map((period, periodIndex) => {\n        revenueElement.periods.map(revenuePeriod => {\n          if (period == revenuePeriod) {\n            if (monthData[periodIndex] == null) {\n              monthData[periodIndex] = revenueElement.value;\n            }\n          }\n        });\n      });\n      console.log(monthData);\n      testArray.push(monthData);\n      revenueDataset.push({\n        label: `revenue / ${revenueElement.title}`,\n        data: monthData,\n        backgroundColor: revenueElement.color,\n        borderColor: revenueElement.color\n      });\n    }); // Costs datasets\n\n    const costsDataset = []; // const testArray = [];\n    // const monthData = periods && periods.map(() => null);\n\n    costsElements && costsElements.map((costsElement, index) => {\n      const monthData = periods && periods.map(() => null);\n      console.log(costsElement);\n      periods && periods.map((period, periodIndex) => {\n        costsElement.periods.map(costsPeriod => {\n          if (period == costsPeriod) {\n            if (monthData[periodIndex] == null) {\n              monthData[periodIndex] = -costsElement.value;\n            }\n          }\n        });\n      });\n      console.log(monthData);\n      testArray.push(monthData);\n      costsDataset.push({\n        label: `costs / ${costsElement.title}`,\n        data: monthData,\n        backgroundColor: costsElement.color,\n        borderColor: costsElement.color\n      });\n    }); // Net worth\n\n    console.log(revenueDataset);\n    console.log(costsDataset); // const netWorth =\n    //   revenueDataset.length !== 0 &&\n    //   costsDataset.length !== 0 &&\n    //   revenueDataset[0].data &&\n    //   revenueDataset[0].data.map((revenueElement, index) => {\n    //     if (revenueElement !== null && costsDataset[0].data[index] !== null) {\n    //       const grossProfit = revenueElement - -costsDataset[0].data[index];\n    //       return grossProfit - (tax / 100) * grossProfit;\n    //     } else if (revenueElement !== null) {\n    //       return revenueElement - (tax / 100) * revenueElement;\n    //     } else if (costsDataset[0].data[index] !== null) {\n    //       return costsDataset[0].data[index];\n    //     } else {\n    //       return null;\n    //     }\n    //   });\n    // ----------------------\n    // Revenue\n\n    const revenueArray = [];\n    revenueDataset.length !== 0 && revenueDataset.length !== 0 && revenueDataset.map(element => revenueArray.push(element.data && element.data.map(data => {\n      if (data !== null) {\n        return parseInt(data);\n      } else {\n        return 0;\n      }\n    })));\n    console.log(revenueArray);\n    const calculatedRevenueArray = revenueArray.length !== 0 && revenueArray[0] !== undefined && revenueArray.reduce((a, b) => a.map((c, i) => c + b[i]));\n    console.log(calculatedRevenueArray); // Costs\n\n    const costsArray = [];\n    console.log(costsDataset);\n    costsDataset.length !== 0 && costsDataset.length !== 0 && costsDataset.map(element => costsArray.push(element.data && element.data.map(data => {\n      if (data !== null) {\n        return parseInt(data);\n      } else {\n        return 0;\n      }\n    })));\n    console.log(costsArray);\n    const calculatedCostsArray = costsArray.length !== 0 && costsArray[0] !== undefined && costsArray.reduce((a, b) => a.map((c, i) => c + b[i]));\n    console.log(calculatedCostsArray); // Final value\n\n    const finalArray = [calculatedRevenueArray, calculatedCostsArray];\n    console.log(finalArray); // Check if any array is falsy\n\n    const calculatedFinalArray = finalArray && finalArray.map(array => {\n      if (!array) {\n        const zeroArray = [];\n        periods && periods.map(period => zeroArray.push(0));\n        return zeroArray;\n      } else {\n        return array;\n      }\n    });\n    console.log(calculatedFinalArray);\n    const finalDataBeforeTax = calculatedFinalArray.length !== 0 && calculatedFinalArray.reduce((a, b) => a && b && a.map((c, i) => c + b[i]));\n    const finalDataAfterTax = finalDataBeforeTax && finalDataBeforeTax.map(data => data - tax / 100 * data);\n    console.log(finalDataAfterTax);\n    const netWorthArray = [];\n    const netWorth = revenueDataset.length !== 0 && costsDataset.length !== 0 && revenueDataset && revenueDataset.map((revenueElement, index) => {\n      const value = revenueElement.data && revenueElement.data.map((dataElement, revenueElementIndex) => {\n        console.log(dataElement);\n\n        if (dataElement !== null && costsDataset[index]) {\n          if (costsDataset[index].data[revenueElementIndex]) {\n            const grossProfit = dataElement - -costsDataset[0].data[revenueElementIndex];\n            netWorthArray.push(grossProfit - tax / 100 * grossProfit); // return grossProfit - (tax / 100) * grossProfit;\n          }\n        }\n      });\n      return value;\n    });\n    console.log(netWorthArray);\n    new Chart(myChartRef, {\n      type: 'bar',\n      data: {\n        labels: periods && periods,\n        datasets: [{\n          type: 'line',\n          label: 'Net profit',\n          data: finalDataAfterTax,\n          backgroundColor: 'rgba(10, 18, 48, 1)',\n          borderColor: 'rgba(10, 18, 48, 1)',\n          fill: 0,\n          lineTension: 0,\n          borderWidth: size.width < 680 ? 1 : 3,\n          pointRadius: size.width < 680 ? 2 : 3\n        }, ...revenueDataset, ...costsDataset]\n      },\n      options: {\n        skipNull: true,\n        responsive: true,\n        plugins: {\n          legend: {\n            position: 'right',\n            labels: {\n              fontFamily: 'Comfortaa',\n              font: {\n                size: size.width < 680 ? 8 : 12\n              },\n              boxWidth: size.width < 680 ? 10 : 40\n            }\n          }\n        },\n        scales: {\n          x: {\n            stacked: true,\n            ticks: {\n              fontFamily: 'Comfortaa',\n              beginAtZero: true,\n              font: {\n                size: size.width < 680 ? 8 : 12\n              }\n            } // beginAtZero: true,\n\n          },\n          y: {\n            stacked: true,\n            ticks: {\n              fontFamily: 'Comfortaa',\n              beginAtZero: true,\n              font: {\n                size: size.width < 680 ? 8 : 12\n              }\n            } // beginAtZero: true,\n\n          } //   defaultFontFamily: (Chart.defaults.global.defaultFontFamily =\n          //     'Comfortaa'),\n          //   scales: {\n          //     yAxes: [\n          //         {\n          //           stacked: true,\n          //           ticks: {\n          //             beginAtZero: true,\n          //           },\n          //         },\n          //       ],\n          //       xAxes: [\n          //         {\n          //           stacked: true,\n          //           ticks: {\n          //             beginAtZero: true,\n          //           },\n          //         },\n          //       ],\n          //   },\n\n        }\n      }\n    });\n  }, [periods, revenueElements, costsElements, tax]);\n\n  const onRevenueElementAdd = async () => {\n    console.log(revenueElements);\n    const wholeArray = [...revenueElements];\n    const newRevenueElements = {\n      title: '',\n      type: 'One time',\n      start: new Date(),\n      end: new Date(),\n      value: '',\n      periods: [],\n      color: 'rgba(244, 67, 54, 1)',\n      index: uuidv4()\n    };\n    wholeArray.push(newRevenueElements);\n    console.log(wholeArray);\n    setRevenueElements(wholeArray);\n    await db.collection('projects').doc(projectId).collection('cashFlow').doc(Router.query.project).collection('inputs').doc(documentId).update({\n      revenueElements: wholeArray\n    });\n  }; // Costs\n\n\n  const onCostsElementAdd = async () => {\n    console.log(costsElements);\n    const wholeArray = [...costsElements];\n    const newCostsElements = {\n      title: '',\n      type: 'One time',\n      start: new Date(),\n      end: new Date(),\n      value: '',\n      periods: [],\n      color: 'rgba(244, 67, 54, 1)',\n      index: uuidv4()\n    };\n    wholeArray.push(newCostsElements);\n    console.log(wholeArray);\n    setCostsElements(wholeArray);\n    await db.collection('projects').doc(projectId).collection('cashFlow').doc(Router.query.project).collection('inputs').doc(documentId).update({\n      costsElements: wholeArray\n    });\n  };\n\n  const {\n    0: startDate,\n    1: setStartDate\n  } = useState(new Date());\n  const {\n    0: endDate,\n    1: setEndDate\n  } = useState(new Date());\n\n  const onStartDateUpdate = async date => {\n    console.log(date);\n    setStartDate(date); // Get months\n\n    const newStartDate = format(date, 'yyyy-MM-dd');\n    const newEndDate = format(endDate, 'yyyy-MM-dd');\n    const startDater = moment(newStartDate);\n    const endDater = moment(newEndDate);\n    const dates = [];\n    startDater.subtract(1, 'month'); //Substract one month to exclude endDater itself\n\n    const month = moment(startDater); //clone the startDate\n\n    while (month < endDater) {\n      month.add(1, 'month');\n      dates.push(month.format('MMM yyyy'));\n    } // Local update\n\n\n    setPeriods(dates); // Firebase update\n\n    await db.collection('projects').doc(projectId).collection('cashFlow').doc(Router.query.project).collection('inputs').doc(documentId).update({\n      periods: dates,\n      globalStartDate: date\n    });\n  };\n\n  const onEndDateUpdate = async date => {\n    setEndDate(date); // Get months\n\n    const newStartDate = format(startDate, 'yyyy-MM-dd');\n    const newEndDate = format(date, 'yyyy-MM-dd');\n    const startDater = moment(newStartDate);\n    const endDater = moment(newEndDate);\n    const dates = [];\n    startDater.subtract(1, 'month'); //Substract one month to exclude endDater itself\n    // endDater.subtract(1, \"month\"); //Substract one month to exclude endDater itself\n\n    const month = moment(startDater); //clone the startDate\n\n    while (month < endDater) {\n      month.add(1, 'month');\n      dates.push(month.format('MMM yyyy'));\n    } // Local update\n\n\n    setPeriods(dates); // Firebase update\n\n    await db.collection('projects').doc(projectId).collection('cashFlow').doc(Router.query.project).collection('inputs').doc(documentId).update({\n      periods: dates,\n      globalEndDate: date\n    });\n  };\n\n  console.log('Running');\n  const revenueRef = useRef();\n  const innerContainerRevenueRef = useRef();\n  const dropDownIcon = useRef();\n  const {\n    0: isRevenueShown,\n    1: setIsRevenueShown\n  } = useState(false);\n\n  const onRevenueShow = () => {\n    const margins = size.width < 1280 ? 72 : 96;\n    const revenueContainerHeight = innerContainerRevenueRef.current.offsetHeight + margins;\n    console.log(innerContainerRevenueRef.current.offsetHeight);\n\n    if (!isRevenueShown) {\n      gsap.to(revenueRef.current, {\n        height: revenueContainerHeight,\n        duration: 1,\n        ease: Linear\n      });\n      gsap.to(dropDownIcon.current, {\n        rotation: '90_cw',\n        duration: 1,\n        ease: Linear\n      });\n      gsap.set(revenueRef.current, {\n        height: '100%',\n        delay: 1\n      });\n      gsap.set(revenueRef.current, {\n        overflow: 'visible',\n        delay: 1\n      });\n      setIsRevenueShown(true);\n    } else if (isRevenueShown) {\n      gsap.set(revenueRef.current, {\n        height: revenueContainerHeight\n      });\n      gsap.set(revenueRef.current, {\n        overflow: 'hidden'\n      });\n      gsap.to(revenueRef.current, {\n        height: 55,\n        duration: 1,\n        ease: Linear\n      });\n      gsap.to(dropDownIcon.current, {\n        rotation: '0_cw',\n        duration: 1,\n        ease: Linear\n      });\n      setIsRevenueShown(false);\n    }\n  }; // Costs\n\n\n  const costsRef = useRef();\n  const innerContainerCostsRef = useRef();\n  const dropDownIconCosts = useRef();\n  const {\n    0: isCostsShown,\n    1: setIsCostsShown\n  } = useState(false);\n\n  const onCostsShow = () => {\n    const margins = size.width < 1280 ? 72 : 96;\n    const revenueContainerHeight = innerContainerCostsRef.current.offsetHeight + margins;\n    console.log(innerContainerCostsRef.current.offsetHeight);\n\n    if (!isCostsShown) {\n      gsap.to(costsRef.current, {\n        height: revenueContainerHeight,\n        duration: 1,\n        ease: Linear\n      });\n      gsap.to(dropDownIconCosts.current, {\n        rotation: '90_cw',\n        duration: 1,\n        ease: Linear\n      });\n      gsap.set(costsRef.current, {\n        height: '100%',\n        delay: 1\n      });\n      gsap.set(costsRef.current, {\n        overflow: 'visible',\n        delay: 1\n      });\n      setIsCostsShown(true);\n    } else if (isCostsShown) {\n      gsap.set(costsRef.current, {\n        overflow: 'hidden'\n      });\n      gsap.set(costsRef.current, {\n        height: revenueContainerHeight\n      });\n      gsap.to(costsRef.current, {\n        height: 55,\n        duration: 1,\n        ease: Linear\n      });\n      gsap.to(dropDownIconCosts.current, {\n        rotation: '0_cw',\n        duration: 1,\n        ease: Linear\n      });\n      setIsCostsShown(false);\n    }\n  };\n\n  const handleOnDragEnd = async result => {\n    if (!result.destination) return;\n    const items = Array.from(revenueElements);\n    const [reorderedItem] = items.splice(result.source.index, 1);\n    items.splice(result.destination.index, 0, reorderedItem);\n    console.log(result);\n    setRevenueElements(items); // Firebase update\n\n    await db.collection('projects').doc(projectId).collection('cashFlow').doc(Router.query.project).collection('inputs').doc(documentId).update({\n      revenueElements: items\n    });\n  }; // Costs\n\n\n  const costsHandleOnDragEnd = async result => {\n    if (!result.destination) return;\n    const items = Array.from(costsElements);\n    const [reorderedItem] = items.splice(result.source.index, 1);\n    items.splice(result.destination.index, 0, reorderedItem);\n    console.log(result);\n    setRevenueElements(items); // Firebase update\n\n    await db.collection('projects').doc(projectId).collection('cashFlow').doc(Router.query.project).collection('inputs').doc(documentId).update({\n      costsElements: items\n    });\n  }; // Tax\n\n\n  const onTaxChange = async value => {\n    // Local update\n    setTax(value); // Firebase update\n\n    await db.collection('projects').doc(projectId).collection('cashFlow').doc(Router.query.project).collection('inputs').doc(documentId).update({\n      tax: value\n    });\n  };\n\n  const data = {\n    periods,\n    revenueElements,\n    costsElements,\n    tax,\n    totalRevenue,\n    monthlyRevenue,\n    totalCosts,\n    monthlyCosts,\n    grossProfit,\n    netProfit,\n    startDate: format(startDate, 'MMM / yyyy'),\n    endDate: format(endDate, 'MMM / yyyy')\n  };\n  const size = {\n    width: window.innerWidth\n  };\n  console.log(size.width > 860 && 30 || size.width < 860 && size.width > 680 && 26 || size.width < 680 && 22);\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(TippyMonster, {\n      cashFlow: true,\n      contentClass: \"h-40 w-80 shadow-lg rounded-2xl bg-primary flex justify-center items-center\",\n      contentText: \"I'm glad you made it all the way here! Analyzing your startup's liquidity is one of the most important parts of planning your entire business. If you need any help, please feel free to contact our team! \"\n    }), /*#__PURE__*/_jsx(ExitComponent, {}), /*#__PURE__*/_jsx(\"div\", {\n      className: \"min-h-screen w-full relative flex flex-col items-center\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"w-full max-w-full relative mt-12 lg1Container:mt-16 mb-16 px-32\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"relative grid grid-cols-2 grid-rows-1 grid-flow-col\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxs(\"svg\", {\n              height: size.width > 860 && 30 || size.width < 860 && size.width > 680 && 26 || size.width < 680 && 22,\n              width: size.width > 860 && 30 || size.width < 860 && size.width > 680 && 26 || size.width < 680 && 22,\n              className: \"fill-current text-primary dark:text-primarydark\",\n              xmlns: \"http://www.w3.org/2000/svg\",\n              viewBox: \"0 0 128 128\",\n              children: [/*#__PURE__*/_jsx(\"title\", {\n                children: \"Landing Success\"\n              }), /*#__PURE__*/_jsx(\"g\", {\n                id: \"Landing_Success\",\n                \"data-name\": \"Landing Success\",\n                children: /*#__PURE__*/_jsx(\"path\", {\n                  className: \"cls-1\",\n                  d: \"M109.3,90.1A46,46,0,0,0,65,36V20.08c1.78-.62,7.21-2.14,12.57.23a19.33,19.33,0,0,0,14.82,0c.87-.38.61.31.61-17.93a1,1,0,0,0-1.43-.93c-.07,0-6.69,2.87-13.18,0A19.41,19.41,0,0,0,65,.93,1,1,0,0,0,63,1V36a45.86,45.86,0,0,0-28.66,10.8C16.18,40.48,4,40,.79,45.51-2.29,50.86,3.94,59.3,10,65.68A11,11,0,0,0,18,83c.81,38.41,46.08,59.2,75.66,34.21,8.53,3,29,9.15,33.55,1.31C130.39,113,123.86,102.65,109.3,90.1ZM77.59,3.31A19.39,19.39,0,0,0,91,3.83V18.68c-1.79.62-7.22,2.13-12.57-.23A19.19,19.19,0,0,0,65,17.93V3.08C66.81,2.46,72.24,1,77.59,3.31ZM65,45v-7c39.69.91,58,50.27,28.21,76.81C71.32,107,46,92.66,27.77,78.64a11,11,0,0,0-3.2-16.13A43.88,43.88,0,0,1,63,38.06V45A1,1,0,0,0,65,45ZM32.55,48.36a46.21,46.21,0,0,0-9.83,13.28,10.93,10.93,0,0,0-11.4,2.47C-8.39,43.23,5.23,39.08,32.55,48.36ZM10,72a9,9,0,1,1,9,9A9,9,0,0,1,10,72Zm10,11a11,11,0,0,0,6.34-2.82c18.45,14.21,43.45,28.35,65.05,36.22C63,139.16,20.83,119.1,20.05,83Zm105.4,34.5c-2.51,4.35-14,3.62-30-1.85a45.61,45.61,0,0,0,13.42-23.21C121.59,103.58,128,113.12,125.45,117.47Z\"\n                })\n              })]\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: \"text-primarydark text-lg mdContainer:text-xl lgContainer:text-2xl mt-2 pl-2 dark:text-background\",\n              children: \"Cash flow analysis\"\n            })]\n          }), /*#__PURE__*/_jsx(CashFlowPDF, {\n            projectName: projectName,\n            projectId: projectId,\n            data: data,\n            periods: periods,\n            revenueElements: revenueElements,\n            costsElements: costsElements,\n            tax: tax,\n            totalRevenue: totalRevenue,\n            monthlyRevenue: monthlyRevenue,\n            totalCosts: totalCosts,\n            monthlyCosts: monthlyCosts,\n            grossProfit: grossProfit,\n            netProfit: netProfit,\n            startDate: startDate,\n            endDate: endDate\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsx(\"h1\", {\n            className: \"text-secondary text-xs mdContainer:text-sm lgContainer:text-base text-gray relative -top-1 lgContainer:top-0\",\n            children: \"Manage your startup cash flow\"\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"w-full grid grid-cols-2fr grid-rows-1fr lgContainer:grid-cols-3fr lgContainer:grid-rows-1fr gap-y-8 gap-x-6 smContainer:gap-x-32 mdContainer:gap-x-12 mt-12\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            id: \"main-datepicker\",\n            className: \"w-full bg-white rounded-2xl py-3 px-3 mdContainer:py-3 mdContainer:px-4 lgContainer:px-6 lgContainer:py-4 shadow-md grid grid-cols-2fr items-center text-xs mdContainer:text-sm lgContainer:text-base\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsx(\"img\", {\n                src: \"/cash-flow/calendar.svg\",\n                height: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18,\n                width: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: \"ml-2 text-primarydark\",\n                children: \"Start:\"\n              })]\n            }), startDate && !isMobile ? /*#__PURE__*/_jsx(DatePicker, {\n              selected: startDate,\n              onChange: date => onStartDateUpdate(date),\n              dateFormat: \"MMMM yyyy\",\n              showMonthYearPicker: true,\n              maxDate: addYears(new Date(), 3),\n              minDate: new Date()\n            }) : /*#__PURE__*/_jsx(DatePicker, {\n              selected: startDate,\n              onChange: date => onStartDateUpdate(date),\n              dateFormat: \"MMMM yyyy\",\n              showMonthYearPicker: true,\n              maxDate: addYears(new Date(), 3),\n              minDate: new Date(),\n              withPortal: true\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            id: \"main-datepicker\",\n            className: \"w-full bg-white rounded-2xl py-3 px-3 mdContainer:py-3 mdContainer:px-4 lgContainer:px-6 lgContainer:py-4 shadow-md grid grid-cols-2fr items-center text-xs mdContainer:text-sm lgContainer:text-base\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsx(\"img\", {\n                src: \"/cash-flow/hourglass1.svg\",\n                height: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18,\n                width: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: \"ml-2 text-primarydark\",\n                children: \"End:\"\n              })]\n            }), endDate && !isMobile ? /*#__PURE__*/_jsx(DatePicker, {\n              selected: endDate,\n              onChange: date => onEndDateUpdate(date),\n              dateFormat: \"MMMM yyyy\",\n              showMonthYearPicker: true,\n              maxDate: addYears(new Date(), 3),\n              minDate: new Date()\n            }) : /*#__PURE__*/_jsx(DatePicker, {\n              selected: endDate,\n              onChange: date => onEndDateUpdate(date),\n              dateFormat: \"MMMM yyyy\",\n              showMonthYearPicker: true,\n              maxDate: addYears(new Date(), 3),\n              minDate: new Date(),\n              withPortal: true\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            style: {\n              width: size.width > 860 && '100%' || size.width < 860 && size.width > 680 && '47%' || size.width < 680 && size.width > 520 && '40%' || size.width < 520 && '47%',\n              gridColumnStart: size.width < 860 ? '1' : 'unset',\n              gridColumnEnd: size.width < 860 ? '3' : 'unset'\n            },\n            className: \"place-self-center bg-white rounded-2xl py-3 px-3 mdContainer:py-3 mdContainer:px-4 lgContainer:px-6 lgContainer:py-4 shadow-md grid grid-cols-2fr items-center text-xs mdContainer:text-sm lgContainer:text-base\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsx(\"img\", {\n                src: \"/cash-flow/tax.svg\",\n                height: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18,\n                width: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: \"ml-2\",\n                children: \"Tax:\"\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex\",\n              style: {\n                textAlignLast: 'right'\n              },\n              children: [/*#__PURE__*/_jsx(\"input\", {\n                id: \"tax-input\",\n                value: tax,\n                onChange: e => onTaxChange(e.target.value),\n                className: \"w-full bg-white focus:outline-none\"\n              }), /*#__PURE__*/_jsx(\"p\", {\n                children: \"%\"\n              })]\n            })]\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          id: \"chartContainer\",\n          className: \"w-full h-1/2 p-4 mdContainer:p-8 bg-white rounded-2xl mt-12 shadow-md\"\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"w-full grid grid-cols-2fr grid-rows-3fr lg1Container:grid-cols-3fr lg1Container:grid-rows-2fr gap-x-6 smContainer:gap-x-12 gap-y-8 mt-12\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"w-full bg-white rounded-2xl py-3 px-3 mdContainer:py-3 mdContainer:px-4 lgContainer:px-6 lgContainer:py-4 shadow-md flex justify-between items-center text-xs mdContainer:text-sm lgContainer:text-base\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsx(\"img\", {\n                src: \"/cash-flow/revenue.svg\",\n                height: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18,\n                width: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: \"ml-2\",\n                children: \"Total revenue:\"\n              })]\n            }), /*#__PURE__*/_jsxs(\"p\", {\n              children: [\"$\", totalRevenue]\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"w-full bg-white rounded-2xl py-3 px-3 mdContainer:py-3 mdContainer:px-4 lgContainer:px-6 lgContainer:py-4 shadow-md flex justify-between items-center text-xs mdContainer:text-sm lgContainer:text-base\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsx(\"img\", {\n                src: \"/cash-flow/monthly.svg\",\n                height: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18,\n                width: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: \"ml-2\",\n                children: \"Monthly revenue:\"\n              })]\n            }), /*#__PURE__*/_jsxs(\"p\", {\n              children: [\"$\", monthlyRevenue]\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"w-full bg-white rounded-2xl py-3 px-3 mdContainer:py-3 mdContainer:px-4 lgContainer:px-6 lgContainer:py-4 shadow-md flex justify-between items-center text-xs mdContainer:text-sm lgContainer:text-base\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsx(\"img\", {\n                src: \"/cash-flow/costs.svg\",\n                height: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18,\n                width: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: \"ml-2\",\n                children: \"Total costs:\"\n              })]\n            }), /*#__PURE__*/_jsxs(\"p\", {\n              children: [\"$\", totalCosts]\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"w-full bg-white rounded-2xl py-3 px-3 mdContainer:py-3 mdContainer:px-4 lgContainer:px-6 lgContainer:py-4 shadow-md flex justify-between items-center text-xs mdContainer:text-sm lgContainer:text-base\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsx(\"img\", {\n                src: \"/cash-flow/monthly-costs.svg\",\n                height: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18,\n                width: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: \"ml-2\",\n                children: \"Monthly costs:\"\n              })]\n            }), /*#__PURE__*/_jsxs(\"p\", {\n              children: [\"$\", monthlyCosts]\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"w-full bg-white rounded-2xl py-3 px-3 mdContainer:py-3 mdContainer:px-4 lgContainer:px-6 lgContainer:py-4 shadow-md flex justify-between items-center text-xs mdContainer:text-sm lgContainer:text-base\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsx(\"img\", {\n                src: \"/cash-flow/megaphone.svg\",\n                height: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18,\n                width: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: \"ml-2\",\n                children: \"Gross profit:\"\n              })]\n            }), /*#__PURE__*/_jsxs(\"p\", {\n              children: [\"$\", grossProfit]\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"w-full bg-white rounded-2xl py-3 px-3 mdContainer:py-3 mdContainer:px-4 lgContainer:px-6 lgContainer:py-4 shadow-md flex justify-between items-center text-xs mdContainer:text-sm lgContainer:text-base\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsx(\"img\", {\n                src: \"/cash-flow/net-worth.svg\",\n                height: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18,\n                width: size.width > 860 && 25 || size.width < 860 && size.width > 680 && 22 || size.width < 680 && 18\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: \"ml-2\",\n                children: \"Net profit:\"\n              })]\n            }), /*#__PURE__*/_jsxs(\"p\", {\n              children: [\"$\", netProfit]\n            })]\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          ref: revenueRef,\n          style: {\n            height: 55,\n            zIndex: 10\n          },\n          className: \"overflow-hidden relative w-full rounded-2xl bg-white dark:bg-background px-4 py-4 flex justify-center items-center mt-12 flex flex-wrap shadow-md\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"w-full flex justify-between items-center\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"lgContainer:ml-2\",\n              children: /*#__PURE__*/_jsx(\"p\", {\n                className: \"text-sm lgContainer:text-base\",\n                children: \"Revenue\"\n              })\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"lgContainer:mr-2 flex flex-nowrap items-center\",\n              children: [/*#__PURE__*/_jsx(\"img\", {\n                onClick: onRevenueElementAdd,\n                className: \"cursor-pointer\",\n                src: \"/cash-flow/add.svg\",\n                height: size.width > 860 && 22 || size.width < 860 && size.width > 680 && 18 || size.width < 680 && 16,\n                width: size.width > 860 && 22 || size.width < 860 && size.width > 680 && 18 || size.width < 680 && 16\n              }), /*#__PURE__*/_jsx(\"img\", {\n                ref: dropDownIcon,\n                onClick: onRevenueShow,\n                className: \"ml-2 cursor-pointer\",\n                src: \"/cash-flow/dropdown.svg\",\n                height: size.width > 860 && 22 || size.width < 860 && size.width > 680 && 18 || size.width < 680 && 16,\n                width: size.width > 860 && 22 || size.width < 860 && size.width > 680 && 18 || size.width < 680 && 16\n              })]\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            ref: innerContainerRevenueRef,\n            className: `w-full ${size.width < 1120 ? 'text-sm mdContainer:text-base lg1Container:mx-8 lg1Container:mb-6 mt-4  bg-background rounded-2xl px-4 mdContainer:px-6 py-4' : 'w-full mx-8 mb-6 mt-4  bg-background rounded-2xl px-4 mdContainer:px-6 py-4'}`,\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              style: {\n                fontSize: size.width < 520 && '0.6rem'\n              },\n              className: \"w-full grid grid-cols-6fr items-center text-xs mdContainer:text-sm lg1Container:text-base\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                children: \"name\"\n              }), /*#__PURE__*/_jsx(\"div\", {\n                children: \"type\"\n              }), /*#__PURE__*/_jsx(\"div\", {\n                children: \"amount\"\n              }), /*#__PURE__*/_jsx(\"div\", {\n                children: \"start\"\n              }), /*#__PURE__*/_jsx(\"div\", {\n                children: \"end\"\n              }), /*#__PURE__*/_jsx(\"div\", {})]\n            }), /*#__PURE__*/_jsx(\"hr\", {\n              className: \"text-primary w-full\"\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"h-full w-full rounded-2xl flex flex-wrap flex-col\",\n              children: /*#__PURE__*/_jsx(DragDropContext, {\n                onDragEnd: handleOnDragEnd,\n                children: /*#__PURE__*/_jsx(Droppable, {\n                  droppableId: \"elements\",\n                  children: provided => /*#__PURE__*/_jsxs(\"div\", _objectSpread(_objectSpread({\n                    className: \"elements\"\n                  }, provided.droppableProps), {}, {\n                    ref: provided.innerRef,\n                    children: [revenueElements && revenueElements.map((element, index) => {\n                      console.log(element);\n                      return /*#__PURE__*/_jsx(Draggable, {\n                        draggableId: element.index,\n                        index: index,\n                        children: provided => /*#__PURE__*/_jsx(RevenueElement, {\n                          provided: provided,\n                          setRevenueElements: setRevenueElements,\n                          mainDocument: mainDocument,\n                          projectId: projectId,\n                          documentId: documentId,\n                          revenueElements: revenueElements,\n                          element: element,\n                          index: index\n                        })\n                      }, element.index);\n                    }), provided.placeholder]\n                  }))\n                })\n              })\n            })]\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          ref: costsRef,\n          style: {\n            height: 55,\n            zIndex: 10\n          },\n          className: \"overflow-hidden relative w-full rounded-2xl bg-white dark:bg-background px-4 py-4 flex justify-center items-center mt-8 flex flex-wrap shadow-md\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"w-full flex justify-between items-center\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"lgContainer:ml-2\",\n              children: /*#__PURE__*/_jsx(\"p\", {\n                className: \"text-sm lgContainer:text-base\",\n                children: \"Costs\"\n              })\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"lgContainer:mr-2 flex flex-nowrap items-center\",\n              children: [/*#__PURE__*/_jsx(\"img\", {\n                onClick: onCostsElementAdd,\n                className: \"cursor-pointer\",\n                src: \"/cash-flow/add.svg\",\n                height: size.width > 860 && 22 || size.width < 860 && size.width > 680 && 18 || size.width < 680 && 16,\n                width: size.width > 860 && 22 || size.width < 860 && size.width > 680 && 18 || size.width < 680 && 16\n              }), /*#__PURE__*/_jsx(\"img\", {\n                ref: dropDownIconCosts,\n                onClick: onCostsShow,\n                className: \"ml-2 cursor-pointer\",\n                src: \"/cash-flow/dropdown.svg\",\n                height: size.width > 860 && 22 || size.width < 860 && size.width > 680 && 18 || size.width < 680 && 16,\n                width: size.width > 860 && 22 || size.width < 860 && size.width > 680 && 18 || size.width < 680 && 16\n              })]\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            ref: innerContainerCostsRef,\n            className: `w-full ${size.width < 1120 ? 'text-sm mdContainer:text-base lg1Container:mx-8 lg1Container:mb-6 mt-4  bg-background rounded-2xl px-4 mdContainer:px-6 py-4' : 'w-full mx-8 mb-6 mt-4  bg-background rounded-2xl px-4 mdContainer:px-6 py-4'}`,\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"w-full grid grid-cols-6fr items-center\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                children: \"name\"\n              }), /*#__PURE__*/_jsx(\"div\", {\n                children: \"type\"\n              }), /*#__PURE__*/_jsx(\"div\", {\n                children: \"amount\"\n              }), /*#__PURE__*/_jsx(\"div\", {\n                children: \"start\"\n              }), /*#__PURE__*/_jsx(\"div\", {\n                children: \"end\"\n              }), /*#__PURE__*/_jsx(\"div\", {})]\n            }), /*#__PURE__*/_jsx(\"hr\", {\n              className: \"text-primary w-full\"\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"h-full w-full rounded-2xl flex flex-wrap flex-col\",\n              children: /*#__PURE__*/_jsx(DragDropContext, {\n                onDragEnd: costsHandleOnDragEnd,\n                children: /*#__PURE__*/_jsx(Droppable, {\n                  droppableId: \"elements\",\n                  children: provided => /*#__PURE__*/_jsxs(\"div\", _objectSpread(_objectSpread({\n                    className: \"elements\"\n                  }, provided.droppableProps), {}, {\n                    ref: provided.innerRef,\n                    children: [costsElements && costsElements.map((element, index) => {\n                      console.log(element);\n                      return /*#__PURE__*/_jsx(Draggable, {\n                        draggableId: element.index,\n                        index: index,\n                        children: provided => /*#__PURE__*/_jsx(CostsElement, {\n                          provided: provided,\n                          setCostsElements: setCostsElements,\n                          mainDocument: mainDocument,\n                          projectId: projectId,\n                          documentId: documentId,\n                          costsElements: costsElements,\n                          element: element,\n                          index: index\n                        })\n                      }, element.index);\n                    }), provided.placeholder]\n                  }))\n                })\n              })\n            })]\n          })]\n        })]\n      })\n    })]\n  });\n};\n\nexport default CashFlowPage;","map":null,"metadata":{},"sourceType":"module"}