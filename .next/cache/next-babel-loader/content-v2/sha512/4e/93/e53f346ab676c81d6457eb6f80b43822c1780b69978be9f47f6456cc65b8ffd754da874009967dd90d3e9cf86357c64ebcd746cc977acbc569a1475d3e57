{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _toConsumableArray from \"C:/off-saas/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"C:/off-saas/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/off-saas/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React, { useEffect, useState } from 'react';\nimport { db } from '../../../../../../lib/firebase';\nimport NavbarTemplate from '../../../../NavbarTemplate';\nimport CashFlowPDF from '../cash-flow/CashFlowPDF';\nimport Competitor from './Competitor';\nimport Cookies from 'js-cookie';\nimport Router from 'next/router';\nimport Image from 'next/image';\nimport { v4 as uuidv4 } from 'uuid';\nimport CompetitorsPDF from './CompetitorsPDF'; // Drag & drop\n// Mobile friendly\n\nimport { useWindowSize } from '../../../../../../utils/useWindowSize';\n\nvar CompetitorsPage = function CompetitorsPage() {\n  var _useState = useState(''),\n      projectId = _useState[0],\n      setProjectId = _useState[1];\n\n  var _useState2 = useState(''),\n      documentId = _useState2[0],\n      setDocumentId = _useState2[1];\n\n  var _useState3 = useState(),\n      competitors = _useState3[0],\n      setCompetitors = _useState3[1];\n\n  var size = useWindowSize();\n\n  var _useState4 = useState(false),\n      loadingHelper = _useState4[0],\n      setLoadingHelper = _useState4[1];\n\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var userUid, data;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            userUid = Cookies.get('uid'); // console.log(Router.query.project);\n\n            console.log(userUid && Router.query.project);\n\n            if (userUid && Router.query.project) {\n              data = db.collection('projects').where('uid', '==', userUid);\n              data.where('projectName', '==', Router.query.project).get().then(function (querySnapshot) {\n                querySnapshot.forEach( /*#__PURE__*/function () {\n                  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(doc1) {\n                    return _regeneratorRuntime.wrap(function _callee$(_context) {\n                      while (1) {\n                        switch (_context.prev = _context.next) {\n                          case 0:\n                            setProjectId(doc1.data().projectId);\n                            db.collection('projects').doc(doc1.data().projectId).collection('competitors').doc(Router.query.project).collection('inputs').onSnapshot(function (serverUpdate) {\n                              serverUpdate.docs.map(function (doc) {\n                                console.log(doc.data());\n                                var data = doc.data();\n                                setDocumentId(doc.id);\n                                setCompetitors(data.competitorsArray);\n                                setLoadingHelper(false);\n                              });\n                            });\n\n                          case 2:\n                          case \"end\":\n                            return _context.stop();\n                        }\n                      }\n                    }, _callee);\n                  }));\n\n                  return function (_x) {\n                    return _ref2.apply(this, arguments);\n                  };\n                }());\n              });\n            } else {\n              console.log('Loading failed');\n              setLoadingHelper(true);\n            }\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  })), [loadingHelper, Router.query.project]);\n  console.log(competitors);\n\n  var onNewCompetitorAdd = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var wholeCompetitorsArray, newCompetitor;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              wholeCompetitorsArray = _toConsumableArray(competitors);\n              newCompetitor = {\n                image: '',\n                title: '',\n                location: '',\n                employees: '',\n                revenue: '',\n                index: uuidv4(),\n                // Elements\n                companyDescription: '',\n                businessModel: '',\n                productOverview: '',\n                promotionStrategy: '',\n                companyStrengths: '',\n                companyWeaknesses: '',\n                opportunities: ''\n              };\n              wholeCompetitorsArray.push(newCompetitor);\n              setCompetitors(wholeCompetitorsArray); // Firebase update\n\n              _context3.next = 6;\n              return db.collection('projects').doc(projectId).collection('competitors').doc(Router.query.project).collection('inputs').doc(documentId).update({\n                competitorsArray: wholeCompetitorsArray\n              });\n\n            case 6:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function onNewCompetitorAdd() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsx(NavbarTemplate, {\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: \"min-h-screen w-full relative flex flex-col items-center text-primarydark\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"w-full max-w-full relative mt-8 mdContainer:mt-16 mb-16 px-8 mdContainer:px-16 lgContainer:px-32 bigContainer:px-48 big2Container:px-64 big3Container:px-80 QHD:max-w-QHD\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"relative grid grid-cols-2 grid-rows-1 grid-flow-col\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxs(\"svg\", {\n              height: \"30\",\n              width: \"30\",\n              className: \"fill-current text-primary dark:text-primarydark\",\n              xmlns: \"http://www.w3.org/2000/svg\",\n              viewBox: \"0 0 128 128\",\n              children: [/*#__PURE__*/_jsx(\"title\", {\n                children: \"Landing Success\"\n              }), /*#__PURE__*/_jsx(\"g\", {\n                id: \"Landing_Success\",\n                \"data-name\": \"Landing Success\",\n                children: /*#__PURE__*/_jsx(\"path\", {\n                  className: \"cls-1\",\n                  d: \"M109.3,90.1A46,46,0,0,0,65,36V20.08c1.78-.62,7.21-2.14,12.57.23a19.33,19.33,0,0,0,14.82,0c.87-.38.61.31.61-17.93a1,1,0,0,0-1.43-.93c-.07,0-6.69,2.87-13.18,0A19.41,19.41,0,0,0,65,.93,1,1,0,0,0,63,1V36a45.86,45.86,0,0,0-28.66,10.8C16.18,40.48,4,40,.79,45.51-2.29,50.86,3.94,59.3,10,65.68A11,11,0,0,0,18,83c.81,38.41,46.08,59.2,75.66,34.21,8.53,3,29,9.15,33.55,1.31C130.39,113,123.86,102.65,109.3,90.1ZM77.59,3.31A19.39,19.39,0,0,0,91,3.83V18.68c-1.79.62-7.22,2.13-12.57-.23A19.19,19.19,0,0,0,65,17.93V3.08C66.81,2.46,72.24,1,77.59,3.31ZM65,45v-7c39.69.91,58,50.27,28.21,76.81C71.32,107,46,92.66,27.77,78.64a11,11,0,0,0-3.2-16.13A43.88,43.88,0,0,1,63,38.06V45A1,1,0,0,0,65,45ZM32.55,48.36a46.21,46.21,0,0,0-9.83,13.28,10.93,10.93,0,0,0-11.4,2.47C-8.39,43.23,5.23,39.08,32.55,48.36ZM10,72a9,9,0,1,1,9,9A9,9,0,0,1,10,72Zm10,11a11,11,0,0,0,6.34-2.82c18.45,14.21,43.45,28.35,65.05,36.22C63,139.16,20.83,119.1,20.05,83Zm105.4,34.5c-2.51,4.35-14,3.62-30-1.85a45.61,45.61,0,0,0,13.42-23.21C121.59,103.58,128,113.12,125.45,117.47Z\"\n                })\n              })]\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: \"text-primarydark text-xl ssmContainer:text-2xl mt-2 pl-2 dark:text-background\",\n              children: \"Competitors analysis\"\n            })]\n          }), size.width > 680 && /*#__PURE__*/_jsx(CompetitorsPDF, {})]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsx(\"h1\", {\n            className: \"text-secondary text-base ssmContainer:text-md text-gray\",\n            children: \"Manage your startup competitors\"\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"w-full bg-white rounded-2xl mt-12 p-8\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"flex justify-between items-center\",\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: \"text-primarydark text-md ssmContainer:text-lg\",\n              children: \"Competitors\"\n            }), /*#__PURE__*/_jsx(Image, {\n              className: \"cursor-pointer\",\n              onClick: onNewCompetitorAdd,\n              src: \"/competitors/add1.svg\",\n              height: 32,\n              width: 32\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"grid grid-cols-1frr normalContainer:grid-cols-2fr gap-x-12\",\n            children: competitors && competitors.map(function (competitor, index) {\n              return /*#__PURE__*/_jsx(Competitor, {\n                setCompetitors: setCompetitors,\n                data: competitor,\n                projectId: projectId,\n                documentId: documentId,\n                competitors: competitors,\n                index: index\n              }, index);\n            })\n          })]\n        })]\n      })\n    })\n  });\n};\n\nexport default CompetitorsPage;","map":null,"metadata":{},"sourceType":"module"}