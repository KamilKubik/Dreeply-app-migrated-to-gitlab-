{"ast":null,"code":"import Router from 'next/router';\nimport { db } from '../../../../../../../lib/firebase'; // Add new section\n\nexport const newSectionPage = async (title, sections, selectedSection) => {\n  const section = {\n    position: this.state.sections.length,\n    title: title,\n    body: ''\n  };\n  const newFromDB = await db.collection('projects').doc(this.state.projectId).collection('businessPlan').doc(Router.query.project).collection('inputs').add({\n    position: section.position,\n    title: section.title,\n    // body: section.body,\n    fields: [],\n    timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n    createdAt: new Date()\n  });\n  const newID = newFromDB.id; // await this.setState({ sections: [...this.state.sections, section] });\n\n  const newSectionIndex = sections.indexOf(this.state.sections.filter(_section => _section.id === newID)[0]);\n  selectedSection(sections[newSectionIndex]);\n}; // Select section\n\nselectSectionPage = (section, index) => this.setState({\n  selectedSectionIndex: index,\n  selectedSection: section\n});","map":{"version":3,"sources":["C:/off-saas/components/dashboard/startup/project/business-app/business-plan/businessPlanUtils/sections.js"],"names":["Router","db","newSectionPage","title","sections","selectedSection","section","position","state","length","body","newFromDB","collection","doc","projectId","query","project","add","fields","timestamp","firebase","firestore","FieldValue","serverTimestamp","createdAt","Date","newID","id","newSectionIndex","indexOf","filter","_section","selectSectionPage","index","setState","selectedSectionIndex"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,aAAnB;AACA,SAASC,EAAT,QAAmB,mCAAnB,C,CAEA;;AACA,OAAO,MAAMC,cAAc,GAAG,OAAOC,KAAP,EAAcC,QAAd,EAAwBC,eAAxB,KAA4C;AACxE,QAAMC,OAAO,GAAG;AACdC,IAAAA,QAAQ,EAAE,KAAKC,KAAL,CAAWJ,QAAX,CAAoBK,MADhB;AAEdN,IAAAA,KAAK,EAAEA,KAFO;AAGdO,IAAAA,IAAI,EAAE;AAHQ,GAAhB;AAKA,QAAMC,SAAS,GAAG,MAAMV,EAAE,CACvBW,UADqB,CACV,UADU,EAErBC,GAFqB,CAEjB,KAAKL,KAAL,CAAWM,SAFM,EAGrBF,UAHqB,CAGV,cAHU,EAIrBC,GAJqB,CAIjBb,MAAM,CAACe,KAAP,CAAaC,OAJI,EAKrBJ,UALqB,CAKV,QALU,EAMrBK,GANqB,CAMjB;AACHV,IAAAA,QAAQ,EAAED,OAAO,CAACC,QADf;AAEHJ,IAAAA,KAAK,EAAEG,OAAO,CAACH,KAFZ;AAGH;AACAe,IAAAA,MAAM,EAAE,EAJL;AAKHC,IAAAA,SAAS,EAAEC,QAAQ,CAACC,SAAT,CAAmBC,UAAnB,CAA8BC,eAA9B,EALR;AAMHC,IAAAA,SAAS,EAAE,IAAIC,IAAJ;AANR,GANiB,CAAxB;AAcA,QAAMC,KAAK,GAAGf,SAAS,CAACgB,EAAxB,CApBwE,CAqBxE;;AACA,QAAMC,eAAe,GAAGxB,QAAQ,CAACyB,OAAT,CAAiB,KAAKrB,KAAL,CAAWJ,QAAX,CAAoB0B,MAApB,CAA4BC,QAAD,IAAcA,QAAQ,CAACJ,EAAT,KAAgBD,KAAzD,EAAgE,CAAhE,CAAjB,CAAxB;AACArB,EAAAA,eAAe,CAACD,QAAQ,CAACwB,eAAD,CAAT,CAAf;AACD,CAxBM,C,CA0BP;;AACAI,iBAAiB,GAAG,CAAC1B,OAAD,EAAU2B,KAAV,KAAoB,KAAKC,QAAL,CAAc;AAAEC,EAAAA,oBAAoB,EAAEF,KAAxB;AAA+B5B,EAAAA,eAAe,EAAEC;AAAhD,CAAd,CAAxC","sourcesContent":["import Router from 'next/router';\r\nimport { db } from '../../../../../../../lib/firebase';\r\n\r\n// Add new section\r\nexport const newSectionPage = async (title, sections, selectedSection) => {\r\n  const section = {\r\n    position: this.state.sections.length,\r\n    title: title,\r\n    body: '',\r\n  };\r\n  const newFromDB = await db\r\n    .collection('projects')\r\n    .doc(this.state.projectId)\r\n    .collection('businessPlan')\r\n    .doc(Router.query.project)\r\n    .collection('inputs')\r\n    .add({\r\n      position: section.position,\r\n      title: section.title,\r\n      // body: section.body,\r\n      fields: [],\r\n      timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n      createdAt: new Date(),\r\n    });\r\n  const newID = newFromDB.id;\r\n  // await this.setState({ sections: [...this.state.sections, section] });\r\n  const newSectionIndex = sections.indexOf(this.state.sections.filter((_section) => _section.id === newID)[0]);\r\n  selectedSection(sections[newSectionIndex]);\r\n};\r\n\r\n// Select section\r\nselectSectionPage = (section, index) => this.setState({ selectedSectionIndex: index, selectedSection: section });\r\n"]},"metadata":{},"sourceType":"module"}