{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport { saveAs } from 'file-saver';\nimport Router from 'next/router';\nimport Cookies from 'js-cookie';\nimport { db } from '../../../../../../lib/firebase'; // import font from '../../../../../../public/fonts/comfortaa.ttf';\n\nimport gsap, { Linear } from 'gsap';\nimport { useWindowSize } from '../../../../../../utils/useWindowSize';\nimport { Font, pdf, Page, Text, View, Image, Document, StyleSheet, PDFViewer, PDFDownloadLink } from '@react-pdf/renderer'; // Font.register({ src: '/fonts/poppins.ttf', family: 'Poppins', format: 'truetype' });\n\nFont.register({\n  src: '/fonts/comfortaa.ttf',\n  family: 'Comfortaa'\n});\nconst styles = StyleSheet.create({\n  homePage: {\n    padding: 36,\n    fontFamily: 'Comfortaa',\n    backgroundColor: '#f8f9fb',\n    color: '#0a1230'\n  },\n  mainTitle: {\n    fontSize: 22,\n    color: '#0a1230',\n    textAlign: 'center',\n    paddingBottom: 42\n  }\n});\n\nconst MyDocument = ({\n  competitors\n}) => {\n  return /*#__PURE__*/_jsx(Document, {\n    scale: 96 / 72,\n    renderMode: \"svg\",\n    children: competitors.map((competitor, index) => /*#__PURE__*/_jsxs(Page, {\n      size: \"A4\",\n      style: styles.homePage,\n      children: [index === 0 && /*#__PURE__*/_jsx(View, {\n        children: /*#__PURE__*/_jsx(Text, {\n          style: styles.mainTitle,\n          children: \"Competitors analysis\"\n        })\n      }), /*#__PURE__*/_jsxs(View, {\n        style: {\n          display: 'flex',\n          flexDirection: 'row'\n        },\n        children: [competitor.image === '' ? /*#__PURE__*/_jsx(View, {\n          style: {\n            height: 72,\n            width: 72,\n            backgroundColor: '#6C63FF',\n            borderRadius: 9999,\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center'\n          },\n          children: /*#__PURE__*/_jsx(Image, {\n            src: \"/competitors/empty-image-pdf.png\",\n            height: 64,\n            width: 64\n          })\n        }) : /*#__PURE__*/_jsx(View, {}), /*#__PURE__*/_jsxs(View, {\n          style: {\n            fontSize: 12\n          },\n          children: [/*#__PURE__*/_jsxs(View, {\n            style: {\n              display: 'flex',\n              flexDirection: 'row',\n              justifyContent: 'space-between',\n              alignContent: 'space-between',\n              marginLeft: 32,\n              width: '100%'\n            },\n            children: [competitor.title !== '' && /*#__PURE__*/_jsx(View, {\n              style: {\n                backgroundColor: '#fcfefe',\n                borderRadius: 16,\n                paddingVertical: 8,\n                paddingHorizontal: 16\n              },\n              children: /*#__PURE__*/_jsxs(Text, {\n                children: [\"name / \", competitor.title]\n              })\n            }), competitor.location !== '' && /*#__PURE__*/_jsx(View, {\n              style: {\n                backgroundColor: '#fcfefe',\n                borderRadius: 16,\n                paddingVertical: 8,\n                paddingHorizontal: 16\n              },\n              children: /*#__PURE__*/_jsxs(Text, {\n                children: [\"location / \", competitor.location]\n              })\n            })]\n          }), /*#__PURE__*/_jsxs(View, {\n            style: {\n              display: 'flex',\n              flexDirection: 'row',\n              justifyContent: 'space-between',\n              alignContent: 'space-between',\n              marginLeft: 32,\n              marginTop: 12,\n              width: '100%'\n            },\n            children: [competitor.employees !== '' && /*#__PURE__*/_jsx(View, {\n              style: {\n                backgroundColor: '#fcfefe',\n                borderRadius: 16,\n                paddingVertical: 8,\n                paddingHorizontal: 16\n              },\n              children: /*#__PURE__*/_jsxs(Text, {\n                children: [\"employees / \", competitor.employees]\n              })\n            }), competitor.revenue !== '' && /*#__PURE__*/_jsx(View, {\n              style: {\n                backgroundColor: '#fcfefe',\n                borderRadius: 16,\n                paddingVertical: 8,\n                paddingHorizontal: 16\n              },\n              children: /*#__PURE__*/_jsxs(Text, {\n                children: [\"revenue / \", competitor.revenue]\n              })\n            })]\n          })]\n        })]\n      }), competitor.companyDescription !== '' && /*#__PURE__*/_jsxs(View, {\n        wrap: false,\n        style: {\n          marginTop: 32\n        },\n        children: [/*#__PURE__*/_jsxs(View, {\n          style: {\n            display: 'flex',\n            flexDirection: 'row',\n            alignItems: 'flex-end',\n            fontSize: 14\n          },\n          children: [/*#__PURE__*/_jsx(Image, {\n            src: \"/competitors/pdf/description.png\",\n            style: {\n              height: 20,\n              width: 20\n            }\n          }), /*#__PURE__*/_jsx(Text, {\n            style: {\n              marginLeft: 8\n            },\n            children: \"Company description\"\n          })]\n        }), /*#__PURE__*/_jsx(View, {\n          style: {\n            backgroundColor: '#fcfefe',\n            borderRadius: 16,\n            paddingVertical: 12,\n            paddingHorizontal: 16,\n            marginTop: 8,\n            fontSize: 10\n          },\n          children: /*#__PURE__*/_jsx(Text, {\n            children: competitor.companyDescription\n          })\n        })]\n      }), competitor.businessModel !== '' && /*#__PURE__*/_jsxs(View, {\n        wrap: false,\n        style: {\n          marginTop: 32\n        },\n        children: [/*#__PURE__*/_jsxs(View, {\n          style: {\n            display: 'flex',\n            flexDirection: 'row',\n            alignItems: 'flex-end',\n            fontSize: 14\n          },\n          children: [/*#__PURE__*/_jsx(Image, {\n            src: \"/competitors/pdf/model.png\",\n            style: {\n              height: 20,\n              width: 20\n            }\n          }), /*#__PURE__*/_jsx(Text, {\n            style: {\n              marginLeft: 8\n            },\n            children: \"Business model\"\n          })]\n        }), /*#__PURE__*/_jsx(View, {\n          style: {\n            backgroundColor: '#fcfefe',\n            borderRadius: 16,\n            paddingVertical: 12,\n            paddingHorizontal: 16,\n            marginTop: 8,\n            fontSize: 10\n          },\n          children: /*#__PURE__*/_jsx(Text, {\n            children: competitor.businessModel\n          })\n        })]\n      }), competitor.productOverview !== '' && /*#__PURE__*/_jsxs(View, {\n        wrap: false,\n        style: {\n          marginTop: 32\n        },\n        children: [/*#__PURE__*/_jsxs(View, {\n          style: {\n            display: 'flex',\n            flexDirection: 'row',\n            alignItems: 'flex-end',\n            fontSize: 14\n          },\n          children: [/*#__PURE__*/_jsx(Image, {\n            src: \"/competitors/pdf/product.png\",\n            style: {\n              height: 20,\n              width: 20\n            }\n          }), /*#__PURE__*/_jsx(Text, {\n            style: {\n              marginLeft: 8\n            },\n            children: \"Product overview\"\n          })]\n        }), /*#__PURE__*/_jsx(View, {\n          style: {\n            backgroundColor: '#fcfefe',\n            borderRadius: 16,\n            paddingVertical: 12,\n            paddingHorizontal: 16,\n            marginTop: 8,\n            fontSize: 10\n          },\n          children: /*#__PURE__*/_jsx(Text, {\n            children: competitor.productOverview\n          })\n        })]\n      }), competitor.promotionStrategy !== '' && /*#__PURE__*/_jsxs(View, {\n        wrap: false,\n        style: {\n          marginTop: 32\n        },\n        children: [/*#__PURE__*/_jsxs(View, {\n          style: {\n            display: 'flex',\n            flexDirection: 'row',\n            alignItems: 'flex-end',\n            fontSize: 14\n          },\n          children: [/*#__PURE__*/_jsx(Image, {\n            src: \"/competitors/pdf/promotion.png\",\n            style: {\n              height: 20,\n              width: 20\n            }\n          }), /*#__PURE__*/_jsx(Text, {\n            style: {\n              marginLeft: 8\n            },\n            children: \"Promotion strategy\"\n          })]\n        }), /*#__PURE__*/_jsx(View, {\n          style: {\n            backgroundColor: '#fcfefe',\n            borderRadius: 16,\n            paddingVertical: 12,\n            paddingHorizontal: 16,\n            marginTop: 8,\n            fontSize: 10\n          },\n          children: /*#__PURE__*/_jsx(Text, {\n            children: competitor.promotionStrategy\n          })\n        })]\n      }), competitor.companyStrengths !== '' && /*#__PURE__*/_jsxs(View, {\n        wrap: false,\n        style: {\n          marginTop: 32\n        },\n        children: [/*#__PURE__*/_jsxs(View, {\n          style: {\n            display: 'flex',\n            flexDirection: 'row',\n            alignItems: 'flex-end',\n            fontSize: 14\n          },\n          children: [/*#__PURE__*/_jsx(Image, {\n            src: \"/competitors/pdf/strengths.png\",\n            style: {\n              height: 20,\n              width: 20\n            }\n          }), /*#__PURE__*/_jsx(Text, {\n            style: {\n              marginLeft: 8\n            },\n            children: \"Company strengths\"\n          })]\n        }), /*#__PURE__*/_jsx(View, {\n          style: {\n            backgroundColor: '#fcfefe',\n            borderRadius: 16,\n            paddingVertical: 12,\n            paddingHorizontal: 16,\n            marginTop: 8,\n            fontSize: 10\n          },\n          children: /*#__PURE__*/_jsx(Text, {\n            children: competitor.companyStrengths\n          })\n        })]\n      }), competitor.companyWeaknesses !== '' && /*#__PURE__*/_jsxs(View, {\n        wrap: false,\n        style: {\n          marginTop: 32\n        },\n        children: [/*#__PURE__*/_jsxs(View, {\n          style: {\n            display: 'flex',\n            flexDirection: 'row',\n            alignItems: 'flex-end',\n            fontSize: 14\n          },\n          children: [/*#__PURE__*/_jsx(Image, {\n            src: \"/competitors/pdf/weaknesses.png\",\n            style: {\n              height: 20,\n              width: 20\n            }\n          }), /*#__PURE__*/_jsx(Text, {\n            style: {\n              marginLeft: 8\n            },\n            children: \"Company weaknesses\"\n          })]\n        }), /*#__PURE__*/_jsx(View, {\n          style: {\n            backgroundColor: '#fcfefe',\n            borderRadius: 16,\n            paddingVertical: 12,\n            paddingHorizontal: 16,\n            marginTop: 8,\n            fontSize: 10\n          },\n          children: /*#__PURE__*/_jsx(Text, {\n            children: competitor.companyWeaknesses\n          })\n        })]\n      }), competitor.opportunities !== '' && /*#__PURE__*/_jsxs(View, {\n        wrap: false,\n        style: {\n          marginTop: 32\n        },\n        children: [/*#__PURE__*/_jsxs(View, {\n          style: {\n            display: 'flex',\n            flexDirection: 'row',\n            alignItems: 'flex-end',\n            fontSize: 14\n          },\n          children: [/*#__PURE__*/_jsx(Image, {\n            src: \"/competitors/pdf/opportunities.png\",\n            style: {\n              height: 20,\n              width: 20\n            }\n          }), /*#__PURE__*/_jsx(Text, {\n            style: {\n              marginLeft: 8\n            },\n            children: \"Company opportunities\"\n          })]\n        }), /*#__PURE__*/_jsx(View, {\n          style: {\n            backgroundColor: '#fcfefe',\n            borderRadius: 16,\n            paddingVertical: 12,\n            paddingHorizontal: 16,\n            marginTop: 8,\n            fontSize: 10\n          },\n          children: /*#__PURE__*/_jsx(Text, {\n            children: competitor.opportunities\n          })\n        })]\n      })]\n    }))\n  });\n};\n\nconst CompetitorsPDF = () => {\n  const {\n    0: competitors,\n    1: setCompetitors\n  } = useState();\n  const size = useWindowSize();\n  useEffect(async () => {\n    const userUid = await Cookies.get('uid'); // console.log(Router.query.project);\n\n    console.log(userUid);\n\n    if (userUid && Router.query.project) {\n      const data = await db.collection('projects').where('uid', '==', userUid);\n      data.where('projectName', '==', Router.query.project).get().then(querySnapshot => {\n        querySnapshot.forEach(async doc1 => {\n          db.collection('projects').doc(doc1.data().projectId).collection('competitors').doc(Router.query.project).collection('inputs').onSnapshot(serverUpdate => {\n            serverUpdate.docs.map(doc => {\n              const data = doc.data();\n              setCompetitors(data.competitorsArray);\n            });\n          });\n        });\n      });\n    }\n  }, []);\n  const saveContainer = useRef();\n  const {\n    0: saveContainerHelper,\n    1: setSaveContainerHelper\n  } = useState(false);\n\n  const saveSectionDropDown = () => {\n    if (!saveContainerHelper) {\n      gsap.to(saveContainer.current, {\n        autoAlpha: 1,\n        duration: 1,\n        ease: Linear\n      });\n      setSaveContainerHelper(true);\n    } else if (saveContainerHelper) {\n      gsap.to(saveContainer.current, {\n        autoAlpha: 0,\n        duration: 1,\n        ease: Linear\n      });\n      setSaveContainerHelper(false);\n    }\n  };\n\n  const dropdownButton = useRef();\n  const dropdownContainer = useRef();\n  const {\n    0: dropdownButtonColorHelper,\n    1: setDropdownButtonColorHelper\n  } = useState(false);\n  const {\n    0: dropdownContainerHelper,\n    1: setDropdownContainerHelper\n  } = useState(false);\n\n  const onSaveDropdownShow = () => {\n    if (!dropdownContainerHelper) {\n      gsap.to(dropdownContainer.current, {\n        autoAlpha: 1,\n        duration: 1,\n        ease: Linear\n      }); // gsap.to(dropdownButton.current, { backgroundColor: '#6C63FF', color: '#f8f9fb', duration: 1, ease: Linear });\n\n      setDropdownContainerHelper(true);\n      setDropdownButtonColorHelper(true);\n    } else if (dropdownContainerHelper) {\n      gsap.to(dropdownContainer.current, {\n        autoAlpha: 0,\n        duration: 1,\n        ease: Linear\n      }); // gsap.to(dropdownButton.current, { backgroundColor: '#f8f9fb', color: '#6C63FF', duration: 1, ease: Linear });\n\n      setDropdownContainerHelper(false);\n      setDropdownButtonColorHelper(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsx(\"div\", {\n    ref: saveContainer,\n    className: \"relative flex justify-start\",\n    children: size.width < 680 ? /*#__PURE__*/_jsx(\"div\", {\n      className: \"flex mt-4\",\n      children: /*#__PURE__*/_jsx(\"img\", {\n        onClick: async e => {\n          e.preventDefault();\n\n          const doc = /*#__PURE__*/_jsx(MyDocument, {\n            competitors: competitors\n          });\n\n          const asPdf = pdf([]);\n          asPdf.updateContainer(doc);\n          const blob = await asPdf.toBlob();\n          saveAs(blob, `${Router.query.project}/competitors-analysis.pdf`);\n        },\n        src: \"/mobile-navbar/pdf.svg\",\n        height: 30,\n        width: 30\n      })\n    }) : /*#__PURE__*/_jsxs(\"div\", {\n      className: \"relative w-full flex justify-end items-center\",\n      children: [/*#__PURE__*/_jsx(\"button\", {\n        ref: dropdownButton,\n        onClick: onSaveDropdownShow,\n        className: `hover:bg-primary hover:text-white dark:hover:bg-primarydark dark:hover:text-background focus:outline-none border border-primary text-primary text-sm font-light py-2 px-8 rounded-2xl mt-2 dark:text-primarydark dark:border-primarydark ${dropdownButtonColorHelper ? 'bg-primary text-background dark:bg-primarydark dark:text-background' : ''}`,\n        children: \"Save my work\"\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        ref: dropdownContainer,\n        className: \"absolute bg-white rounded-2xl shadow-xl p-6 top-14 z-50 invisible opacity-0\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex items-center justify-start\",\n          children: [/*#__PURE__*/_jsx(\"img\", {\n            src: \"/mobile-navbar/success.svg\",\n            height: 26,\n            width: 26\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"text-lg ml-2\",\n            children: \"Show the world your work!\"\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"px-6 py-4 bg-background rounded-2xl mt-2 pr-6\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: \"flex\",\n              children: \"Save as PDF:\"\n            }), /*#__PURE__*/_jsx(\"img\", {\n              onClick: async e => {\n                e.preventDefault();\n\n                const doc = /*#__PURE__*/_jsx(MyDocument, {\n                  competitors: competitors\n                });\n\n                const asPdf = pdf([]);\n                asPdf.updateContainer(doc);\n                const blob = await asPdf.toBlob();\n                saveAs(blob, `${Router.query.project}/competitors-analysis.pdf`);\n              },\n              src: \"/mobile-navbar/pdf.svg\",\n              height: 30,\n              width: 30,\n              className: \"mt-2 cursor-pointer\"\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"w-full justify-start items-center mt-4\",\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              children: \"Share your competitors analysis with this public link:\"\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"w-full flex mt-2\",\n              children: [/*#__PURE__*/_jsx(\"input\", {\n                value: \"www.project.com\",\n                className: \"bg-linkBackground text-sm px-2 py-1 dark:text-primarydark\"\n              }), /*#__PURE__*/_jsx(\"img\", {\n                src: \"/mobile-navbar/foreign.svg\",\n                height: 28,\n                width: 28\n              })]\n            })]\n          })]\n        })]\n      })]\n    })\n  });\n};\n\nexport default CompetitorsPDF;","map":null,"metadata":{},"sourceType":"module"}