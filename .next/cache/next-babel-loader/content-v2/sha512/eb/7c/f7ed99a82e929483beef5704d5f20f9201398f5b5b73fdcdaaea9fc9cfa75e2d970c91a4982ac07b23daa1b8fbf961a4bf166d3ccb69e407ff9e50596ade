{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"C:/off-saas/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _slicedToArray from \"C:/off-saas/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _regeneratorRuntime from \"C:/off-saas/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/off-saas/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\off-saas\\\\components\\\\dashboard\\\\startup\\\\project\\\\business-app\\\\Editor.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport dynamic from 'next/dynamic'; // import debounce from 'lodash/debounce';\n// import debounce from '../../../../../utils/helpers';\n// import debounce from 'lodash/debounce';\n\nimport debounce from '../../../../../utils/helpers';\nimport { useStateWithPromise } from '../../../../../utils/useStateWithPromise';\nimport { useCustomState } from '../../../../../utils/useCustomState';\nvar ReactQuill = dynamic(_c = function _c() {\n  return import('react-quill');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('react-quill')];\n    },\n    modules: [\"..\\\\components\\\\dashboard\\\\startup\\\\project\\\\business-app\\\\Editor.js -> \" + 'react-quill']\n  }\n});\n_c2 = ReactQuill;\nimport '../../../../../node_modules/react-quill/dist/quill.snow.css';\nimport '../../../../../node_modules/react-quill/dist/quill.bubble.css';\nimport '../../../../../node_modules/react-quill/dist/quill.core.css';\nimport Image from 'next/image';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd'; // import { useRechartToPng } from 'recharts-to-png';\n\nimport FileSaver from 'file-saver';\nimport ChartJsComponent from './Chartjs'; // import ReactChart from './ReachChart';\n\nimport gsap, { Power4, Linear } from 'gsap';\nimport HeaderComponent from './Header';\nimport TextElement from './Text';\nimport TableElement from './Table';\nimport SpacingElement from './Spacing';\n\nvar EditorInputElement = function EditorInputElement(_ref) {\n  _s();\n\n  var sectionTitleUpdate = _ref.sectionTitleUpdate,\n      tableUpdate = _ref.tableUpdate,\n      headerUpdate = _ref.headerUpdate,\n      reorderElements = _ref.reorderElements,\n      projectId = _ref.projectId,\n      addChart = _ref.addChart,\n      addNewHeader = _ref.addNewHeader,\n      chartTypeUpdate = _ref.chartTypeUpdate,\n      onDatasetLabel6Update = _ref.onDatasetLabel6Update,\n      onDatasetLabel5Update = _ref.onDatasetLabel5Update,\n      onDatasetLabel4Update = _ref.onDatasetLabel4Update,\n      onDatasetLabel3Update = _ref.onDatasetLabel3Update,\n      onDatasetLabel2Update = _ref.onDatasetLabel2Update,\n      onDatasetLabel1Update = _ref.onDatasetLabel1Update,\n      onDataset6Update = _ref.onDataset6Update,\n      onDataset5Update = _ref.onDataset5Update,\n      onDataset4Update = _ref.onDataset4Update,\n      onDataset3Update = _ref.onDataset3Update,\n      onDataset2Update = _ref.onDataset2Update,\n      onDataset1Update = _ref.onDataset1Update,\n      chartLabelsUpdate = _ref.chartLabelsUpdate,\n      chartValueUpdate = _ref.chartValueUpdate,\n      addNewChart = _ref.addNewChart,\n      deleteParticularField = _ref.deleteParticularField,\n      addNewField = _ref.addNewField,\n      fieldUpdate = _ref.fieldUpdate,\n      sectionUpdate = _ref.sectionUpdate,\n      selectedSection = _ref.selectedSection,\n      selectedSectionIndex = _ref.selectedSectionIndex,\n      sections = _ref.sections;\n\n  var _useState = useState(''),\n      title = _useState[0],\n      setTitle = _useState[1];\n\n  var _useState2 = useState(''),\n      text = _useState2[0],\n      setText = _useState2[1];\n\n  var _useState3 = useState(''),\n      id = _useState3[0],\n      setId = _useState3[1];\n\n  var _useState4 = useState(null),\n      currentIndex = _useState4[0],\n      setCurrentIndex = _useState4[1];\n\n  var _useState5 = useState(null),\n      lastSectionIndex = _useState5[0],\n      setLastSectionIndex = _useState5[1]; // const [currentSectionIndex, setCurrentSectionIndex] = useState(null);\n\n\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var userUid, data;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return Cookies.get('uid');\n\n          case 2:\n            userUid = _context2.sent;\n\n            if (!(userUid && Router.query.project)) {\n              _context2.next = 9;\n              break;\n            }\n\n            console.log(userUid);\n            _context2.next = 7;\n            return db.collection('projects').where('uid', '==', userUid);\n\n          case 7:\n            data = _context2.sent;\n            data.where('projectName', '==', Router.query.project).get().then(function (querySnapshot) {\n              console.log(querySnapshot);\n              querySnapshot.forEach( /*#__PURE__*/function () {\n                var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(doc1) {\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          setProjectId(doc1.data().projectId);\n                          _context.next = 3;\n                          return db.collection('projects').doc(doc1.data().projectId).collection('cashFlow').doc(Router.query.project).collection('inputs').onSnapshot(function (serverUpdate) {\n                            serverUpdate.docs.map(function (doc) {\n                              console.log(doc.data());\n                              setMainDocument(doc.data());\n                              setDocumentId(doc.id);\n                              setRevenueElements(doc.data().revenueElements);\n                              setCostsElements(doc.data().costsElements);\n                              setBudgetElements(doc.data().budgetElements);\n                              setTax(doc.data().tax); // Global start date\n\n                              var changedStartDate = doc.data().globalStartDate.seconds * 1000;\n                              doc.data().globalStartDate !== '' && setStartDate(new Date(changedStartDate));\n                              var changedEndDate = doc.data().globalEndDate.seconds * 1000; // Global end date\n\n                              doc.data().globalEndDate !== '' && setEndDate(new Date(changedEndDate)); // Periods\n\n                              setPeriods(doc.data().periods); // Total revenue\n\n                              var totalRevenueArray = doc.data().revenueElements.map(function (element) {\n                                return parseInt(element.value * element.periods.length);\n                              });\n                              var totalRevenue = totalRevenueArray.reduce(function (a, b) {\n                                return a + b;\n                              }, 0);\n                              setTotalRevenue(Number.isNaN(totalRevenue) ? 0 : Math.round(totalRevenue)); // Monthly revenue\n\n                              var periodLength = doc.data().periods.length;\n                              var monthlyRevenue = totalRevenue / periodLength;\n                              setMonthlyRevenue(Number.isNaN(monthlyRevenue) ? 0 : Math.round(monthlyRevenue)); // Total costs\n\n                              var totalCostsArray = doc.data().costsElements.map(function (element) {\n                                return parseInt(element.value * element.periods.length);\n                              });\n                              var totalCosts = totalCostsArray.reduce(function (a, b) {\n                                return a + b;\n                              }, 0);\n                              console.log(totalCosts); // const filteredTotalCosts =\n                              //   typeof totalCosts == 'number' ? Math.round(totalCosts) : 0;\n                              // console.log(filteredTotalCosts);\n\n                              setTotalCosts(Number.isFinite(totalCosts) ? Math.round(totalCosts) : 0); // Monthly costs\n\n                              var monthlyCosts = totalCosts / periodLength;\n                              setMonthlyCosts(Number.isFinite(monthlyCosts) ? Math.round(monthlyCosts) : 0); // Gross profit\n\n                              var grossProfit = totalRevenue - totalCosts;\n                              setGrossProfit(Number.isFinite(grossProfit) ? Math.round(grossProfit) : 0); // Net profit\n\n                              var tax = parseInt(doc.data().tax);\n                              var netProfit = grossProfit - tax / 100 * grossProfit;\n                              setNetProfit(Number.isFinite(netProfit) ? Math.round(netProfit) : 0);\n                            });\n                          });\n\n                        case 3:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }));\n\n                return function (_x) {\n                  return _ref3.apply(this, arguments);\n                };\n              }());\n            });\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  })), [Router.query.project]);\n\n  var onLeftBarShow = function onLeftBarShow() {\n    // --- VERSION 2 ---\n    // CONTAINERS\n    gsap.to(document.getElementById('container'), {\n      autoAlpha: 1\n    });\n    gsap.to(document.getElementById('container1'), {\n      autoAlpha: 1\n    });\n    gsap.to(document.getElementById('container2'), {\n      autoAlpha: 1\n    });\n    gsap.to(document.getElementById('container3'), {\n      autoAlpha: 1\n    });\n    gsap.to(document.getElementById('container4'), {\n      autoAlpha: 1\n    }); // LEFT BAR\n\n    gsap.to(document.getElementById('left-bar'), {\n      height: '100vh',\n      transformOrigin: 'top',\n      duration: 2,\n      ease: Linear\n    }); // EXIT\n\n    gsap.to(document.getElementById('exit'), {\n      autoAlpha: 1,\n      duration: 1,\n      ease: Linear,\n      delay: 2\n    }); // IMAGES\n\n    gsap.to(document.getElementById('left-element'), {\n      zIndex: 50,\n      scale: 1,\n      transformOrigin: 'top',\n      duration: 1,\n      ease: Linear,\n      delay: 0.3\n    });\n    gsap.to(document.getElementById('left-element1'), {\n      zIndex: 50,\n      scale: 1,\n      transformOrigin: 'top',\n      duration: 1,\n      ease: Linear,\n      delay: 0.5\n    });\n    gsap.to(document.getElementById('left-element2'), {\n      zIndex: 50,\n      scale: 1,\n      transformOrigin: 'top',\n      duration: 1,\n      ease: Linear,\n      delay: 0.7\n    });\n    gsap.to(document.getElementById('left-element3'), {\n      zIndex: 50,\n      scale: 1,\n      transformOrigin: 'top',\n      duration: 1,\n      ease: Linear,\n      delay: 0.9\n    });\n    gsap.to(document.getElementById('left-element4'), {\n      zIndex: 50,\n      scale: 1,\n      transformOrigin: 'top',\n      duration: 1,\n      ease: Linear,\n      delay: 1.1\n    }); // TEXT\n\n    gsap.to(document.getElementById('left-text'), {\n      zIndex: 50,\n      scale: 1,\n      transformOrigin: 'top',\n      duration: 1,\n      ease: Linear,\n      delay: 0.3\n    });\n    gsap.to(document.getElementById('left-text1'), {\n      zIndex: 50,\n      scale: 1,\n      transformOrigin: 'top',\n      duration: 1,\n      ease: Linear,\n      delay: 0.5\n    });\n    gsap.to(document.getElementById('left-text2'), {\n      zIndex: 50,\n      scale: 1,\n      transformOrigin: 'top',\n      duration: 1,\n      ease: Linear,\n      delay: 0.7\n    });\n    gsap.to(document.getElementById('left-text3'), {\n      zIndex: 50,\n      scale: 1,\n      transformOrigin: 'top',\n      duration: 1,\n      ease: Linear,\n      delay: 0.9\n    });\n    gsap.to(document.getElementById('left-text4'), {\n      zIndex: 50,\n      scale: 1,\n      transformOrigin: 'top',\n      duration: 1,\n      ease: Linear,\n      delay: 1.1\n    });\n  };\n\n  var deleteField = function deleteField(index) {\n    deleteParticularField(index);\n  };\n\n  var updateTitle = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(title) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return setTitle(title);\n\n            case 2:\n              onSectionTitleUpdate(title);\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function updateTitle(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var onSectionTitleUpdate = useCallback(debounce(function (data) {\n    sectionTitleUpdate(data);\n  }, 500), []);\n  var labelUpdate = useCallback(debounce( /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(data) {\n      var currentSectionIndex;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return data.selSection.fields.findIndex(function (field) {\n                return field.index == data.index;\n              });\n\n            case 2:\n              currentSectionIndex = _context4.sent;\n              console.log(data);\n              chartLabelsUpdate(data, data.index, currentSectionIndex, data.selSection);\n\n            case 5:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function (_x3) {\n      return _ref5.apply(this, arguments);\n    };\n  }(), 500), []); // Dataset1 update\n\n  var dataset1Update = useCallback(debounce( /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(data) {\n      var currentSectionIndex;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return data.selSection.fields.findIndex(function (field) {\n                return field.index == data.index;\n              });\n\n            case 2:\n              currentSectionIndex = _context5.sent;\n              console.log(data);\n              onDataset1Update(data, data.index, currentSectionIndex, data.selSection);\n\n            case 5:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function (_x4) {\n      return _ref6.apply(this, arguments);\n    };\n  }(), 500), []); // Dataset2 update\n\n  var dataset2Update = useCallback(debounce( /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(data) {\n      var currentSectionIndex;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.next = 2;\n              return data.selSection.fields.findIndex(function (field) {\n                return field.index == data.index;\n              });\n\n            case 2:\n              currentSectionIndex = _context6.sent;\n              console.log(data);\n              onDataset2Update(data, data.index, currentSectionIndex, data.selSection);\n\n            case 5:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n\n    return function (_x5) {\n      return _ref7.apply(this, arguments);\n    };\n  }(), 500), []); // Dataset3 update\n\n  var dataset3Update = useCallback(debounce( /*#__PURE__*/function () {\n    var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(data) {\n      var currentSectionIndex;\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              _context7.next = 2;\n              return data.selSection.fields.findIndex(function (field) {\n                return field.index == data.index;\n              });\n\n            case 2:\n              currentSectionIndex = _context7.sent;\n              console.log(data);\n              onDataset3Update(data, data.index, currentSectionIndex, data.selSection);\n\n            case 5:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n\n    return function (_x6) {\n      return _ref8.apply(this, arguments);\n    };\n  }(), 500), []); // Dataset4 update\n\n  var dataset4Update = useCallback(debounce( /*#__PURE__*/function () {\n    var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(data) {\n      var currentSectionIndex;\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              _context8.next = 2;\n              return data.selSection.fields.findIndex(function (field) {\n                return field.index == data.index;\n              });\n\n            case 2:\n              currentSectionIndex = _context8.sent;\n              console.log(data);\n              onDataset4Update(data, data.index, currentSectionIndex, data.selSection);\n\n            case 5:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8);\n    }));\n\n    return function (_x7) {\n      return _ref9.apply(this, arguments);\n    };\n  }(), 500), []); // Dataset5 update\n\n  var dataset5Update = useCallback(debounce( /*#__PURE__*/function () {\n    var _ref10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(data) {\n      var currentSectionIndex;\n      return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              _context9.next = 2;\n              return data.selSection.fields.findIndex(function (field) {\n                return field.index == data.index;\n              });\n\n            case 2:\n              currentSectionIndex = _context9.sent;\n              console.log(data);\n              onDataset5Update(data, data.index, currentSectionIndex, data.selSection);\n\n            case 5:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9);\n    }));\n\n    return function (_x8) {\n      return _ref10.apply(this, arguments);\n    };\n  }(), 500), []); // Dataset6 update\n\n  var dataset6Update = useCallback(debounce( /*#__PURE__*/function () {\n    var _ref11 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(data) {\n      var currentSectionIndex;\n      return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              _context10.next = 2;\n              return data.selSection.fields.findIndex(function (field) {\n                return field.index == data.index;\n              });\n\n            case 2:\n              currentSectionIndex = _context10.sent;\n              console.log(data);\n              onDataset6Update(data, data.index, currentSectionIndex, data.selSection);\n\n            case 5:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, _callee10);\n    }));\n\n    return function (_x9) {\n      return _ref11.apply(this, arguments);\n    };\n  }(), 500), []); // Dataset labels update\n\n  var datasetLabel1Update = useCallback(debounce( /*#__PURE__*/function () {\n    var _ref12 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11(data) {\n      var currentSectionIndex;\n      return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n        while (1) {\n          switch (_context11.prev = _context11.next) {\n            case 0:\n              _context11.next = 2;\n              return data.selSection.fields.findIndex(function (field) {\n                return field.index == data.index;\n              });\n\n            case 2:\n              currentSectionIndex = _context11.sent;\n              console.log(data);\n              onDatasetLabel1Update(data, data.index, currentSectionIndex, data.selSection);\n\n            case 5:\n            case \"end\":\n              return _context11.stop();\n          }\n        }\n      }, _callee11);\n    }));\n\n    return function (_x10) {\n      return _ref12.apply(this, arguments);\n    };\n  }(), 500), []);\n  var datasetLabel2Update = useCallback(debounce( /*#__PURE__*/function () {\n    var _ref13 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12(data) {\n      var currentSectionIndex;\n      return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n        while (1) {\n          switch (_context12.prev = _context12.next) {\n            case 0:\n              _context12.next = 2;\n              return data.selSection.fields.findIndex(function (field) {\n                return field.index == data.index;\n              });\n\n            case 2:\n              currentSectionIndex = _context12.sent;\n              console.log(data);\n              onDatasetLabel2Update(data, data.index, currentSectionIndex, data.selSection);\n\n            case 5:\n            case \"end\":\n              return _context12.stop();\n          }\n        }\n      }, _callee12);\n    }));\n\n    return function (_x11) {\n      return _ref13.apply(this, arguments);\n    };\n  }(), 500), []);\n  var datasetLabel3Update = useCallback(debounce( /*#__PURE__*/function () {\n    var _ref14 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee13(data) {\n      var currentSectionIndex;\n      return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n        while (1) {\n          switch (_context13.prev = _context13.next) {\n            case 0:\n              _context13.next = 2;\n              return data.selSection.fields.findIndex(function (field) {\n                return field.index == data.index;\n              });\n\n            case 2:\n              currentSectionIndex = _context13.sent;\n              console.log(data);\n              onDatasetLabel3Update(data, data.index, currentSectionIndex, data.selSection);\n\n            case 5:\n            case \"end\":\n              return _context13.stop();\n          }\n        }\n      }, _callee13);\n    }));\n\n    return function (_x12) {\n      return _ref14.apply(this, arguments);\n    };\n  }(), 500), []);\n  var datasetLabel4Update = useCallback(debounce( /*#__PURE__*/function () {\n    var _ref15 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee14(data) {\n      var currentSectionIndex;\n      return _regeneratorRuntime.wrap(function _callee14$(_context14) {\n        while (1) {\n          switch (_context14.prev = _context14.next) {\n            case 0:\n              _context14.next = 2;\n              return data.selSection.fields.findIndex(function (field) {\n                return field.index == data.index;\n              });\n\n            case 2:\n              currentSectionIndex = _context14.sent;\n              console.log(data);\n              onDatasetLabel4Update(data, data.index, currentSectionIndex, data.selSection);\n\n            case 5:\n            case \"end\":\n              return _context14.stop();\n          }\n        }\n      }, _callee14);\n    }));\n\n    return function (_x13) {\n      return _ref15.apply(this, arguments);\n    };\n  }(), 500), []);\n  var datasetLabel5Update = useCallback(debounce( /*#__PURE__*/function () {\n    var _ref16 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee15(data) {\n      var currentSectionIndex;\n      return _regeneratorRuntime.wrap(function _callee15$(_context15) {\n        while (1) {\n          switch (_context15.prev = _context15.next) {\n            case 0:\n              _context15.next = 2;\n              return data.selSection.fields.findIndex(function (field) {\n                return field.index == data.index;\n              });\n\n            case 2:\n              currentSectionIndex = _context15.sent;\n              console.log(data);\n              onDatasetLabel5Update(data, data.index, currentSectionIndex, data.selSection);\n\n            case 5:\n            case \"end\":\n              return _context15.stop();\n          }\n        }\n      }, _callee15);\n    }));\n\n    return function (_x14) {\n      return _ref16.apply(this, arguments);\n    };\n  }(), 500), []);\n  var datasetLabel6Update = useCallback(debounce( /*#__PURE__*/function () {\n    var _ref17 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee16(data) {\n      var currentSectionIndex;\n      return _regeneratorRuntime.wrap(function _callee16$(_context16) {\n        while (1) {\n          switch (_context16.prev = _context16.next) {\n            case 0:\n              _context16.next = 2;\n              return data.selSection.fields.findIndex(function (field) {\n                return field.index == data.index;\n              });\n\n            case 2:\n              currentSectionIndex = _context16.sent;\n              console.log(data);\n              onDatasetLabel6Update(data, data.index, currentSectionIndex, data.selSection);\n\n            case 5:\n            case \"end\":\n              return _context16.stop();\n          }\n        }\n      }, _callee16);\n    }));\n\n    return function (_x15) {\n      return _ref17.apply(this, arguments);\n    };\n  }(), 500), []);\n  useEffect(function () {\n    setCurrentIndex(null); // selectedSection.fields możesz wyrzucić\n  }, [selectedSection.id, selectedSection.fields]);\n  useEffect(function () {\n    if (selectedSection.id !== id) {\n      setTitle(selectedSection.title); // setText(selectedSection.body);\n      // setId(selectedSection.id);\n    }\n  }, [selectedSection.id]); // useEffect(() => {\n  //   setCurrentIndex()\n  // }, [currentIndex])\n  // console.log(selectedSection);\n  // console.log(currentIndex);\n\n  console.log(selectedSection); // const [png, ref] = useRechartToPng();\n  // const fn = useCallback(async () => {\n  //   FileSaver.saveAs(png, 'myChart.png');\n  //   console.log(png);\n  // }, [png]);\n\n  var containerRef = useRef();\n  console.log('Selected section --> ', selectedSection); // Elements manager\n\n  var _useState6 = useState(),\n      elementsArray = _useState6[0],\n      setElementsArray = _useState6[1];\n\n  useEffect(function () {\n    // elementsArray !== selectedSection.fields\n    setElementsArray(selectedSection.fields); // if (elementsArray !== selectedSection.fields) {\n    //   console.log('Yeeeeep');\n    //   setElementsArray(selectedSection.fields);\n    // }\n  }, []);\n\n  var handleOnDragEnd = function handleOnDragEnd(result) {\n    if (!result.destination) return;\n    var items = Array.from(elementsArray);\n\n    var _items$splice = items.splice(result.source.index, 1),\n        _items$splice2 = _slicedToArray(_items$splice, 1),\n        reorderedItem = _items$splice2[0];\n\n    items.splice(result.destination.index, 0, reorderedItem);\n    console.log(result);\n    setElementsArray(items); // reorderElements(items);\n  };\n\n  console.log('Important --> ', elementsArray);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative flex flex-col h-full w-full flex px-2 py-2 rounded-2xl bg-white dark:bg-background mt-1\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full px-3 bg-white py-3 rounded-2xl flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"text-lg bg-white focus:outline-none w-3/5 text-primarydark\",\n            placeholder: \"Section title...\",\n            value: title ? title : '',\n            onChange: function onChange(e) {\n              return updateTitle(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end items-center w-2/5\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-primarydark text-basae mr-4 pl-2\",\n              children: \"New element\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(Image, {\n              onClick: onLeftBarShow,\n              src: \"/chart/pencil.svg\",\n              height: 40,\n              width: 40\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(DragDropContext, {\n      onDragEnd: handleOnDragEnd,\n      children: /*#__PURE__*/_jsxDEV(Droppable, {\n        droppableId: \"elements\",\n        children: function children(provided) {\n          return /*#__PURE__*/_jsxDEV(\"div\", _objectSpread(_objectSpread({\n            className: \"elements\"\n          }, provided.droppableProps), {}, {\n            ref: provided.innerRef,\n            className: \"w-full flex justify-center items-center flex-col\",\n            children: [elementsArray && elementsArray.length !== 0 && elementsArray.map(function (field, currentIndex) {\n              console.log('FIELD --> ', field);\n              return /*#__PURE__*/_jsxDEV(Draggable, {\n                draggableId: field.index,\n                index: currentIndex,\n                children: function children(provided) {\n                  return field.type == 'text' && /*#__PURE__*/_jsxDEV(TextElement, {\n                    fieldUpdate: fieldUpdate,\n                    currentIndex: currentIndex,\n                    selectedSection: selectedSection,\n                    provided: provided,\n                    field: field,\n                    deleteField: deleteField,\n                    setCurrentIndex: setCurrentIndex\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 432,\n                    columnNumber: 27\n                  }, _this) || field.type == 'chart' && /*#__PURE__*/_jsxDEV(ChartJsComponent, _defineProperty({\n                    provided: provided,\n                    projectId: projectId,\n                    addChart: addChart,\n                    chartTypeUpdate: chartTypeUpdate,\n                    currentIndex: currentIndex,\n                    deleteField: deleteField,\n                    containerRef: containerRef,\n                    datasetLabel6Update: datasetLabel6Update,\n                    datasetLabel5Update: datasetLabel5Update,\n                    datasetLabel4Update: datasetLabel4Update,\n                    datasetLabel3Update: datasetLabel3Update,\n                    datasetLabel2Update: datasetLabel2Update,\n                    datasetLabel1Update: datasetLabel1Update,\n                    dataset6Update: dataset6Update,\n                    dataset5Update: dataset5Update,\n                    dataset4Update: dataset4Update,\n                    dataset3Update: dataset3Update,\n                    dataset2Update: dataset2Update,\n                    dataset1Update: dataset1Update,\n                    labelUpdate: labelUpdate,\n                    chartLabelsUpdate: chartLabelsUpdate,\n                    field: field,\n                    selectedSection: selectedSection,\n                    index: field.index,\n                    chartValueUpdate: chartValueUpdate\n                  }, \"selectedSection\", selectedSection), void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 443,\n                    columnNumber: 27\n                  }, _this) || field.type == 'header' && /*#__PURE__*/_jsxDEV(HeaderComponent, {\n                    fieldUpdate: fieldUpdate,\n                    currentIndex: currentIndex,\n                    headerUpdate: headerUpdate,\n                    provided: provided,\n                    deleteField: deleteField,\n                    field: field\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 473,\n                    columnNumber: 27\n                  }, _this) || field.type == 'table' && /*#__PURE__*/_jsxDEV(TableElement, {\n                    currentIndex: currentIndex,\n                    tableUpdate: tableUpdate,\n                    deleteField: deleteField,\n                    provided: provided,\n                    field: field\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 483,\n                    columnNumber: 27\n                  }, _this) || field.type == 'spacing' && /*#__PURE__*/_jsxDEV(SpacingElement, {\n                    deleteField: deleteField,\n                    provided: provided,\n                    field: field\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 491,\n                    columnNumber: 53\n                  }, _this);\n                }\n              }, field.index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 429,\n                columnNumber: 21\n              }, _this);\n            }), provided.placeholder]\n          }), void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 13\n          }, _this);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(EditorInputElement, \"LZrochTOOLQTOxWd/fJ6lJXjBnc=\");\n\n_c3 = EditorInputElement;\nexport default EditorInputElement;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"ReactQuill$dynamic\");\n$RefreshReg$(_c2, \"ReactQuill\");\n$RefreshReg$(_c3, \"EditorInputElement\");","map":{"version":3,"sources":["C:/off-saas/components/dashboard/startup/project/business-app/Editor.js"],"names":["React","useCallback","useEffect","useMemo","useRef","useState","dynamic","debounce","useStateWithPromise","useCustomState","ReactQuill","ssr","Image","DragDropContext","Droppable","Draggable","FileSaver","ChartJsComponent","gsap","Power4","Linear","HeaderComponent","TextElement","TableElement","SpacingElement","EditorInputElement","sectionTitleUpdate","tableUpdate","headerUpdate","reorderElements","projectId","addChart","addNewHeader","chartTypeUpdate","onDatasetLabel6Update","onDatasetLabel5Update","onDatasetLabel4Update","onDatasetLabel3Update","onDatasetLabel2Update","onDatasetLabel1Update","onDataset6Update","onDataset5Update","onDataset4Update","onDataset3Update","onDataset2Update","onDataset1Update","chartLabelsUpdate","chartValueUpdate","addNewChart","deleteParticularField","addNewField","fieldUpdate","sectionUpdate","selectedSection","selectedSectionIndex","sections","title","setTitle","text","setText","id","setId","currentIndex","setCurrentIndex","lastSectionIndex","setLastSectionIndex","Cookies","get","userUid","Router","query","project","console","log","db","collection","where","data","then","querySnapshot","forEach","doc1","setProjectId","doc","onSnapshot","serverUpdate","docs","map","setMainDocument","setDocumentId","setRevenueElements","revenueElements","setCostsElements","costsElements","setBudgetElements","budgetElements","setTax","tax","changedStartDate","globalStartDate","seconds","setStartDate","Date","changedEndDate","globalEndDate","setEndDate","setPeriods","periods","totalRevenueArray","element","parseInt","value","length","totalRevenue","reduce","a","b","setTotalRevenue","Number","isNaN","Math","round","periodLength","monthlyRevenue","setMonthlyRevenue","totalCostsArray","totalCosts","setTotalCosts","isFinite","monthlyCosts","setMonthlyCosts","grossProfit","setGrossProfit","netProfit","setNetProfit","onLeftBarShow","to","document","getElementById","autoAlpha","height","transformOrigin","duration","ease","delay","zIndex","scale","deleteField","index","updateTitle","onSectionTitleUpdate","labelUpdate","selSection","fields","findIndex","field","currentSectionIndex","dataset1Update","dataset2Update","dataset3Update","dataset4Update","dataset5Update","dataset6Update","datasetLabel1Update","datasetLabel2Update","datasetLabel3Update","datasetLabel4Update","datasetLabel5Update","datasetLabel6Update","containerRef","elementsArray","setElementsArray","handleOnDragEnd","result","destination","items","Array","from","splice","source","reorderedItem","e","target","provided","droppableProps","innerRef","type","placeholder"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\nimport dynamic from 'next/dynamic';\r\n// import debounce from 'lodash/debounce';\r\n// import debounce from '../../../../../utils/helpers';\r\n// import debounce from 'lodash/debounce';\r\nimport debounce from '../../../../../utils/helpers';\r\nimport { useStateWithPromise } from '../../../../../utils/useStateWithPromise';\r\nimport { useCustomState } from '../../../../../utils/useCustomState';\r\nconst ReactQuill = dynamic(() => import('react-quill'), { ssr: false });\r\nimport '../../../../../node_modules/react-quill/dist/quill.snow.css';\r\nimport '../../../../../node_modules/react-quill/dist/quill.bubble.css';\r\nimport '../../../../../node_modules/react-quill/dist/quill.core.css';\r\nimport Image from 'next/image';\r\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\r\n\r\n// import { useRechartToPng } from 'recharts-to-png';\r\nimport FileSaver from 'file-saver';\r\nimport ChartJsComponent from './Chartjs';\r\n// import ReactChart from './ReachChart';\r\nimport gsap, { Power4, Linear } from 'gsap';\r\nimport HeaderComponent from './Header';\r\nimport TextElement from './Text';\r\nimport TableElement from './Table';\r\nimport SpacingElement from './Spacing';\r\n\r\nconst EditorInputElement = ({\r\n  sectionTitleUpdate,\r\n  tableUpdate,\r\n  headerUpdate,\r\n  reorderElements,\r\n  projectId,\r\n  addChart,\r\n  addNewHeader,\r\n  chartTypeUpdate,\r\n  onDatasetLabel6Update,\r\n  onDatasetLabel5Update,\r\n  onDatasetLabel4Update,\r\n  onDatasetLabel3Update,\r\n  onDatasetLabel2Update,\r\n  onDatasetLabel1Update,\r\n  onDataset6Update,\r\n  onDataset5Update,\r\n  onDataset4Update,\r\n  onDataset3Update,\r\n  onDataset2Update,\r\n  onDataset1Update,\r\n  chartLabelsUpdate,\r\n  chartValueUpdate,\r\n  addNewChart,\r\n  deleteParticularField,\r\n  addNewField,\r\n  fieldUpdate,\r\n  sectionUpdate,\r\n  selectedSection,\r\n  selectedSectionIndex,\r\n  sections,\r\n}) => {\r\n  const [title, setTitle] = useState('');\r\n  const [text, setText] = useState('');\r\n  const [id, setId] = useState('');\r\n  const [currentIndex, setCurrentIndex] = useState(null);\r\n  const [lastSectionIndex, setLastSectionIndex] = useState(null);\r\n  // const [currentSectionIndex, setCurrentSectionIndex] = useState(null);\r\n\r\n  useEffect(async () => {\r\n    const userUid = await Cookies.get('uid');\r\n    // console.log(Router.query.project);\r\n    if (userUid && Router.query.project) {\r\n      console.log(userUid);\r\n      const data = await db.collection('projects').where('uid', '==', userUid);\r\n      data\r\n        .where('projectName', '==', Router.query.project)\r\n        .get()\r\n        .then((querySnapshot) => {\r\n          console.log(querySnapshot);\r\n          querySnapshot.forEach(async (doc1) => {\r\n            setProjectId(doc1.data().projectId);\r\n\r\n            await db\r\n              .collection('projects')\r\n              .doc(doc1.data().projectId)\r\n              .collection('cashFlow')\r\n              .doc(Router.query.project)\r\n              .collection('inputs')\r\n              .onSnapshot((serverUpdate) => {\r\n                serverUpdate.docs.map((doc) => {\r\n                  console.log(doc.data());\r\n                  setMainDocument(doc.data());\r\n                  setDocumentId(doc.id);\r\n                  setRevenueElements(doc.data().revenueElements);\r\n                  setCostsElements(doc.data().costsElements);\r\n                  setBudgetElements(doc.data().budgetElements);\r\n                  setTax(doc.data().tax);\r\n                  // Global start date\r\n                  const changedStartDate = doc.data().globalStartDate.seconds * 1000;\r\n                  doc.data().globalStartDate !== '' && setStartDate(new Date(changedStartDate));\r\n                  const changedEndDate = doc.data().globalEndDate.seconds * 1000;\r\n                  // Global end date\r\n                  doc.data().globalEndDate !== '' && setEndDate(new Date(changedEndDate));\r\n                  // Periods\r\n                  setPeriods(doc.data().periods);\r\n                  // Total revenue\r\n                  const totalRevenueArray = doc.data().revenueElements.map((element) => parseInt(element.value * element.periods.length));\r\n                  const totalRevenue = totalRevenueArray.reduce((a, b) => {\r\n                    return a + b;\r\n                  }, 0);\r\n                  setTotalRevenue(Number.isNaN(totalRevenue) ? 0 : Math.round(totalRevenue));\r\n                  // Monthly revenue\r\n                  const periodLength = doc.data().periods.length;\r\n                  const monthlyRevenue = totalRevenue / periodLength;\r\n                  setMonthlyRevenue(Number.isNaN(monthlyRevenue) ? 0 : Math.round(monthlyRevenue));\r\n                  // Total costs\r\n                  const totalCostsArray = doc.data().costsElements.map((element) => parseInt(element.value * element.periods.length));\r\n                  const totalCosts = totalCostsArray.reduce((a, b) => {\r\n                    return a + b;\r\n                  }, 0);\r\n                  console.log(totalCosts);\r\n                  // const filteredTotalCosts =\r\n                  //   typeof totalCosts == 'number' ? Math.round(totalCosts) : 0;\r\n                  // console.log(filteredTotalCosts);\r\n                  setTotalCosts(Number.isFinite(totalCosts) ? Math.round(totalCosts) : 0);\r\n                  // Monthly costs\r\n                  const monthlyCosts = totalCosts / periodLength;\r\n                  setMonthlyCosts(Number.isFinite(monthlyCosts) ? Math.round(monthlyCosts) : 0);\r\n                  // Gross profit\r\n                  const grossProfit = totalRevenue - totalCosts;\r\n                  setGrossProfit(Number.isFinite(grossProfit) ? Math.round(grossProfit) : 0);\r\n                  // Net profit\r\n                  const tax = parseInt(doc.data().tax);\r\n                  const netProfit = grossProfit - (tax / 100) * grossProfit;\r\n                  setNetProfit(Number.isFinite(netProfit) ? Math.round(netProfit) : 0);\r\n                });\r\n              });\r\n          });\r\n        });\r\n    }\r\n  }, [Router.query.project]);\r\n\r\n  const onLeftBarShow = () => {\r\n    // --- VERSION 2 ---\r\n    // CONTAINERS\r\n    gsap.to(document.getElementById('container'), { autoAlpha: 1 });\r\n    gsap.to(document.getElementById('container1'), { autoAlpha: 1 });\r\n    gsap.to(document.getElementById('container2'), { autoAlpha: 1 });\r\n    gsap.to(document.getElementById('container3'), { autoAlpha: 1 });\r\n    gsap.to(document.getElementById('container4'), { autoAlpha: 1 });\r\n    // LEFT BAR\r\n    gsap.to(document.getElementById('left-bar'), { height: '100vh', transformOrigin: 'top', duration: 2, ease: Linear });\r\n    // EXIT\r\n    gsap.to(document.getElementById('exit'), { autoAlpha: 1, duration: 1, ease: Linear, delay: 2 });\r\n    // IMAGES\r\n    gsap.to(document.getElementById('left-element'), {\r\n      zIndex: 50,\r\n      scale: 1,\r\n      transformOrigin: 'top',\r\n      duration: 1,\r\n      ease: Linear,\r\n      delay: 0.3,\r\n    });\r\n    gsap.to(document.getElementById('left-element1'), {\r\n      zIndex: 50,\r\n      scale: 1,\r\n      transformOrigin: 'top',\r\n      duration: 1,\r\n      ease: Linear,\r\n      delay: 0.5,\r\n    });\r\n    gsap.to(document.getElementById('left-element2'), {\r\n      zIndex: 50,\r\n      scale: 1,\r\n      transformOrigin: 'top',\r\n      duration: 1,\r\n      ease: Linear,\r\n      delay: 0.7,\r\n    });\r\n    gsap.to(document.getElementById('left-element3'), {\r\n      zIndex: 50,\r\n      scale: 1,\r\n      transformOrigin: 'top',\r\n      duration: 1,\r\n      ease: Linear,\r\n      delay: 0.9,\r\n    });\r\n    gsap.to(document.getElementById('left-element4'), {\r\n      zIndex: 50,\r\n      scale: 1,\r\n      transformOrigin: 'top',\r\n      duration: 1,\r\n      ease: Linear,\r\n      delay: 1.1,\r\n    });\r\n    // TEXT\r\n    gsap.to(document.getElementById('left-text'), { zIndex: 50, scale: 1, transformOrigin: 'top', duration: 1, ease: Linear, delay: 0.3 });\r\n    gsap.to(document.getElementById('left-text1'), { zIndex: 50, scale: 1, transformOrigin: 'top', duration: 1, ease: Linear, delay: 0.5 });\r\n    gsap.to(document.getElementById('left-text2'), { zIndex: 50, scale: 1, transformOrigin: 'top', duration: 1, ease: Linear, delay: 0.7 });\r\n    gsap.to(document.getElementById('left-text3'), { zIndex: 50, scale: 1, transformOrigin: 'top', duration: 1, ease: Linear, delay: 0.9 });\r\n    gsap.to(document.getElementById('left-text4'), { zIndex: 50, scale: 1, transformOrigin: 'top', duration: 1, ease: Linear, delay: 1.1 });\r\n  };\r\n\r\n  const deleteField = (index) => {\r\n    deleteParticularField(index);\r\n  };\r\n\r\n  const updateTitle = async (title) => {\r\n    await setTitle(title);\r\n    onSectionTitleUpdate(title);\r\n  };\r\n\r\n  const onSectionTitleUpdate = useCallback(\r\n    debounce((data) => {\r\n      sectionTitleUpdate(data);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  const labelUpdate = useCallback(\r\n    debounce(async (data) => {\r\n      const currentSectionIndex = await data.selSection.fields.findIndex((field) => field.index == data.index);\r\n      console.log(data);\r\n      chartLabelsUpdate(data, data.index, currentSectionIndex, data.selSection);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  // Dataset1 update\r\n  const dataset1Update = useCallback(\r\n    debounce(async (data) => {\r\n      const currentSectionIndex = await data.selSection.fields.findIndex((field) => field.index == data.index);\r\n      console.log(data);\r\n      onDataset1Update(data, data.index, currentSectionIndex, data.selSection);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  // Dataset2 update\r\n  const dataset2Update = useCallback(\r\n    debounce(async (data) => {\r\n      const currentSectionIndex = await data.selSection.fields.findIndex((field) => field.index == data.index);\r\n      console.log(data);\r\n      onDataset2Update(data, data.index, currentSectionIndex, data.selSection);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  // Dataset3 update\r\n  const dataset3Update = useCallback(\r\n    debounce(async (data) => {\r\n      const currentSectionIndex = await data.selSection.fields.findIndex((field) => field.index == data.index);\r\n      console.log(data);\r\n      onDataset3Update(data, data.index, currentSectionIndex, data.selSection);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  // Dataset4 update\r\n  const dataset4Update = useCallback(\r\n    debounce(async (data) => {\r\n      const currentSectionIndex = await data.selSection.fields.findIndex((field) => field.index == data.index);\r\n      console.log(data);\r\n      onDataset4Update(data, data.index, currentSectionIndex, data.selSection);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  // Dataset5 update\r\n  const dataset5Update = useCallback(\r\n    debounce(async (data) => {\r\n      const currentSectionIndex = await data.selSection.fields.findIndex((field) => field.index == data.index);\r\n      console.log(data);\r\n      onDataset5Update(data, data.index, currentSectionIndex, data.selSection);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  // Dataset6 update\r\n  const dataset6Update = useCallback(\r\n    debounce(async (data) => {\r\n      const currentSectionIndex = await data.selSection.fields.findIndex((field) => field.index == data.index);\r\n      console.log(data);\r\n      onDataset6Update(data, data.index, currentSectionIndex, data.selSection);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  // Dataset labels update\r\n  const datasetLabel1Update = useCallback(\r\n    debounce(async (data) => {\r\n      const currentSectionIndex = await data.selSection.fields.findIndex((field) => field.index == data.index);\r\n      console.log(data);\r\n      onDatasetLabel1Update(data, data.index, currentSectionIndex, data.selSection);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  const datasetLabel2Update = useCallback(\r\n    debounce(async (data) => {\r\n      const currentSectionIndex = await data.selSection.fields.findIndex((field) => field.index == data.index);\r\n      console.log(data);\r\n      onDatasetLabel2Update(data, data.index, currentSectionIndex, data.selSection);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  const datasetLabel3Update = useCallback(\r\n    debounce(async (data) => {\r\n      const currentSectionIndex = await data.selSection.fields.findIndex((field) => field.index == data.index);\r\n      console.log(data);\r\n      onDatasetLabel3Update(data, data.index, currentSectionIndex, data.selSection);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  const datasetLabel4Update = useCallback(\r\n    debounce(async (data) => {\r\n      const currentSectionIndex = await data.selSection.fields.findIndex((field) => field.index == data.index);\r\n      console.log(data);\r\n      onDatasetLabel4Update(data, data.index, currentSectionIndex, data.selSection);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  const datasetLabel5Update = useCallback(\r\n    debounce(async (data) => {\r\n      const currentSectionIndex = await data.selSection.fields.findIndex((field) => field.index == data.index);\r\n      console.log(data);\r\n      onDatasetLabel5Update(data, data.index, currentSectionIndex, data.selSection);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  const datasetLabel6Update = useCallback(\r\n    debounce(async (data) => {\r\n      const currentSectionIndex = await data.selSection.fields.findIndex((field) => field.index == data.index);\r\n      console.log(data);\r\n      onDatasetLabel6Update(data, data.index, currentSectionIndex, data.selSection);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  useEffect(() => {\r\n    setCurrentIndex(null);\r\n    // selectedSection.fields możesz wyrzucić\r\n  }, [selectedSection.id, selectedSection.fields]);\r\n\r\n  useEffect(() => {\r\n    if (selectedSection.id !== id) {\r\n      setTitle(selectedSection.title);\r\n      // setText(selectedSection.body);\r\n      // setId(selectedSection.id);\r\n    }\r\n  }, [selectedSection.id]);\r\n\r\n  // useEffect(() => {\r\n  //   setCurrentIndex()\r\n  // }, [currentIndex])\r\n  // console.log(selectedSection);\r\n  // console.log(currentIndex);\r\n\r\n  console.log(selectedSection);\r\n\r\n  // const [png, ref] = useRechartToPng();\r\n  // const fn = useCallback(async () => {\r\n  //   FileSaver.saveAs(png, 'myChart.png');\r\n  //   console.log(png);\r\n  // }, [png]);\r\n\r\n  const containerRef = useRef();\r\n\r\n  console.log('Selected section --> ', selectedSection);\r\n\r\n  // Elements manager\r\n  const [elementsArray, setElementsArray] = useState();\r\n\r\n  useEffect(() => {\r\n    // elementsArray !== selectedSection.fields\r\n    setElementsArray(selectedSection.fields);\r\n    // if (elementsArray !== selectedSection.fields) {\r\n    //   console.log('Yeeeeep');\r\n    //   setElementsArray(selectedSection.fields);\r\n    // }\r\n  }, []);\r\n\r\n  const handleOnDragEnd = (result) => {\r\n    if (!result.destination) return;\r\n    const items = Array.from(elementsArray);\r\n    const [reorderedItem] = items.splice(result.source.index, 1);\r\n    items.splice(result.destination.index, 0, reorderedItem);\r\n\r\n    console.log(result);\r\n    setElementsArray(items);\r\n    // reorderElements(items);\r\n  };\r\n\r\n  console.log('Important --> ', elementsArray);\r\n\r\n  return (\r\n    <>\r\n      {/* <ChartComponent /> */}\r\n      <div className=\"relative flex flex-col h-full w-full flex px-2 py-2 rounded-2xl bg-white dark:bg-background mt-1\">\r\n        <div>\r\n          <div className=\"w-full px-3 bg-white py-3 rounded-2xl flex items-center justify-between\">\r\n            <input\r\n              className=\"text-lg bg-white focus:outline-none w-3/5 text-primarydark\"\r\n              placeholder=\"Section title...\"\r\n              value={title ? title : ''}\r\n              onChange={(e) => updateTitle(e.target.value)}\r\n            />\r\n            <div className=\"flex justify-end items-center w-2/5\">\r\n              <p className=\"text-primarydark text-basae mr-4 pl-2\">New element</p>\r\n              <Image onClick={onLeftBarShow} src=\"/chart/pencil.svg\" height={40} width={40} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <DragDropContext onDragEnd={handleOnDragEnd}>\r\n        <Droppable droppableId=\"elements\">\r\n          {(provided) => (\r\n            <div\r\n              className=\"elements\"\r\n              {...provided.droppableProps}\r\n              ref={provided.innerRef}\r\n              className=\"w-full flex justify-center items-center flex-col\"\r\n            >\r\n              {elementsArray &&\r\n                elementsArray.length !== 0 &&\r\n                elementsArray.map((field, currentIndex) => {\r\n                  console.log('FIELD --> ', field);\r\n                  return (\r\n                    <Draggable key={field.index} draggableId={field.index} index={currentIndex}>\r\n                      {(provided) =>\r\n                        (field.type == 'text' && (\r\n                          <TextElement\r\n                            fieldUpdate={fieldUpdate}\r\n                            currentIndex={currentIndex}\r\n                            selectedSection={selectedSection}\r\n                            provided={provided}\r\n                            field={field}\r\n                            deleteField={deleteField}\r\n                            setCurrentIndex={setCurrentIndex}\r\n                          />\r\n                        )) ||\r\n                        (field.type == 'chart' && (\r\n                          <ChartJsComponent\r\n                            provided={provided}\r\n                            projectId={projectId}\r\n                            addChart={addChart}\r\n                            chartTypeUpdate={chartTypeUpdate}\r\n                            currentIndex={currentIndex}\r\n                            deleteField={deleteField}\r\n                            containerRef={containerRef}\r\n                            datasetLabel6Update={datasetLabel6Update}\r\n                            datasetLabel5Update={datasetLabel5Update}\r\n                            datasetLabel4Update={datasetLabel4Update}\r\n                            datasetLabel3Update={datasetLabel3Update}\r\n                            datasetLabel2Update={datasetLabel2Update}\r\n                            datasetLabel1Update={datasetLabel1Update}\r\n                            dataset6Update={dataset6Update}\r\n                            dataset5Update={dataset5Update}\r\n                            dataset4Update={dataset4Update}\r\n                            dataset3Update={dataset3Update}\r\n                            dataset2Update={dataset2Update}\r\n                            dataset1Update={dataset1Update}\r\n                            labelUpdate={labelUpdate}\r\n                            chartLabelsUpdate={chartLabelsUpdate}\r\n                            field={field}\r\n                            selectedSection={selectedSection}\r\n                            index={field.index}\r\n                            chartValueUpdate={chartValueUpdate}\r\n                            selectedSection={selectedSection}\r\n                          />\r\n                        )) ||\r\n                        (field.type == 'header' && (\r\n                          <HeaderComponent\r\n                            fieldUpdate={fieldUpdate}\r\n                            currentIndex={currentIndex}\r\n                            headerUpdate={headerUpdate}\r\n                            provided={provided}\r\n                            deleteField={deleteField}\r\n                            field={field}\r\n                          />\r\n                        )) ||\r\n                        (field.type == 'table' && (\r\n                          <TableElement\r\n                            currentIndex={currentIndex}\r\n                            tableUpdate={tableUpdate}\r\n                            deleteField={deleteField}\r\n                            provided={provided}\r\n                            field={field}\r\n                          />\r\n                        )) ||\r\n                        (field.type == 'spacing' && <SpacingElement deleteField={deleteField} provided={provided} field={field} />)\r\n                      }\r\n                    </Draggable>\r\n                  );\r\n                })}\r\n              {provided.placeholder}\r\n            </div>\r\n          )}\r\n        </Droppable>\r\n      </DragDropContext>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EditorInputElement;\r\n"]},"metadata":{},"sourceType":"module"}