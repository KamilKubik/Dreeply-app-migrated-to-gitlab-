{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[32],{D4LR:function(r,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/dashboard/account\",function(){return t(\"HQmj\")}])},HQmj:function(r,e,t){\"use strict\";t.r(e);var n=t(\"nKUr\"),o=t(\"q1tI\"),a=t(\"cqNN\"),c=t(\"xBw7\"),i=t(\"u1Fb\");t(\"U6Mw\");e.default=function(){var r=Object(a.b)(),e=r.currentUser,t=r.logOut,u=Object(o.useState)(),s=u[0],d=u[1];return console.log(e.stripeRole),Object(n.jsxs)(c.a,{children:[Object(n.jsx)(\"div\",{children:\"Account\"}),Object(n.jsx)(\"button\",{onClick:function(){d(!0),Object(i.a)(e.uid)},className:\" ml-20 hover:bg-primary hover:text-white dark:hover:bg-primarydark dark:hover:text-background border border-primary text-primary dark:text-primarydark dark:border-primarydark font-light py-2 px-6 rounded-2xl\",children:s?\"...Loading\":\"Update Plan\"}),Object(n.jsx)(\"button\",{onClick:function(){d(!0),Object(i.b)(e.uid)},className:\" ml-20 hover:bg-primary hover:text-white dark:hover:bg-primarydark dark:hover:text-background border border-primary text-primary dark:text-primarydark dark:border-primarydark font-light py-2 px-6 rounded-2xl\",children:s?\"...Loading\":\"Get 10 units\"}),Object(n.jsx)(\"button\",{onClick:function(){d(!0),Object(i.d)()},className:\"ml-20 hover:bg-primary hover:text-white dark:hover:bg-primarydark dark:hover:text-background border border-primary text-primary dark:text-primarydark dark:border-primarydark font-light py-2 px-6 rounded-2xl\",children:s?\"...Loading\":\"View Billing Portal\"}),Object(n.jsxs)(\"p\",{children:[\"Current plan: \",e.stripeRole]}),Object(n.jsx)(\"button\",{onClick:t,children:\"Log Out\"})]})}},QhkM:function(r,e,t){\"use strict\";t.d(e,\"a\",(function(){return o}));t(\"nKUr\");var n=t(\"q1tI\");function o(){var r=Object(n.useState)({width:void 0,height:void 0}),e=r[0],t=r[1];return Object(n.useEffect)((function(){function r(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener(\"resize\",r),r(),function(){return window.removeEventListener(\"resize\",r)}}),[]),e}},cpVT:function(r,e,t){\"use strict\";function n(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}t.d(e,\"a\",(function(){return n}))},u1Fb:function(r,e,t){\"use strict\";t.d(e,\"c\",(function(){return m})),t.d(e,\"a\",(function(){return j})),t.d(e,\"b\",(function(){return x})),t.d(e,\"d\",(function(){return g}));var n=t(\"vJKn\"),o=t.n(n),a=(t(\"cpVT\"),t(\"rg98\")),c=t(\"U6Mw\"),i=\"https://js.stripe.com/v3\",u=/^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/,s=\"loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used\",d=null,l=function(r){return null!==d?d:d=new Promise((function(e,t){if(\"undefined\"!==typeof window)if(window.Stripe&&r&&console.warn(s),window.Stripe)e(window.Stripe);else try{var n=function(){for(var r=document.querySelectorAll('script[src^=\"'.concat(i,'\"]')),e=0;e<r.length;e++){var t=r[e];if(u.test(t.src))return t}return null}();n&&r?console.warn(s):n||(n=function(r){var e=r&&!r.advancedFraudSignals?\"?advancedFraudSignals=false\":\"\",t=document.createElement(\"script\");t.src=\"\".concat(i).concat(e);var n=document.head||document.body;if(!n)throw new Error(\"Expected document.body not to be null. Stripe.js requires a <body> element.\");return n.appendChild(t),t}(r)),n.addEventListener(\"load\",(function(){window.Stripe?e(window.Stripe):t(new Error(\"Stripe.js not available\"))})),n.addEventListener(\"error\",(function(){t(new Error(\"Failed to load Stripe.js\"))}))}catch(o){return void t(o)}else e(null)}))},p=function(r,e,t){if(null===r)return null;var n=r.apply(void 0,e);return function(r,e){r&&r._registerWrapper&&r._registerWrapper({name:\"stripe-js\",version:\"1.14.0\",startTime:e})}(n,t),n},f=Promise.resolve().then((function(){return l(null)})),b=!1;f.catch((function(r){b||console.warn(r)}));var h,w=function(){return h||(h=function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];b=!0;var n=Date.now();return f.then((function(r){return p(r,e,n)}))}(\"pk_test_51IVIucBdXPtKajNHgoC6xC1s2WRUopkoxIkuxCtuvPrDmhRDEyl3BfsW6E2CgmerMXKSwpXojBhACW9yVxcmVLIQ00bPN1lfDO\")),h};var v=c.c.firestore(),m=function(){var r=Object(a.a)(o.a.mark((function r(e){var t,n;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.collection(\"projects\").where(\"projectId\",\"==\",e).get();case 2:return t=r.sent,n=v.batch(),console.log(n),t.forEach((function(r){n.delete(r.ref)})),r.abrupt(\"return\",n.commit());case 7:case\"end\":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),j=function(){var r=Object(a.a)(o.a.mark((function r(e){return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c.b.collection(\"users\").doc(e).collection(\"checkout_sessions\").add({price:\"price_1IVJjNBdXPtKajNHvs4FpbR7\",success_url:\"\".concat(window.location.origin,\"/dashboard/account\"),cancel_url:\"\".concat(window.location.origin,\"/dashboard/account\")});case 2:r.sent.onSnapshot(function(){var r=Object(a.a)(o.a.mark((function r(e){var t,n,a;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.data(),n=t.error,a=t.sessionId,n&&alert(\"An error occured: \".concat(n.message)),!a){r.next=7;break}return r.next=5,w();case 5:r.sent.redirectToCheckout({sessionId:a});case 7:case\"end\":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 4:case\"end\":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),x=function(){var r=Object(a.a)(o.a.mark((function r(e){return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c.b.collection(\"users\").doc(e).collection(\"checkout_sessions\").add({price:\"price_1IVgUmBdXPtKajNH4VVwl6dw\",success_url:\"\".concat(window.location.origin,\"/dashboard/account\"),cancel_url:\"\".concat(window.location.origin,\"/dashboard/account\")});case 2:r.sent.onSnapshot(function(){var r=Object(a.a)(o.a.mark((function r(e){var t,n,a;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.data(),n=t.error,a=t.sessionId,n&&alert(\"An error occured: \".concat(n.message)),!a){r.next=7;break}return r.next=5,w();case 5:r.sent.redirectToCheckout({sessionId:a});case 7:case\"end\":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 4:case\"end\":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),g=function(){var r=Object(a.a)(o.a.mark((function r(){var e,t,n;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=c.c.app().functions(\"us-central1\").httpsCallable(\"ext-firestore-stripe-subscriptions-createPortalLink\"),r.next=3,e({returnUrl:\"\".concat(window.location.origin,\"/dashboard/account\")});case 3:t=r.sent,n=t.data,window.location.assign(n.url);case 6:case\"end\":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}()},xBw7:function(r,e,t){\"use strict\";var n=t(\"nKUr\"),o=t(\"q1tI\"),a=t(\"cqNN\"),c=t(\"20a2\"),i=t(\"4yjf\"),u=t(\"z/o8\"),s=t(\"pc+1\"),d=t(\"QhkM\"),l=function(r){var e=r.to,t=Object(c.useRouter)();return Object(o.useEffect)((function(){t.push(e)}),[e]),null};e.a=function(r){var e=r.children,t=Object(d.a)(),c=Object(o.useContext)(i.a),p=Object(a.b)().currentUser,f=Object(o.useRef)(null),b=c?\"ml-52\":\"ml-20\";return c?u.a.to(f.current,{marginLeft:\"208px\",ease:s.d.easeOut}):u.a.to(f.current,{marginLeft:\"80px\",ease:s.d.easeOut}),p?Object(n.jsx)(n.Fragment,{children:t.width<860?Object(n.jsx)(n.Fragment,{children:e}):Object(n.jsx)(\"div\",{ref:f,className:\"relative h-full \".concat(b,\" bg-background dark:bg-secondary\"),style:{transitionTimingFunction:\"linear\",transitionDuration:\"200ms\",transitionProperty:\"width, margin-left\"},children:e})}):Object(n.jsx)(l,{to:\"/\"})}}},[[\"D4LR\",1,0,3,5,2,4,6,7]]]);","map":{"version":3,"sources":["static/chunks/pages/dashboard/account-46d149a590fa555990b4.js"],"names":["_N_E","window","push","D4LR","module","exports","__webpack_require__","__NEXT_P","HQmj","__webpack_exports__","r","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_1__","_lib_newAuth__WEBPACK_IMPORTED_MODULE_2__","_components_dashboard_NavbarTemplate__WEBPACK_IMPORTED_MODULE_3__","_lib_db__WEBPACK_IMPORTED_MODULE_4__","_useAuth","Object","currentUser","logOut","_useState","onLoading","setOnLoading","console","log","stripeRole","children","onClick","uid","className","QhkM","d","useWindowSize","width","undefined","height","windowSize","setWindowSize","handleResize","innerWidth","innerHeight","addEventListener","removeEventListener","cpVT","_defineProperty","obj","key","value","defineProperty","enumerable","configurable","writable","u1Fb","deleteProject","createCheckoutSession","createCheckoutSession10","goToBillingPortal","regenerator","regenerator_default","n","asyncToGenerator","firebase","V3_URL","V3_URL_REGEX","EXISTING_SCRIPT_MESSAGE","stripePromise","loadScript","params","Promise","resolve","reject","Stripe","warn","script","scripts","document","querySelectorAll","concat","i","length","test","src","findScript","queryString","advancedFraudSignals","createElement","headOrBody","head","body","Error","appendChild","injectScript","error","initStripe","maybeStripe","args","startTime","stripe","apply","_registerWrapper","name","version","registerWrapper","stripePromise$1","then","loadCalled","err","stripe_stripePromise","lib_stripe","_len","arguments","Array","_key","Date","now","loadStripe","firestore","_ref3","a","mark","_callee3","projectId","snapshot","batch","wrap","_context3","prev","next","collection","where","get","sent","forEach","doc","ref","abrupt","commit","stop","_x2","this","_ref4","_callee5","_context5","add","price","success_url","location","origin","cancel_url","onSnapshot","_ref5","_callee4","snap","_snap$data","sessionId","_context4","data","alert","message","redirectToCheckout","_x4","_x3","_ref6","_callee7","_context7","_ref7","_callee6","_snap$data2","_context6","_x6","_x5","_ref8","_callee8","functionRef","_yield$functionRef","_context8","app","functions","httpsCallable","returnUrl","assign","url","xBw7","next_router__WEBPACK_IMPORTED_MODULE_3__","_DesktopNavbar__WEBPACK_IMPORTED_MODULE_4__","gsap__WEBPACK_IMPORTED_MODULE_5__","gsap__WEBPACK_IMPORTED_MODULE_6__","_utils_useWindowSize__WEBPACK_IMPORTED_MODULE_7__","Redirect","_ref","to","router","_ref2","size","activeHover","contentRef","activeClass","current","marginLeft","ease","easeOut","style","transitionTimingFunction","transitionDuration","transitionProperty"],"mappings":"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"},"name":"static/chunks/pages/dashboard/account-46d149a590fa555990b4.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[32],{\n\n/***/ \"D4LR\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/dashboard/account\",\n      function () {\n        return __webpack_require__(\"HQmj\");\n      }\n    ]);\n  \n\n/***/ }),\n\n/***/ \"HQmj\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_newAuth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"cqNN\");\n/* harmony import */ var _components_dashboard_NavbarTemplate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"xBw7\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"u1Fb\");\n/* harmony import */ var _lib_firebase__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"U6Mw\");\n\n\n\n\n\n\n\n\nvar AccountPage = function AccountPage() {\n  var _useAuth = Object(_lib_newAuth__WEBPACK_IMPORTED_MODULE_2__[/* useAuth */ \"b\"])(),\n      currentUser = _useAuth.currentUser,\n      logOut = _useAuth.logOut;\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(),\n      onLoading = _useState[0],\n      setOnLoading = _useState[1];\n\n  console.log(currentUser.stripeRole);\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(_components_dashboard_NavbarTemplate__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"], {\n    children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n      children: \"Account\"\n    }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"button\", {\n      onClick: function onClick() {\n        setOnLoading(true);\n        Object(_lib_db__WEBPACK_IMPORTED_MODULE_4__[/* createCheckoutSession */ \"a\"])(currentUser.uid);\n      },\n      className: \" ml-20 hover:bg-primary hover:text-white dark:hover:bg-primarydark dark:hover:text-background border border-primary text-primary dark:text-primarydark dark:border-primarydark font-light py-2 px-6 rounded-2xl\",\n      children: onLoading ? '...Loading' : 'Update Plan'\n    }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"button\", {\n      onClick: function onClick() {\n        setOnLoading(true);\n        Object(_lib_db__WEBPACK_IMPORTED_MODULE_4__[/* createCheckoutSession10 */ \"b\"])(currentUser.uid);\n      },\n      className: \" ml-20 hover:bg-primary hover:text-white dark:hover:bg-primarydark dark:hover:text-background border border-primary text-primary dark:text-primarydark dark:border-primarydark font-light py-2 px-6 rounded-2xl\",\n      children: onLoading ? '...Loading' : 'Get 10 units'\n    }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"button\", {\n      onClick: function onClick() {\n        setOnLoading(true);\n        Object(_lib_db__WEBPACK_IMPORTED_MODULE_4__[/* goToBillingPortal */ \"d\"])();\n      },\n      className: \"ml-20 hover:bg-primary hover:text-white dark:hover:bg-primarydark dark:hover:text-background border border-primary text-primary dark:text-primarydark dark:border-primarydark font-light py-2 px-6 rounded-2xl\",\n      children: onLoading ? '...Loading' : 'View Billing Portal'\n    }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"p\", {\n      children: [\"Current plan: \", currentUser.stripeRole]\n    }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"button\", {\n      onClick: logOut,\n      children: \"Log Out\"\n    })]\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (AccountPage);\n\n/***/ }),\n\n/***/ \"QhkM\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return useWindowSize; });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n // Usage\n\nfunction App() {\n  var size = useWindowSize();\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n    children: [size.width, \"px / \", size.height, \"px\"]\n  });\n} // Hook\n\n\nfunction useWindowSize() {\n  // Initialize state with undefined width/height so server and client renders match\n  // Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])({\n    width: undefined,\n    height: undefined\n  }),\n      windowSize = _useState[0],\n      setWindowSize = _useState[1];\n\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    // Handler to call on window resize\n    function handleResize() {\n      // Set window width/height to state\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight\n      });\n    } // Add event listener\n\n\n    window.addEventListener('resize', handleResize); // Call handler right away so state gets updated with initial window size\n\n    handleResize(); // Remove event listener on cleanup\n\n    return function () {\n      return window.removeEventListener('resize', handleResize);\n    };\n  }, []); // Empty array ensures that effect is only run on mount\n\n  return windowSize;\n}\n\n/***/ }),\n\n/***/ \"cpVT\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return _defineProperty; });\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\n/***/ }),\n\n/***/ \"u1Fb\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"c\", function() { return /* binding */ deleteProject; });\n__webpack_require__.d(__webpack_exports__, \"a\", function() { return /* binding */ createCheckoutSession; });\n__webpack_require__.d(__webpack_exports__, \"b\", function() { return /* binding */ createCheckoutSession10; });\n__webpack_require__.d(__webpack_exports__, \"d\", function() { return /* binding */ goToBillingPortal; });\n\n// UNUSED EXPORTS: getAllProjects, createUser, getUser, createStartupData\n\n// EXTERNAL MODULE: ./node_modules/next/node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(\"vJKn\");\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty.js\nvar defineProperty = __webpack_require__(\"cpVT\");\n\n// EXTERNAL MODULE: ./node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(\"rg98\");\n\n// EXTERNAL MODULE: ./lib/firebase.js + 8 modules\nvar firebase = __webpack_require__(\"U6Mw\");\n\n// CONCATENATED MODULE: ./node_modules/@stripe/stripe-js/dist/stripe.esm.js\nvar V3_URL = 'https://js.stripe.com/v3';\nvar V3_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/;\nvar EXISTING_SCRIPT_MESSAGE = 'loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used';\nvar findScript = function findScript() {\n  var scripts = document.querySelectorAll(\"script[src^=\\\"\".concat(V3_URL, \"\\\"]\"));\n\n  for (var i = 0; i < scripts.length; i++) {\n    var script = scripts[i];\n\n    if (!V3_URL_REGEX.test(script.src)) {\n      continue;\n    }\n\n    return script;\n  }\n\n  return null;\n};\n\nvar injectScript = function injectScript(params) {\n  var queryString = params && !params.advancedFraudSignals ? '?advancedFraudSignals=false' : '';\n  var script = document.createElement('script');\n  script.src = \"\".concat(V3_URL).concat(queryString);\n  var headOrBody = document.head || document.body;\n\n  if (!headOrBody) {\n    throw new Error('Expected document.body not to be null. Stripe.js requires a <body> element.');\n  }\n\n  headOrBody.appendChild(script);\n  return script;\n};\n\nvar registerWrapper = function registerWrapper(stripe, startTime) {\n  if (!stripe || !stripe._registerWrapper) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'stripe-js',\n    version: \"1.14.0\",\n    startTime: startTime\n  });\n};\n\nvar stripePromise = null;\nvar loadScript = function loadScript(params) {\n  // Ensure that we only attempt to load Stripe.js at most once\n  if (stripePromise !== null) {\n    return stripePromise;\n  }\n\n  stripePromise = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined') {\n      // Resolve to null when imported server side. This makes the module\n      // safe to import in an isomorphic code base.\n      resolve(null);\n      return;\n    }\n\n    if (window.Stripe && params) {\n      console.warn(EXISTING_SCRIPT_MESSAGE);\n    }\n\n    if (window.Stripe) {\n      resolve(window.Stripe);\n      return;\n    }\n\n    try {\n      var script = findScript();\n\n      if (script && params) {\n        console.warn(EXISTING_SCRIPT_MESSAGE);\n      } else if (!script) {\n        script = injectScript(params);\n      }\n\n      script.addEventListener('load', function () {\n        if (window.Stripe) {\n          resolve(window.Stripe);\n        } else {\n          reject(new Error('Stripe.js not available'));\n        }\n      });\n      script.addEventListener('error', function () {\n        reject(new Error('Failed to load Stripe.js'));\n      });\n    } catch (error) {\n      reject(error);\n      return;\n    }\n  });\n  return stripePromise;\n};\nvar initStripe = function initStripe(maybeStripe, args, startTime) {\n  if (maybeStripe === null) {\n    return null;\n  }\n\n  var stripe = maybeStripe.apply(undefined, args);\n  registerWrapper(stripe, startTime);\n  return stripe;\n};\n\n// own script injection.\n\nvar stripePromise$1 = Promise.resolve().then(function () {\n  return loadScript(null);\n});\nvar loadCalled = false;\nstripePromise$1[\"catch\"](function (err) {\n  if (!loadCalled) {\n    console.warn(err);\n  }\n});\nvar loadStripe = function loadStripe() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  loadCalled = true;\n  var startTime = Date.now();\n  return stripePromise$1.then(function (maybeStripe) {\n    return initStripe(maybeStripe, args, startTime);\n  });\n};\n\n\n\n// CONCATENATED MODULE: ./lib/stripe.js\n// MOŻNA TEŻ WRZUCIĆ TO DO FOLDERU UTILS\n\n/**\r\n * This is a singleton to ensure we only instantiate Stripe once.\r\n */\n\nvar stripe_stripePromise;\n\nvar stripe_getStripe = function getStripe() {\n  if (!stripe_stripePromise) {\n    stripe_stripePromise = loadStripe('pk_test_51IVIucBdXPtKajNHgoC6xC1s2WRUopkoxIkuxCtuvPrDmhRDEyl3BfsW6E2CgmerMXKSwpXojBhACW9yVxcmVLIQ00bPN1lfDO'); // w folderze .env.local (ten klucz jest na głównej stronie dashboard'u na stripe)\n  }\n\n  return stripe_stripePromise;\n};\n\n/* harmony default export */ var lib_stripe = (stripe_getStripe);\n// CONCATENATED MODULE: ./lib/db.js\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { Object(defineProperty[\"a\" /* default */])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n\n\n\nvar firestore = firebase[\"c\" /* default */].firestore();\nvar getAllProjects = /*#__PURE__*/function () {\n  var _ref = Object(asyncToGenerator[\"a\" /* default */])( /*#__PURE__*/regenerator_default.a.mark(function _callee() {\n    var snapshot, projects;\n    return regenerator_default.a.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return firestore.collection('projects').get();\n\n          case 2:\n            snapshot = _context.sent;\n            projects = [];\n            snapshot.forEach(function (doc) {\n              projects.push(_objectSpread({\n                id: doc.id\n              }, doc.data()));\n            });\n            console.log(projects);\n            return _context.abrupt(\"return\", {\n              projects: projects\n            });\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getAllProjects() {\n    return _ref.apply(this, arguments);\n  };\n}(); // CLIENT-DATA\n\nvar createUser = function createUser(uid, data) {\n  return firestore.collection('users').doc(uid).set(_objectSpread({\n    uid: uid\n  }, data), {\n    merge: true\n  }); // merge powoduje, że każde id będzie unikatowe\n};\nvar getUser = /*#__PURE__*/function () {\n  var _ref2 = Object(asyncToGenerator[\"a\" /* default */])( /*#__PURE__*/regenerator_default.a.mark(function _callee2(uid) {\n    var user, users;\n    return regenerator_default.a.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return firestore.collection('users').get();\n\n          case 2:\n            user = _context2.sent;\n            users = [];\n            user.forEach(function (doc) {\n              users.push(_objectSpread({\n                id: doc.id\n              }, doc.data()));\n            });\n            return _context2.abrupt(\"return\", {\n              users: users\n            });\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function getUser(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}(); // STARTUP-DATA\n\nvar createStartupData = function createStartupData(data) {\n  // Wszystkie informacje wrzucamy, a potem będziemy je pobierali dla odpowiedniego użytkownika\n  return firestore.collection('startup-data').add(data);\n}; // PROJECT DELETE\n\nvar deleteProject = /*#__PURE__*/function () {\n  var _ref3 = Object(asyncToGenerator[\"a\" /* default */])( /*#__PURE__*/regenerator_default.a.mark(function _callee3(projectId) {\n    var snapshot, batch;\n    return regenerator_default.a.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return firestore.collection('projects').where('projectId', '==', projectId).get();\n\n          case 2:\n            snapshot = _context3.sent;\n            batch = firestore.batch();\n            console.log(batch);\n            snapshot.forEach(function (doc) {\n              batch[\"delete\"](doc.ref);\n            });\n            return _context3.abrupt(\"return\", batch.commit());\n\n          case 7:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function deleteProject(_x2) {\n    return _ref3.apply(this, arguments);\n  };\n}(); // STRIPE\n\nvar createCheckoutSession = /*#__PURE__*/function () {\n  var _ref4 = Object(asyncToGenerator[\"a\" /* default */])( /*#__PURE__*/regenerator_default.a.mark(function _callee5(uid) {\n    var checkoutSessionRef;\n    return regenerator_default.a.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return firebase[\"b\" /* db */].collection('users').doc(uid) // TO JEST DO ZMIANY Z PODSTAWOWEJ TEMPLATKI\n            .collection('checkout_sessions').add({\n              price: 'price_1IVJjNBdXPtKajNHvs4FpbR7',\n              // TO JEST DO ZMIANY Z PODSTAWOWEJ TEMPLATKI\n              success_url: \"\".concat(window.location.origin, \"/dashboard/account\"),\n              cancel_url: \"\".concat(window.location.origin, \"/dashboard/account\")\n            });\n\n          case 2:\n            checkoutSessionRef = _context5.sent;\n            // Wait for the CheckoutSession to get attached by the extension\n            checkoutSessionRef.onSnapshot( /*#__PURE__*/function () {\n              var _ref5 = Object(asyncToGenerator[\"a\" /* default */])( /*#__PURE__*/regenerator_default.a.mark(function _callee4(snap) {\n                var _snap$data, error, sessionId, stripe;\n\n                return regenerator_default.a.wrap(function _callee4$(_context4) {\n                  while (1) {\n                    switch (_context4.prev = _context4.next) {\n                      case 0:\n                        // TO JEST DO ZMIANY Z PODSTAWOWEJ TEMPLATKI (tutaj dodajemy tylko słówko async)\n                        _snap$data = snap.data(), error = _snap$data.error, sessionId = _snap$data.sessionId;\n\n                        if (error) {\n                          // Show an error to your customer and\n                          // inspect your Cloud Function logs in the Firebase console.\n                          alert(\"An error occured: \".concat(error.message));\n                        }\n\n                        if (!sessionId) {\n                          _context4.next = 7;\n                          break;\n                        }\n\n                        _context4.next = 5;\n                        return lib_stripe();\n\n                      case 5:\n                        stripe = _context4.sent;\n                        // TO JEST DO ZMIANY Z PODSTAWOWEJ TEMPLATKI (funkcja getStripe w pliku stripe.js)\n                        stripe.redirectToCheckout({\n                          sessionId: sessionId\n                        });\n\n                      case 7:\n                      case \"end\":\n                        return _context4.stop();\n                    }\n                  }\n                }, _callee4);\n              }));\n\n              return function (_x4) {\n                return _ref5.apply(this, arguments);\n              };\n            }());\n\n          case 4:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n\n  return function createCheckoutSession(_x3) {\n    return _ref4.apply(this, arguments);\n  };\n}(); // $29.99 for 10 units\n\nvar createCheckoutSession10 = /*#__PURE__*/function () {\n  var _ref6 = Object(asyncToGenerator[\"a\" /* default */])( /*#__PURE__*/regenerator_default.a.mark(function _callee7(uid) {\n    var checkoutSessionRef;\n    return regenerator_default.a.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.next = 2;\n            return firebase[\"b\" /* db */].collection('users').doc(uid) // TO JEST DO ZMIANY Z PODSTAWOWEJ TEMPLATKI\n            .collection('checkout_sessions').add({\n              price: 'price_1IVgUmBdXPtKajNH4VVwl6dw',\n              // TO JEST DO ZMIANY Z PODSTAWOWEJ TEMPLATKI\n              success_url: \"\".concat(window.location.origin, \"/dashboard/account\"),\n              cancel_url: \"\".concat(window.location.origin, \"/dashboard/account\")\n            });\n\n          case 2:\n            checkoutSessionRef = _context7.sent;\n            // Wait for the CheckoutSession to get attached by the extension\n            checkoutSessionRef.onSnapshot( /*#__PURE__*/function () {\n              var _ref7 = Object(asyncToGenerator[\"a\" /* default */])( /*#__PURE__*/regenerator_default.a.mark(function _callee6(snap) {\n                var _snap$data2, error, sessionId, stripe;\n\n                return regenerator_default.a.wrap(function _callee6$(_context6) {\n                  while (1) {\n                    switch (_context6.prev = _context6.next) {\n                      case 0:\n                        // TO JEST DO ZMIANY Z PODSTAWOWEJ TEMPLATKI (tutaj dodajemy tylko słówko async)\n                        _snap$data2 = snap.data(), error = _snap$data2.error, sessionId = _snap$data2.sessionId;\n\n                        if (error) {\n                          // Show an error to your customer and\n                          // inspect your Cloud Function logs in the Firebase console.\n                          alert(\"An error occured: \".concat(error.message));\n                        }\n\n                        if (!sessionId) {\n                          _context6.next = 7;\n                          break;\n                        }\n\n                        _context6.next = 5;\n                        return lib_stripe();\n\n                      case 5:\n                        stripe = _context6.sent;\n                        // TO JEST DO ZMIANY Z PODSTAWOWEJ TEMPLATKI (funkcja getStripe w pliku stripe.js)\n                        stripe.redirectToCheckout({\n                          sessionId: sessionId\n                        });\n\n                      case 7:\n                      case \"end\":\n                        return _context6.stop();\n                    }\n                  }\n                }, _callee6);\n              }));\n\n              return function (_x6) {\n                return _ref7.apply(this, arguments);\n              };\n            }());\n\n          case 4:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n\n  return function createCheckoutSession10(_x5) {\n    return _ref6.apply(this, arguments);\n  };\n}();\nvar goToBillingPortal = /*#__PURE__*/function () {\n  var _ref8 = Object(asyncToGenerator[\"a\" /* default */])( /*#__PURE__*/regenerator_default.a.mark(function _callee8() {\n    var functionRef, _yield$functionRef, data;\n\n    return regenerator_default.a.wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            // Do tej funkcji musimy zaimportować firebase/functions w pliku firebase.js\n            functionRef = firebase[\"c\" /* default */].app().functions('us-central1').httpsCallable('ext-firestore-stripe-subscriptions-createPortalLink');\n            _context8.next = 3;\n            return functionRef({\n              returnUrl: \"\".concat(window.location.origin, \"/dashboard/account\")\n            });\n\n          case 3:\n            _yield$functionRef = _context8.sent;\n            data = _yield$functionRef.data;\n            window.location.assign(data.url);\n\n          case 6:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, _callee8);\n  }));\n\n  return function goToBillingPortal() {\n    return _ref8.apply(this, arguments);\n  };\n}(); // export const getCurrentPlan = async () => {\n//   const decodedToken = await firebase.auth().currentUser.getIdTokenResult();\n//   // console.log(decodedToken.claims.stripeRole); // TO POKAZUJE AKTUALNY PLAN ZALOGOWANEGO UŻYTKOWNIKA NP. BASIC / PREMIUM\n//   return decodedToken.claims.stripeRole;\n// };\n\n/***/ }),\n\n/***/ \"xBw7\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_newAuth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"cqNN\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"20a2\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _DesktopNavbar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"4yjf\");\n/* harmony import */ var gsap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"z/o8\");\n/* harmony import */ var gsap__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"pc+1\");\n/* harmony import */ var _utils_useWindowSize__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"QhkM\");\n\n\n\n\n\n\n\n\n\nvar Redirect = function Redirect(_ref) {\n  var to = _ref.to;\n  var router = Object(next_router__WEBPACK_IMPORTED_MODULE_3__[\"useRouter\"])();\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    router.push(to);\n  }, [to]);\n  return null;\n};\n\nvar NavbarTemplate = function NavbarTemplate(_ref2) {\n  var children = _ref2.children;\n  // Mobile friendly\n  var size = Object(_utils_useWindowSize__WEBPACK_IMPORTED_MODULE_7__[/* useWindowSize */ \"a\"])();\n  var activeHover = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useContext\"])(_DesktopNavbar__WEBPACK_IMPORTED_MODULE_4__[/* IsActiveContext */ \"a\"]);\n\n  var _useAuth = Object(_lib_newAuth__WEBPACK_IMPORTED_MODULE_2__[/* useAuth */ \"b\"])(),\n      currentUser = _useAuth.currentUser;\n\n  var contentRef = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useRef\"])(null);\n  var activeClass = activeHover ? 'ml-52' : 'ml-20';\n\n  if (activeHover) {\n    gsap__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"].to(contentRef.current, {\n      marginLeft: '208px',\n      ease: gsap__WEBPACK_IMPORTED_MODULE_6__[/* Power4 */ \"d\"].easeOut // duration: 1\n\n    });\n  } else {\n    gsap__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"].to(contentRef.current, {\n      marginLeft: '80px',\n      ease: gsap__WEBPACK_IMPORTED_MODULE_6__[/* Power4 */ \"d\"].easeOut\n    });\n  }\n\n  if (!currentUser) {\n    return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(Redirect, {\n      to: \"/\"\n    });\n  }\n\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], {\n    children: size.width < 860 ? /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], {\n      children: children\n    }) : /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n      ref: contentRef,\n      className: \"relative h-full \".concat(activeClass, \" bg-background dark:bg-secondary\"),\n      style: {\n        transitionTimingFunction: 'linear',\n        transitionDuration: '200ms',\n        transitionProperty: 'width, margin-left'\n      },\n      children: children\n    })\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (NavbarTemplate);\n\n/***/ })\n\n},[[\"D4LR\",1,0,3,5,2,4,6,7]]]);","inputSourceMap":{"version":3,"sources":["C:\\off-saas\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-client-pages-loader.js?page=%2Fdashboard%2Faccount&absolutePagePath=private-next-pages%2Fdashboard%2Faccount.js!","C:\\off-saas\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\off-saas\\pages\\dashboard\\account.js","C:\\off-saas\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\off-saas\\utils\\useWindowSize.js","C:\\off-saas\\node_modules\\next\\node_modules\\@babel\\runtime\\helpers\\esm\\defineProperty.js","C:\\off-saas\\node_modules\\@stripe\\stripe-js\\dist\\stripe.esm.js","C:\\off-saas\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\off-saas\\lib\\stripe.js","C:\\off-saas\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\off-saas\\lib\\db.js","C:\\off-saas\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\off-saas\\components\\dashboard\\NavbarTemplate.js"],"names":[],"mappings":";;;;;;;AACA;AACA;AACA;AACA,eAAe,mBAAO,CAAC,MAAyC;AAChE;AACA;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkD;AACF;AACG;AACP;AAC2B;AAC0B;AACvD;;AAE1C;AACA,iBAAiB,oEAAO;AACxB;AACA;;AAEA,kBAAkB,sDAAQ;AAC1B;AACA;;AAEA;AACA,sBAAsB,8DAAK,CAAC,oFAAc;AAC1C,4BAA4B,6DAAI;AAChC;AACA,KAAK,gBAAgB,6DAAI;AACzB;AACA;AACA,QAAQ,6EAAqB;AAC7B,OAAO;AACP;AACA;AACA,KAAK,gBAAgB,6DAAI;AACzB;AACA;AACA,QAAQ,+EAAuB;AAC/B,OAAO;AACP;AACA;AACA,KAAK,gBAAgB,6DAAI;AACzB;AACA;AACA,QAAQ,yEAAiB;AACzB,OAAO;AACP;AACA;AACA,KAAK,gBAAgB,8DAAK;AAC1B;AACA,KAAK,gBAAgB,6DAAI;AACzB;AACA;AACA,KAAK;AACL,GAAG;AACH;;AAEe,0EAAW,E;;;;;;;;ACnD1B;AAAA;AAAA;AAAA;AAAA;AAAkD;AACN;;AAE5C;AACA;AACA,sBAAsB,8DAAK;AAC3B;AACA,GAAG;AACH,CAAC;;;AAGM;AACP;AACA;AACA,kBAAkB,sDAAQ;AAC1B;AACA;AACA,GAAG;AACH;AACA;;AAEA,EAAE,uDAAS;AACX;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;;AAGL,oDAAoD;;AAEpD,mBAAmB;;AAEnB;AACA;AACA;AACA,GAAG,MAAM;;AAET;AACA,C;;;;;;;;AC1CA;AAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACbA;AACA;AACA,uIAAuI;AACvI;AACA;;AAEA,iBAAiB,oBAAoB;AACrC;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,qEAAqE,aAAa;AAClF;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEsB;;;AChItB;;AAEA;AACA;AACA;AACuD;AACvD,IAAI,oBAAa;;AAEjB,IAAI,gBAAS;AACb,OAAO,oBAAa;AACpB,IAAI,oBAAa,GAAG,UAAU,gHAAgH;AAC9I;;AAEA,SAAS,oBAAa;AACtB;;AAEe,+DAAS,E;;AChBgF;AACW;AACI;;AAEvH,0CAA0C,gCAAgC,oCAAoC,oDAAoD,8DAA8D,gEAAgE,EAAE,EAAE,gCAAgC,EAAE,aAAa;;AAEnV,gCAAgC,gBAAgB,sBAAsB,OAAO,uDAAuD,aAAa,uDAAuD,CAAC,yCAAe,2BAA2B,EAAE,EAAE,EAAE,6CAA6C,2EAA2E,EAAE,OAAO,iDAAiD,kFAAkF,EAAE,EAAE,EAAE,EAAE,eAAe;;AAE/e;AACL;AACI;AACpC,gBAAgB,2BAAQ;AACjB;AACP,aAAa,2CAAiB,eAAe,qBAAmB;AAChE;AACA,WAAW,qBAAmB;AAC9B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,aAAa;AACb;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,CAAC,GAAG;;AAEG;AACP;AACA;AACA,GAAG;AACH;AACA,GAAG,EAAE;AACL;AACO;AACP,cAAc,2CAAiB,eAAe,qBAAmB;AACjE;AACA,WAAW,qBAAmB;AAC9B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,aAAa;AACb;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,CAAC,GAAG;;AAEG;AACP;AACA;AACA,EAAE;;AAEK;AACP,cAAc,2CAAiB,eAAe,qBAAmB;AACjE;AACA,WAAW,qBAAmB;AAC9B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,CAAC,GAAG;;AAEG;AACP,cAAc,2CAAiB,eAAe,qBAAmB;AACjE;AACA,WAAW,qBAAmB;AAC9B;AACA;AACA;AACA;AACA,mBAAmB,sBAAE;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA,0BAA0B,2CAAiB,eAAe,qBAAmB;AAC7E;;AAEA,uBAAuB,qBAAmB;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,+BAA+B,UAAS;;AAExC;AACA;AACA;AACA;AACA;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,eAAe;;AAEf;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,CAAC,GAAG;;AAEG;AACP,cAAc,2CAAiB,eAAe,qBAAmB;AACjE;AACA,WAAW,qBAAmB;AAC9B;AACA;AACA;AACA;AACA,mBAAmB,sBAAE;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA,0BAA0B,2CAAiB,eAAe,qBAAmB;AAC7E;;AAEA,uBAAuB,qBAAmB;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,+BAA+B,UAAS;;AAExC;AACA;AACA;AACA;AACA;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,eAAe;;AAEf;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,CAAC;AACM;AACP,cAAc,2CAAiB,eAAe,qBAAmB;AACjE;;AAEA,WAAW,qBAAmB;AAC9B;AACA;AACA;AACA;AACA,0BAA0B,2BAAQ;AAClC;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,CAAC,GAAG;AACJ;AACA,oDAAoD;AACpD;AACA,K;;;;;;;;AC3TA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0D;AACV;AACa;AACjB;AACJ;AACU;AACd;AACsB;;AAE1D;AACA;AACA,eAAe,6DAAS;AACxB,EAAE,uDAAS;AACX;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,aAAa,kFAAa;AAC1B,oBAAoB,wDAAU,CAAC,sEAAe;;AAE9C,iBAAiB,oEAAO;AACxB;;AAEA,mBAAmB,oDAAM;AACzB;;AAEA;AACA,IAAI,oDAAI;AACR;AACA,YAAY,mDAAM;;AAElB,KAAK;AACL,GAAG;AACH,IAAI,oDAAI;AACR;AACA,YAAY,mDAAM;AAClB,KAAK;AACL;;AAEA;AACA,wBAAwB,6DAAI;AAC5B;AACA,KAAK;AACL;;AAEA,sBAAsB,6DAAI,CAAC,0DAAS;AACpC,8CAA8C,6DAAI,CAAC,0DAAS;AAC5D;AACA,KAAK,iBAAiB,6DAAI;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL,GAAG;AACH;;AAEe,uEAAc,E","file":"x","sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/dashboard/account\",\n      function () {\n        return require(\"private-next-pages/dashboard/account.js\");\n      }\n    ]);\n  ","import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useEffect, useState } from 'react';\nimport { useAuth } from '../../lib/newAuth';\nimport NavbarTemplate from '../../components/dashboard/NavbarTemplate';\nimport { createCheckoutSession, createCheckoutSession10, goToBillingPortal } from '../../lib/db';\nimport firebase from '../../lib/firebase';\n\nvar AccountPage = function AccountPage() {\n  var _useAuth = useAuth(),\n      currentUser = _useAuth.currentUser,\n      logOut = _useAuth.logOut;\n\n  var _useState = useState(),\n      onLoading = _useState[0],\n      setOnLoading = _useState[1];\n\n  console.log(currentUser.stripeRole);\n  return /*#__PURE__*/_jsxs(NavbarTemplate, {\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      children: \"Account\"\n    }), /*#__PURE__*/_jsx(\"button\", {\n      onClick: function onClick() {\n        setOnLoading(true);\n        createCheckoutSession(currentUser.uid);\n      },\n      className: \" ml-20 hover:bg-primary hover:text-white dark:hover:bg-primarydark dark:hover:text-background border border-primary text-primary dark:text-primarydark dark:border-primarydark font-light py-2 px-6 rounded-2xl\",\n      children: onLoading ? '...Loading' : 'Update Plan'\n    }), /*#__PURE__*/_jsx(\"button\", {\n      onClick: function onClick() {\n        setOnLoading(true);\n        createCheckoutSession10(currentUser.uid);\n      },\n      className: \" ml-20 hover:bg-primary hover:text-white dark:hover:bg-primarydark dark:hover:text-background border border-primary text-primary dark:text-primarydark dark:border-primarydark font-light py-2 px-6 rounded-2xl\",\n      children: onLoading ? '...Loading' : 'Get 10 units'\n    }), /*#__PURE__*/_jsx(\"button\", {\n      onClick: function onClick() {\n        setOnLoading(true);\n        goToBillingPortal();\n      },\n      className: \"ml-20 hover:bg-primary hover:text-white dark:hover:bg-primarydark dark:hover:text-background border border-primary text-primary dark:text-primarydark dark:border-primarydark font-light py-2 px-6 rounded-2xl\",\n      children: onLoading ? '...Loading' : 'View Billing Portal'\n    }), /*#__PURE__*/_jsxs(\"p\", {\n      children: [\"Current plan: \", currentUser.stripeRole]\n    }), /*#__PURE__*/_jsx(\"button\", {\n      onClick: logOut,\n      children: \"Log Out\"\n    })]\n  });\n};\n\nexport default AccountPage;","import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useState, useEffect } from 'react'; // Usage\n\nfunction App() {\n  var size = useWindowSize();\n  return /*#__PURE__*/_jsxs(\"div\", {\n    children: [size.width, \"px / \", size.height, \"px\"]\n  });\n} // Hook\n\n\nexport function useWindowSize() {\n  // Initialize state with undefined width/height so server and client renders match\n  // Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\n  var _useState = useState({\n    width: undefined,\n    height: undefined\n  }),\n      windowSize = _useState[0],\n      setWindowSize = _useState[1];\n\n  useEffect(function () {\n    // Handler to call on window resize\n    function handleResize() {\n      // Set window width/height to state\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight\n      });\n    } // Add event listener\n\n\n    window.addEventListener('resize', handleResize); // Call handler right away so state gets updated with initial window size\n\n    handleResize(); // Remove event listener on cleanup\n\n    return function () {\n      return window.removeEventListener('resize', handleResize);\n    };\n  }, []); // Empty array ensures that effect is only run on mount\n\n  return windowSize;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","var V3_URL = 'https://js.stripe.com/v3';\nvar V3_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/;\nvar EXISTING_SCRIPT_MESSAGE = 'loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used';\nvar findScript = function findScript() {\n  var scripts = document.querySelectorAll(\"script[src^=\\\"\".concat(V3_URL, \"\\\"]\"));\n\n  for (var i = 0; i < scripts.length; i++) {\n    var script = scripts[i];\n\n    if (!V3_URL_REGEX.test(script.src)) {\n      continue;\n    }\n\n    return script;\n  }\n\n  return null;\n};\n\nvar injectScript = function injectScript(params) {\n  var queryString = params && !params.advancedFraudSignals ? '?advancedFraudSignals=false' : '';\n  var script = document.createElement('script');\n  script.src = \"\".concat(V3_URL).concat(queryString);\n  var headOrBody = document.head || document.body;\n\n  if (!headOrBody) {\n    throw new Error('Expected document.body not to be null. Stripe.js requires a <body> element.');\n  }\n\n  headOrBody.appendChild(script);\n  return script;\n};\n\nvar registerWrapper = function registerWrapper(stripe, startTime) {\n  if (!stripe || !stripe._registerWrapper) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'stripe-js',\n    version: \"1.14.0\",\n    startTime: startTime\n  });\n};\n\nvar stripePromise = null;\nvar loadScript = function loadScript(params) {\n  // Ensure that we only attempt to load Stripe.js at most once\n  if (stripePromise !== null) {\n    return stripePromise;\n  }\n\n  stripePromise = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined') {\n      // Resolve to null when imported server side. This makes the module\n      // safe to import in an isomorphic code base.\n      resolve(null);\n      return;\n    }\n\n    if (window.Stripe && params) {\n      console.warn(EXISTING_SCRIPT_MESSAGE);\n    }\n\n    if (window.Stripe) {\n      resolve(window.Stripe);\n      return;\n    }\n\n    try {\n      var script = findScript();\n\n      if (script && params) {\n        console.warn(EXISTING_SCRIPT_MESSAGE);\n      } else if (!script) {\n        script = injectScript(params);\n      }\n\n      script.addEventListener('load', function () {\n        if (window.Stripe) {\n          resolve(window.Stripe);\n        } else {\n          reject(new Error('Stripe.js not available'));\n        }\n      });\n      script.addEventListener('error', function () {\n        reject(new Error('Failed to load Stripe.js'));\n      });\n    } catch (error) {\n      reject(error);\n      return;\n    }\n  });\n  return stripePromise;\n};\nvar initStripe = function initStripe(maybeStripe, args, startTime) {\n  if (maybeStripe === null) {\n    return null;\n  }\n\n  var stripe = maybeStripe.apply(undefined, args);\n  registerWrapper(stripe, startTime);\n  return stripe;\n};\n\n// own script injection.\n\nvar stripePromise$1 = Promise.resolve().then(function () {\n  return loadScript(null);\n});\nvar loadCalled = false;\nstripePromise$1[\"catch\"](function (err) {\n  if (!loadCalled) {\n    console.warn(err);\n  }\n});\nvar loadStripe = function loadStripe() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  loadCalled = true;\n  var startTime = Date.now();\n  return stripePromise$1.then(function (maybeStripe) {\n    return initStripe(maybeStripe, args, startTime);\n  });\n};\n\nexport { loadStripe };\n","// MOŻNA TEŻ WRZUCIĆ TO DO FOLDERU UTILS\n\n/**\r\n * This is a singleton to ensure we only instantiate Stripe once.\r\n */\nimport { Stripe, loadStripe } from '@stripe/stripe-js';\nvar stripePromise;\n\nvar getStripe = function getStripe() {\n  if (!stripePromise) {\n    stripePromise = loadStripe('pk_test_51IVIucBdXPtKajNHgoC6xC1s2WRUopkoxIkuxCtuvPrDmhRDEyl3BfsW6E2CgmerMXKSwpXojBhACW9yVxcmVLIQ00bPN1lfDO'); // w folderze .env.local (ten klucz jest na głównej stronie dashboard'u na stripe)\n  }\n\n  return stripePromise;\n};\n\nexport default getStripe;","import _regeneratorRuntime from \"C:/off-saas/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"C:/off-saas/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"C:/off-saas/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport firebase from './firebase.js';\nimport { db } from './firebase';\nimport getStripe from './stripe.js';\nvar firestore = firebase.firestore();\nexport var getAllProjects = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var snapshot, projects;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return firestore.collection('projects').get();\n\n          case 2:\n            snapshot = _context.sent;\n            projects = [];\n            snapshot.forEach(function (doc) {\n              projects.push(_objectSpread({\n                id: doc.id\n              }, doc.data()));\n            });\n            console.log(projects);\n            return _context.abrupt(\"return\", {\n              projects: projects\n            });\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getAllProjects() {\n    return _ref.apply(this, arguments);\n  };\n}(); // CLIENT-DATA\n\nexport var createUser = function createUser(uid, data) {\n  return firestore.collection('users').doc(uid).set(_objectSpread({\n    uid: uid\n  }, data), {\n    merge: true\n  }); // merge powoduje, że każde id będzie unikatowe\n};\nexport var getUser = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(uid) {\n    var user, users;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return firestore.collection('users').get();\n\n          case 2:\n            user = _context2.sent;\n            users = [];\n            user.forEach(function (doc) {\n              users.push(_objectSpread({\n                id: doc.id\n              }, doc.data()));\n            });\n            return _context2.abrupt(\"return\", {\n              users: users\n            });\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function getUser(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}(); // STARTUP-DATA\n\nexport var createStartupData = function createStartupData(data) {\n  // Wszystkie informacje wrzucamy, a potem będziemy je pobierali dla odpowiedniego użytkownika\n  return firestore.collection('startup-data').add(data);\n}; // PROJECT DELETE\n\nexport var deleteProject = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(projectId) {\n    var snapshot, batch;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return firestore.collection('projects').where('projectId', '==', projectId).get();\n\n          case 2:\n            snapshot = _context3.sent;\n            batch = firestore.batch();\n            console.log(batch);\n            snapshot.forEach(function (doc) {\n              batch[\"delete\"](doc.ref);\n            });\n            return _context3.abrupt(\"return\", batch.commit());\n\n          case 7:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function deleteProject(_x2) {\n    return _ref3.apply(this, arguments);\n  };\n}(); // STRIPE\n\nexport var createCheckoutSession = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(uid) {\n    var checkoutSessionRef;\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return db.collection('users').doc(uid) // TO JEST DO ZMIANY Z PODSTAWOWEJ TEMPLATKI\n            .collection('checkout_sessions').add({\n              price: 'price_1IVJjNBdXPtKajNHvs4FpbR7',\n              // TO JEST DO ZMIANY Z PODSTAWOWEJ TEMPLATKI\n              success_url: \"\".concat(window.location.origin, \"/dashboard/account\"),\n              cancel_url: \"\".concat(window.location.origin, \"/dashboard/account\")\n            });\n\n          case 2:\n            checkoutSessionRef = _context5.sent;\n            // Wait for the CheckoutSession to get attached by the extension\n            checkoutSessionRef.onSnapshot( /*#__PURE__*/function () {\n              var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(snap) {\n                var _snap$data, error, sessionId, stripe;\n\n                return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n                  while (1) {\n                    switch (_context4.prev = _context4.next) {\n                      case 0:\n                        // TO JEST DO ZMIANY Z PODSTAWOWEJ TEMPLATKI (tutaj dodajemy tylko słówko async)\n                        _snap$data = snap.data(), error = _snap$data.error, sessionId = _snap$data.sessionId;\n\n                        if (error) {\n                          // Show an error to your customer and\n                          // inspect your Cloud Function logs in the Firebase console.\n                          alert(\"An error occured: \".concat(error.message));\n                        }\n\n                        if (!sessionId) {\n                          _context4.next = 7;\n                          break;\n                        }\n\n                        _context4.next = 5;\n                        return getStripe();\n\n                      case 5:\n                        stripe = _context4.sent;\n                        // TO JEST DO ZMIANY Z PODSTAWOWEJ TEMPLATKI (funkcja getStripe w pliku stripe.js)\n                        stripe.redirectToCheckout({\n                          sessionId: sessionId\n                        });\n\n                      case 7:\n                      case \"end\":\n                        return _context4.stop();\n                    }\n                  }\n                }, _callee4);\n              }));\n\n              return function (_x4) {\n                return _ref5.apply(this, arguments);\n              };\n            }());\n\n          case 4:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n\n  return function createCheckoutSession(_x3) {\n    return _ref4.apply(this, arguments);\n  };\n}(); // $29.99 for 10 units\n\nexport var createCheckoutSession10 = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(uid) {\n    var checkoutSessionRef;\n    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.next = 2;\n            return db.collection('users').doc(uid) // TO JEST DO ZMIANY Z PODSTAWOWEJ TEMPLATKI\n            .collection('checkout_sessions').add({\n              price: 'price_1IVgUmBdXPtKajNH4VVwl6dw',\n              // TO JEST DO ZMIANY Z PODSTAWOWEJ TEMPLATKI\n              success_url: \"\".concat(window.location.origin, \"/dashboard/account\"),\n              cancel_url: \"\".concat(window.location.origin, \"/dashboard/account\")\n            });\n\n          case 2:\n            checkoutSessionRef = _context7.sent;\n            // Wait for the CheckoutSession to get attached by the extension\n            checkoutSessionRef.onSnapshot( /*#__PURE__*/function () {\n              var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(snap) {\n                var _snap$data2, error, sessionId, stripe;\n\n                return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n                  while (1) {\n                    switch (_context6.prev = _context6.next) {\n                      case 0:\n                        // TO JEST DO ZMIANY Z PODSTAWOWEJ TEMPLATKI (tutaj dodajemy tylko słówko async)\n                        _snap$data2 = snap.data(), error = _snap$data2.error, sessionId = _snap$data2.sessionId;\n\n                        if (error) {\n                          // Show an error to your customer and\n                          // inspect your Cloud Function logs in the Firebase console.\n                          alert(\"An error occured: \".concat(error.message));\n                        }\n\n                        if (!sessionId) {\n                          _context6.next = 7;\n                          break;\n                        }\n\n                        _context6.next = 5;\n                        return getStripe();\n\n                      case 5:\n                        stripe = _context6.sent;\n                        // TO JEST DO ZMIANY Z PODSTAWOWEJ TEMPLATKI (funkcja getStripe w pliku stripe.js)\n                        stripe.redirectToCheckout({\n                          sessionId: sessionId\n                        });\n\n                      case 7:\n                      case \"end\":\n                        return _context6.stop();\n                    }\n                  }\n                }, _callee6);\n              }));\n\n              return function (_x6) {\n                return _ref7.apply(this, arguments);\n              };\n            }());\n\n          case 4:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n\n  return function createCheckoutSession10(_x5) {\n    return _ref6.apply(this, arguments);\n  };\n}();\nexport var goToBillingPortal = /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n    var functionRef, _yield$functionRef, data;\n\n    return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            // Do tej funkcji musimy zaimportować firebase/functions w pliku firebase.js\n            functionRef = firebase.app().functions('us-central1').httpsCallable('ext-firestore-stripe-subscriptions-createPortalLink');\n            _context8.next = 3;\n            return functionRef({\n              returnUrl: \"\".concat(window.location.origin, \"/dashboard/account\")\n            });\n\n          case 3:\n            _yield$functionRef = _context8.sent;\n            data = _yield$functionRef.data;\n            window.location.assign(data.url);\n\n          case 6:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, _callee8);\n  }));\n\n  return function goToBillingPortal() {\n    return _ref8.apply(this, arguments);\n  };\n}(); // export const getCurrentPlan = async () => {\n//   const decodedToken = await firebase.auth().currentUser.getIdTokenResult();\n//   // console.log(decodedToken.claims.stripeRole); // TO POKAZUJE AKTUALNY PLAN ZALOGOWANEGO UŻYTKOWNIKA NP. BASIC / PREMIUM\n//   return decodedToken.claims.stripeRole;\n// };","import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useContext, useEffect, useRef } from 'react';\nimport { useAuth } from '../../lib/newAuth';\nimport { useRouter } from 'next/router';\nimport { IsActiveContext } from './DesktopNavbar';\nimport gsap, { Power4 } from 'gsap';\nimport { useWindowSize } from '../../utils/useWindowSize';\n\nvar Redirect = function Redirect(_ref) {\n  var to = _ref.to;\n  var router = useRouter();\n  useEffect(function () {\n    router.push(to);\n  }, [to]);\n  return null;\n};\n\nvar NavbarTemplate = function NavbarTemplate(_ref2) {\n  var children = _ref2.children;\n  // Mobile friendly\n  var size = useWindowSize();\n  var activeHover = useContext(IsActiveContext);\n\n  var _useAuth = useAuth(),\n      currentUser = _useAuth.currentUser;\n\n  var contentRef = useRef(null);\n  var activeClass = activeHover ? 'ml-52' : 'ml-20';\n\n  if (activeHover) {\n    gsap.to(contentRef.current, {\n      marginLeft: '208px',\n      ease: Power4.easeOut // duration: 1\n\n    });\n  } else {\n    gsap.to(contentRef.current, {\n      marginLeft: '80px',\n      ease: Power4.easeOut\n    });\n  }\n\n  if (!currentUser) {\n    return /*#__PURE__*/_jsx(Redirect, {\n      to: \"/\"\n    });\n  }\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: size.width < 860 ? /*#__PURE__*/_jsx(_Fragment, {\n      children: children\n    }) : /*#__PURE__*/_jsx(\"div\", {\n      ref: contentRef,\n      className: \"relative h-full \".concat(activeClass, \" bg-background dark:bg-secondary\"),\n      style: {\n        transitionTimingFunction: 'linear',\n        transitionDuration: '200ms',\n        transitionProperty: 'width, margin-left'\n      },\n      children: children\n    })\n  });\n};\n\nexport default NavbarTemplate;"]}}