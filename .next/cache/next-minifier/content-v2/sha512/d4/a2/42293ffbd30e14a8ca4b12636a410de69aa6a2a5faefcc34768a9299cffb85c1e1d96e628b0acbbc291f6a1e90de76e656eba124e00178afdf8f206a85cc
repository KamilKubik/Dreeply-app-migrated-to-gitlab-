{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[54],{\"65uY\":function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/dashboard/projects/[project]/startup-idea/success\",function(){return n(\"oDJS\")}])},cqNN:function(t,e,n){\"use strict\";n.d(e,\"b\",(function(){return d})),n.d(e,\"a\",(function(){return v}));var r=n(\"nKUr\"),u=n(\"vJKn\"),a=n.n(u),c=n(\"rg98\"),o=n(\"U6Mw\"),i=n(\"q1tI\"),s=n(\"p46w\"),f=n.n(s),p=(n(\"20a2\"),Object(i.createContext)()),d=function(){return Object(i.useContext)(p)},v=function(t){var e=t.children,n=Object(i.useState)(),u=n[0],s=n[1],d=Object(i.useState)(!0),v=d[0],l=d[1],w=function(){var t=Object(c.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=11;break}return f.a.set(\"uid\",e.uid,!0),t.next=4,x(e);case 4:return n=t.sent,o.b.collection(\"users\").doc(e.uid).set({formatedUser:n},{merge:!0}),s(n),l(!1),t.abrupt(\"return\",n);case 11:return s(!1),f.a.remove(\"uid\"),l(!1),t.abrupt(\"return\",!1);case 15:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(c.a)(a.a.mark((function t(e,n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.createUserWithEmailAndPassword(e,n).then((function(t){return w(t.user)}));case 2:return t.abrupt(\"return\",t.sent);case 3:case\"end\":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();Object(i.useEffect)((function(){var t=o.a.onIdTokenChanged(w);return function(){return t()}}),[]);var b={currentUser:u,signUp:h,logIn:function(t,e){return o.a.signInWithEmailAndPassword(t,e)},logOut:function(){return o.a.signOut()}},j=function(){var t=Object(c.a)(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.c.auth().currentUser.getIdToken(!0);case 2:return t.next=4,o.c.auth().currentUser.getIdTokenResult();case 4:return e=t.sent,t.abrupt(\"return\",e.claims.stripeRole||\"free\");case 6:case\"end\":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=function(){var t=Object(c.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(\"OFF - \",e),t.next=3,e.getIdToken();case 3:return n=t.sent,t.t0=e.uid,t.t1=e.email,t.t2=e.providerData[0].providerId,t.next=9,j();case 9:return t.t3=t.sent,t.t4=n,t.abrupt(\"return\",{uid:t.t0,email:t.t1,provider:t.t2,stripeRole:t.t3,token:t.t4});case 12:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.jsx)(p.Provider,{value:b,children:!v&&e})}},oDJS:function(t,e,n){\"use strict\";n.r(e);var r=n(\"nKUr\"),u=n(\"eLM2\"),a=(n(\"q1tI\"),n(\"1fXS\"));e.default=Object(u.withSuperJSONPage)((function(){return Object(r.jsx)(a.a,{})}))},rg98:function(t,e,n){\"use strict\";function r(t,e,n,r,u,a,c){try{var o=t[a](c),i=o.value}catch(s){return void n(s)}o.done?e(i):Promise.resolve(i).then(r,u)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(u,a){var c=t.apply(e,n);function o(t){r(c,u,a,o,i,\"next\",t)}function i(t){r(c,u,a,o,i,\"throw\",t)}o(void 0)}))}}n.d(e,\"a\",(function(){return u}))}},[[\"65uY\",2,0,5,6,15,16,17,1,3,4,7,10,11,12,13,19,30]]]);","map":{"version":3,"sources":["static/chunks/pages/dashboard/projects/[project]/startup-idea/success-48bce6f1056da96e54d3.js"],"names":["_N_E","window","push","65uY","module","exports","__webpack_require__","__NEXT_P","cqNN","__webpack_exports__","d","useAuth","AuthProvider","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","C_off_saas_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__","C_off_saas_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","n","C_off_saas_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","_lib_firebase__WEBPACK_IMPORTED_MODULE_3__","react__WEBPACK_IMPORTED_MODULE_4__","js_cookie__WEBPACK_IMPORTED_MODULE_5__","js_cookie__WEBPACK_IMPORTED_MODULE_5___default","AuthContext","Object","_ref","children","_useState","currentUser","setCurrentUser","_useState2","loading","setLoading","handleUser","_ref2","a","mark","_callee","user","formatedUser","wrap","_context","prev","next","set","uid","formatUser","sent","collection","doc","merge","abrupt","remove","stop","_x","apply","this","arguments","signUp","_ref3","_callee2","email","password","_context2","createUserWithEmailAndPassword","then","response","_x2","_x3","unsubscribe","onIdTokenChanged","value","logIn","signInWithEmailAndPassword","logOut","signOut","getStripeRole","_ref4","_callee3","decodedToken","_context3","auth","getIdToken","getIdTokenResult","claims","stripeRole","_ref5","_callee4","token","_context4","console","log","t0","t1","t2","providerData","providerId","t3","t4","provider","_x4","Provider","oDJS","r","babel_plugin_superjson_next_tools__WEBPACK_IMPORTED_MODULE_1__","_components_dashboard_startup_StartupSuccess__WEBPACK_IMPORTED_MODULE_3__","rg98","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","error","done","Promise","_asyncToGenerator","fn","self","args","err","undefined"],"mappings":"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"},"name":"static/chunks/pages/dashboard/projects/[project]/startup-idea/success-48bce6f1056da96e54d3.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[54],{\n\n/***/ \"65uY\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/dashboard/projects/[project]/startup-idea/success\",\n      function () {\n        return __webpack_require__(\"oDJS\");\n      }\n    ]);\n  \n\n/***/ }),\n\n/***/ \"cqNN\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export AuthContext */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return useAuth; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return AuthProvider; });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var C_off_saas_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"vJKn\");\n/* harmony import */ var C_off_saas_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(C_off_saas_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var C_off_saas_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"rg98\");\n/* harmony import */ var _lib_firebase__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"U6Mw\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"p46w\");\n/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(js_cookie__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"20a2\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\n\n\n\nvar AuthContext = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_4__[\"createContext\"])(); // Tutaj można umieścić default Value\n\nvar useAuth = function useAuth() {\n  return Object(react__WEBPACK_IMPORTED_MODULE_4__[\"useContext\"])(AuthContext);\n};\nvar AuthProvider = function AuthProvider(_ref) {\n  var children = _ref.children;\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_4__[\"useState\"])(),\n      currentUser = _useState[0],\n      setCurrentUser = _useState[1];\n\n  var _useState2 = Object(react__WEBPACK_IMPORTED_MODULE_4__[\"useState\"])(true),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var handleUser = /*#__PURE__*/function () {\n    var _ref2 = Object(C_off_saas_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])( /*#__PURE__*/C_off_saas_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee(user) {\n      var formatedUser;\n      return C_off_saas_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!user) {\n                _context.next = 11;\n                break;\n              }\n\n              js_cookie__WEBPACK_IMPORTED_MODULE_5___default.a.set('uid', user.uid, true); // console.log('user - ', user);\n              // console.log('user name - ', name);\n\n              _context.next = 4;\n              return formatUser(user);\n\n            case 4:\n              formatedUser = _context.sent;\n              // const decodedToken = await firebase.auth().currentUser.getIdTokenResult();\n              // console.log(decodedToken.claims.stripeRole);\n              _lib_firebase__WEBPACK_IMPORTED_MODULE_3__[/* db */ \"b\"].collection('users').doc(user.uid).set({\n                formatedUser: formatedUser\n              }, {\n                merge: true\n              });\n              setCurrentUser(formatedUser); // Cookies.set('token', user.za, true);\n\n              setLoading(false);\n              return _context.abrupt(\"return\", formatedUser);\n\n            case 11:\n              setCurrentUser(false); // Cookies.remove('token', user.za);\n\n              js_cookie__WEBPACK_IMPORTED_MODULE_5___default.a.remove('uid');\n              setLoading(false);\n              return _context.abrupt(\"return\", false);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleUser(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var signUp = /*#__PURE__*/function () {\n    var _ref3 = Object(C_off_saas_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])( /*#__PURE__*/C_off_saas_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee2(email, password) {\n      return C_off_saas_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _lib_firebase__WEBPACK_IMPORTED_MODULE_3__[/* auth */ \"a\"].createUserWithEmailAndPassword(email, password).then(function (response) {\n                return handleUser(response.user);\n              });\n\n            case 2:\n              return _context2.abrupt(\"return\", _context2.sent);\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function signUp(_x2, _x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var logIn = function logIn(email, password) {\n    return _lib_firebase__WEBPACK_IMPORTED_MODULE_3__[/* auth */ \"a\"].signInWithEmailAndPassword(email, password);\n  };\n\n  var logOut = function logOut() {\n    return _lib_firebase__WEBPACK_IMPORTED_MODULE_3__[/* auth */ \"a\"].signOut();\n  };\n\n  Object(react__WEBPACK_IMPORTED_MODULE_4__[\"useEffect\"])(function () {\n    var unsubscribe = _lib_firebase__WEBPACK_IMPORTED_MODULE_3__[/* auth */ \"a\"].onIdTokenChanged(handleUser);\n    return function () {\n      return unsubscribe();\n    };\n  }, []);\n  var value = {\n    currentUser: currentUser,\n    signUp: signUp,\n    logIn: logIn,\n    logOut: logOut\n  };\n\n  var getStripeRole = /*#__PURE__*/function () {\n    var _ref4 = Object(C_off_saas_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])( /*#__PURE__*/C_off_saas_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee3() {\n      var decodedToken;\n      return C_off_saas_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _lib_firebase__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"c\"].auth().currentUser.getIdToken(true);\n\n            case 2:\n              _context3.next = 4;\n              return _lib_firebase__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"c\"].auth().currentUser.getIdTokenResult();\n\n            case 4:\n              decodedToken = _context3.sent;\n              return _context3.abrupt(\"return\", decodedToken.claims.stripeRole || 'free');\n\n            case 6:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function getStripeRole() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var formatUser = /*#__PURE__*/function () {\n    var _ref5 = Object(C_off_saas_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])( /*#__PURE__*/C_off_saas_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee4(user) {\n      var token;\n      return C_off_saas_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              console.log('OFF - ', user);\n              _context4.next = 3;\n              return user.getIdToken();\n\n            case 3:\n              token = _context4.sent;\n              _context4.t0 = user.uid;\n              _context4.t1 = user.email;\n              _context4.t2 = user.providerData[0].providerId;\n              _context4.next = 9;\n              return getStripeRole();\n\n            case 9:\n              _context4.t3 = _context4.sent;\n              _context4.t4 = token;\n              return _context4.abrupt(\"return\", {\n                uid: _context4.t0,\n                email: _context4.t1,\n                provider: _context4.t2,\n                stripeRole: _context4.t3,\n                token: _context4.t4\n              });\n\n            case 12:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function formatUser(_x4) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(AuthContext.Provider, {\n    value: value,\n    children: !loading && children\n  });\n};\n\n/***/ }),\n\n/***/ \"oDJS\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var babel_plugin_superjson_next_tools__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"eLM2\");\n/* harmony import */ var babel_plugin_superjson_next_tools__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(babel_plugin_superjson_next_tools__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _components_dashboard_startup_StartupSuccess__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"1fXS\");\n\n\n\n\n\nvar StartupSuccessPage = function StartupSuccessPage() {\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(_components_dashboard_startup_StartupSuccess__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"], {});\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(babel_plugin_superjson_next_tools__WEBPACK_IMPORTED_MODULE_1__[\"withSuperJSONPage\"])(StartupSuccessPage));\n\n/***/ }),\n\n/***/ \"rg98\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return _asyncToGenerator; });\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\n/***/ })\n\n},[[\"65uY\",2,0,5,6,15,16,17,1,3,4,7,10,11,12,13,19,30]]]);","inputSourceMap":{"version":3,"sources":["C:\\off-saas\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-client-pages-loader.js?page=%2Fdashboard%2Fprojects%2F%5Bproject%5D%2Fstartup-idea%2Fsuccess&absolutePagePath=private-next-pages%2Fdashboard%2Fprojects%2F%5Bproject%5D%2Fstartup-idea%2Fsuccess.js!","C:\\off-saas\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\off-saas\\lib\\newAuth.js","C:\\off-saas\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\off-saas\\pages\\dashboard\\projects\\[project]\\startup-idea\\success.js","C:\\off-saas\\node_modules\\next\\node_modules\\@babel\\runtime\\helpers\\esm\\asyncToGenerator.js"],"names":[],"mappings":";;;;;;;AACA;AACA;AACA;AACA,eAAe,mBAAO,CAAC,MAAyE;AAChG;AACA;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgD;AACwD;AACe;AAClE;AACyB;AAC9C;AACK;AAC9B,+BAA+B,2DAAa,GAAG;;AAE/C;AACP,SAAS,wDAAU;AACnB;AACO;AACP;;AAEA,kBAAkB,sDAAQ;AAC1B;AACA;;AAEA,mBAAmB,sDAAQ;AAC3B;AACA;;AAEA;AACA,gBAAgB,4IAAiB,eAAe,0GAAmB;AACnE;AACA,aAAa,0GAAmB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAc,gDAAO,4BAA4B;AACjD;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc,wDAAE;AAChB;AACA,eAAe;AACf;AACA,eAAe;AACf,2CAA2C;;AAE3C;AACA;;AAEA;AACA,oCAAoC;;AAEpC,cAAc,gDAAO;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA,GAAG;;AAEH;AACA,gBAAgB,4IAAiB,eAAe,0GAAmB;AACnE,aAAa,0GAAmB;AAChC;AACA;AACA;AACA;AACA,qBAAqB,0DAAI;AACzB;AACA,eAAe;;AAEf;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA,GAAG;;AAEH;AACA,WAAW,0DAAI;AACf;;AAEA;AACA,WAAW,0DAAI;AACf;;AAEA,EAAE,uDAAS;AACX,sBAAsB,0DAAI;AAC1B;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,4IAAiB,eAAe,0GAAmB;AACnE;AACA,aAAa,0GAAmB;AAChC;AACA;AACA;AACA;AACA,qBAAqB,6DAAQ;;AAE7B;AACA;AACA,qBAAqB,6DAAQ;;AAE7B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA,GAAG;;AAEH;AACA,gBAAgB,4IAAiB,eAAe,0GAAmB;AACnE;AACA,aAAa,0GAAmB;AAChC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA,GAAG;;AAEH,sBAAsB,6DAAI;AAC1B;AACA;AACA,GAAG;AACH,E;;;;;;;;ACzMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgD;AAC4C;AAClE;AAC8D;;AAExF;AACA,sBAAsB,6DAAI,CAAC,4FAAc,IAAI;AAC7C;;AAEe,0JAAkB,oBAAoB,E;;;;;;;;ACTrD;AAAA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA,C","file":"x","sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/dashboard/projects/[project]/startup-idea/success\",\n      function () {\n        return require(\"private-next-pages/dashboard/projects/[project]/startup-idea/success.js\");\n      }\n    ]);\n  ","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"C:/off-saas/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/off-saas/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport firebase, { auth, db } from '../lib/firebase';\nimport React, { useContext, createContext, useEffect, useState } from 'react';\nimport Cookies from 'js-cookie';\nimport { Router } from 'next/router';\nexport var AuthContext = /*#__PURE__*/createContext(); // Tutaj można umieścić default Value\n\nexport var useAuth = function useAuth() {\n  return useContext(AuthContext);\n};\nexport var AuthProvider = function AuthProvider(_ref) {\n  var children = _ref.children;\n\n  var _useState = useState(),\n      currentUser = _useState[0],\n      setCurrentUser = _useState[1];\n\n  var _useState2 = useState(true),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var handleUser = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(user) {\n      var formatedUser;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!user) {\n                _context.next = 11;\n                break;\n              }\n\n              Cookies.set('uid', user.uid, true); // console.log('user - ', user);\n              // console.log('user name - ', name);\n\n              _context.next = 4;\n              return formatUser(user);\n\n            case 4:\n              formatedUser = _context.sent;\n              // const decodedToken = await firebase.auth().currentUser.getIdTokenResult();\n              // console.log(decodedToken.claims.stripeRole);\n              db.collection('users').doc(user.uid).set({\n                formatedUser: formatedUser\n              }, {\n                merge: true\n              });\n              setCurrentUser(formatedUser); // Cookies.set('token', user.za, true);\n\n              setLoading(false);\n              return _context.abrupt(\"return\", formatedUser);\n\n            case 11:\n              setCurrentUser(false); // Cookies.remove('token', user.za);\n\n              Cookies.remove('uid');\n              setLoading(false);\n              return _context.abrupt(\"return\", false);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleUser(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var signUp = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(email, password) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return auth.createUserWithEmailAndPassword(email, password).then(function (response) {\n                return handleUser(response.user);\n              });\n\n            case 2:\n              return _context2.abrupt(\"return\", _context2.sent);\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function signUp(_x2, _x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var logIn = function logIn(email, password) {\n    return auth.signInWithEmailAndPassword(email, password);\n  };\n\n  var logOut = function logOut() {\n    return auth.signOut();\n  };\n\n  useEffect(function () {\n    var unsubscribe = auth.onIdTokenChanged(handleUser);\n    return function () {\n      return unsubscribe();\n    };\n  }, []);\n  var value = {\n    currentUser: currentUser,\n    signUp: signUp,\n    logIn: logIn,\n    logOut: logOut\n  };\n\n  var getStripeRole = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var decodedToken;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return firebase.auth().currentUser.getIdToken(true);\n\n            case 2:\n              _context3.next = 4;\n              return firebase.auth().currentUser.getIdTokenResult();\n\n            case 4:\n              decodedToken = _context3.sent;\n              return _context3.abrupt(\"return\", decodedToken.claims.stripeRole || 'free');\n\n            case 6:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function getStripeRole() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var formatUser = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(user) {\n      var token;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              console.log('OFF - ', user);\n              _context4.next = 3;\n              return user.getIdToken();\n\n            case 3:\n              token = _context4.sent;\n              _context4.t0 = user.uid;\n              _context4.t1 = user.email;\n              _context4.t2 = user.providerData[0].providerId;\n              _context4.next = 9;\n              return getStripeRole();\n\n            case 9:\n              _context4.t3 = _context4.sent;\n              _context4.t4 = token;\n              return _context4.abrupt(\"return\", {\n                uid: _context4.t0,\n                email: _context4.t1,\n                provider: _context4.t2,\n                stripeRole: _context4.t3,\n                token: _context4.t4\n              });\n\n            case 12:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function formatUser(_x4) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsx(AuthContext.Provider, {\n    value: value,\n    children: !loading && children\n  });\n};","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { withSuperJSONPage as _withSuperJSONPage } from \"babel-plugin-superjson-next/tools\";\nimport React from 'react';\nimport StartupSuccess from '../../../../../components/dashboard/startup/StartupSuccess';\n\nvar StartupSuccessPage = function StartupSuccessPage() {\n  return /*#__PURE__*/_jsx(StartupSuccess, {});\n};\n\nexport default _withSuperJSONPage(StartupSuccessPage);","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}"]}}